import{G as j,I as ce,H as qe,dg as Ye,a2 as ue,am as Q,aq as Ge,ad as We,aU as J,aW as le,bE as He,dh as I,ah as y,aV as Je,aJ as Qe,di as Xe,dj as Ze,a7 as et,aY as tt,a0 as at,a1 as st,a8 as ot,aL as nt,an as it,a9 as lt,ai as pt}from"./main-8b08e1d6.js";import{l as pe}from"./logo-dark-be7b231e.js";import ct from"./ModalConfirm-92ee844f.js";import{M as de}from"./Modal-0f4a5102.js";import{B as ut}from"./BuyServices-8ab2e404.js";import{b as re,c as _e,u as me}from"./useMyApps-6a511b1e.js";import{d as z,b as $,S as u,X as L,Y as s,D as t,u as e,q as X,ag as dt,c as F,m as fe,f as Z,U as x,F as ve,V as a,E as i,$ as o,a8 as he,a2 as K,a1 as ge,r as rt,ab as _t,ac as mt}from"./_plugin-vue_export-helper-b059e461.js";import{_ as be}from"./Input-96fa4693.js";import{_ as ye}from"./DataTable.vue_vue_type_style_index_0_lang-cdaf49f4.js";import{_ as ft}from"./ExportRunDataModal.vue_vue_type_script_setup_true_lang-39850a89.js";import{e as vt}from"./useScriptEditor-4173e447.js";import ht from"./Variables-e3cd83d6.js";import{F as gt}from"./FormMakingResult-fec35bca.js";import{_ as bt}from"./Alert-2eccd136.js";import{_ as yt}from"./Divider-65f3d898.js";import{_ as xt}from"./InputGroup-20db4544.js";import"./lodash-6114c6d4.js";import"./axios-1e30d922.js";import"./xlsx-f5126985.js";import"./a-72358bba.js";import"./Suffix-fc59bb7a.js";import"./DataTable-e5054828.js";import"./Checkbox-ce86da58.js";import"./RadioGroup-69a7fbba.js";import"./Radio-c980589e.js";import"./Select-f7c79767.js";import"./Pagination-ce77c3f3.js";import"./FormItem-52ed65a1.js";import"./Scrollbar-e90e60b7.js";import"./DynamicInput-debc4a5e.js";import"./Remove-be3cc84a.js";import"./useSavedTasks-dbe97dc3.js";import"./useRunScript-b4e924db.js";import"./useConsole-dd6c2120.js";import"./Upload-46a3755a.js";import"./Progress-0b0a0198.js";import"./_createCompounder-4af3bdce.js";import"./InputNumber-c85d5887.js";import"./Grid-308f499b.js";const wt=z({__name:"CreateTaskModal",props:{app:{type:Object,default:null},showModal:{type:Boolean,default:!1}},emits:["update:showModal"],setup(A,{emit:n}){const d=A,{router:P}=j(),{user:B}=ce(qe()),f=$(!1),g=$(""),M=async()=>{try{f.value=!0;const{data:w}=await Ye({appId:d.app.id,input:d.app.input,userId:B.value.id,name:g.value,profiles:{enable:!0,list:[]}});g.value="",n("update:showModal",!1),window.$message.success("Task created!"),P.push({name:"main.savedTaskDetails",params:{id:w.data.id},query:{tab:"profiles",newTask:1}})}catch{window.$message.warning("Create task failed!")}finally{f.value=!1}};return(w,C)=>{const S=be;return u(),L(de,{"is-show":A.showModal,header:"Create task",icon:"actionFileUpload","submit-label":"Create","action-submit":M,onClose:C[1]||(C[1]=b=>w.$emit("update:showModal",!1))},{body:s(()=>[t(S,{value:e(g),"onUpdate:value":C[0]||(C[0]=b=>X(g)?g.value=b:null),placeholder:"Input task name",onKeyup:dt(M,["enter"])},null,8,["value","onKeyup"])]),_:1},8,["is-show"])}}}),kt=z({__name:"AppRunDetails",setup(A){const{route:n}=j(),d=F(()=>n.params.id),{state:P,selectedRun:B,runs:f,columns:g,pagination:M,loading:w,rowProps:C,getAppRuns:S,onPageUpdate:b,onPageSizeUpdate:T}=re();return fe(async()=>{await S(d.value)}),Z(async()=>{await S(d.value)}),(h,k)=>{var N;return u(),x(ve,null,[t(e(ye),{class:"mt-2",loading:e(w),data:e(f),columns:e(g),pagination:e(M),"row-key":c=>c.id,"row-props":e(C),"on-page-update":e(b),"on-page-size-update":e(T)},null,8,["loading","data","columns","pagination","row-key","row-props","on-page-update","on-page-size-update"]),t(ft,{"model-show":e(P).showExportDataModal,"onUpdate:modelShow":k[0]||(k[0]=c=>e(P).showExportDataModal=c),"run-id":(N=e(B))==null?void 0:N.id},null,8,["model-show","run-id"])],64)}}}),At=z({__name:"AppSavedTasksDetails",setup(A){const{route:n}=j(),d=F(()=>n.params.id),{tasks:P,columns:B,loading:f,pagination:g,rowProps:M,getAppSavedTasks:w,onPageUpdate:C,onPageSizeUpdate:S}=_e();return fe(async()=>{await w(d.value)}),Z(async()=>{await w(d.value)}),(b,T)=>(u(),L(e(ye),{class:"mt-2",loading:e(f),data:e(P),columns:e(B),pagination:e(g),"row-key":h=>h.id,"row-props":e(M),"on-page-update":e(C),"on-page-size-update":e(S)},null,8,["loading","data","columns","pagination","row-key","row-props","on-page-update","on-page-size-update"]))}}),Pt={key:0},Ct={class:"flex mb-2"},Mt={key:0},$t={key:0},Bt={key:1},St={key:1},Tt={key:1},Dt=z({__name:"AppInput",setup(A){const{t:n}=ue(),{appDetails:d,variables:P}=me();return(B,f)=>{const g=Q;return e(d)?(u(),x("div",Pt,[a("div",Ct,[t(g,{quaternary:"",size:"tiny",type:"primary",onClick:f[0]||(f[0]=M=>e(d).enableInput=!e(d).enableInput)},{default:s(()=>[i(o(e(n)("Page.AutomationApps.Label.SwitchTo"))+" "+o(e(d).enableInput?e(n)("Common.Label.Variables"):e(n)("Common.Label.InputForm")),1)]),_:1})]),e(d).enableInput?(u(),x("div",Mt,[e(d).input.length?(u(),x("div",$t,[a("div",{class:"app-input mt-8px",style:he({width:e(vt)})},[t(gt,{"list-node":e(d).input},null,8,["list-node"])],4)])):(u(),x("span",Bt,o(e(n)("Page.AutomationTasks.Label.NoInput")),1))])):(u(),x("div",St,[e(P).length?(u(),L(ht,{key:0,"public-only":""})):(u(),x("span",Tt,o(e(n)("Page.AutomationTasks.Label.NoVariable")),1))]))])):K("",!0)}}});const It=ge(Dt,[["__scopeId","data-v-d7b98c94"]]),ee=A=>(_t("data-v-e3f089e6"),A=A(),mt(),A),Lt={class:"flex items-center gap-24px mt-24px"},Nt=["src"],Vt={class:"w-full"},Et={class:"flex items-center justify-between"},Rt={class:"flex items-center gap-16px"},Ot={class:"font-black text-2xl"},Ut={class:"flex items-center gap-16px"},Ft={class:"items-center flex gap-8px"},jt={class:"items-center flex gap-8px"},zt={class:"flex max-w-1/2 item-centers gap-24px mt-8px"},Kt=["src"],qt={class:"flex items-center justify-between"},Yt={class:"flex items-center gap-4px"},Gt={class:"flex items-center gap-4px"},Wt={class:"app-number"},Ht={class:"flex items-center gap-4px"},Jt={class:"app-number"},Qt={class:"actions w-full"},Xt={class:"flex items-center gap-16px p-16px"},Zt={style:{color:"#fff"}},ea=ee(()=>a("div",{class:"mb-24px font-semibold"}," Payment detail ",-1)),ta={class:"flex justify-between items-center"},aa={class:"mt-16px flex items-center gap-8px"},sa={class:"font-semibold"},oa={class:"mt-16px flex items-center gap-8px"},na={class:"font-semibold flex items-center gap-4px"},ia={class:"flex justify-between mt-16px"},la=ee(()=>a("div",{class:"font-semibold"}," Price : ",-1)),pa={class:"font-semibold"},ca={class:"flex justify-between mt-16px"},ua={class:"font-semibold"},da={class:"font-semibold"},ra={class:"flex items-center justify-between w-full mt-16px"},_a={class:"font-bold"},ma={key:0,class:"font-bold"},fa={key:1,class:"font-bold"},va={class:"flex gap-24px"},ha={class:"qr-code w-full"},ga=["src"],ba={class:"flex flex-col justify-between"},ya={class:"flex flex-col gap-16px"},xa={class:"flex gap-8px"},wa={class:"font-semibold"},ka={class:"flex gap-8px"},Aa={class:"font-semibold"},Pa={class:"flex gap-8px"},Ca={class:"font-semibold"},Ma={class:"flex gap-8px"},$a={class:"font-semibold"},Ba={class:"flex gap-8px"},Sa={class:"font-semibold"},Ta=ee(()=>a("div",{class:"font-semibold"}," Lưu ý nhập đúng cú pháp hệ thống sẽ nạp tự động hoặc bạn có thể quét mã QR. Vui lòng đợi từ 3 - 5 phút để hệ thống ghi nhận sau khi chuyển khoản. ",-1)),Da={class:"w-full mt-16px flex justify-end"},Ia=z({__name:"AppDetails",setup(A){const{t:n,locale:d}=ue(),{fromNow:P}=Ge(),{route:B}=j(),f=F(()=>B.params.id),{isDarkMode:g}=ce(We()),{runs:M,getAppRuns:w}=re(),{tasks:C,getAppSavedTasks:S}=_e(),b=$(!1),T=$(!1),h=$(),k=$("bank"),N=$(!1),c=rt({voucherSuccessMsg:"",voucherErrorMsg:"",amount:0,discount_amount:0,voucherOffPercent:0,voucherOffValue:0}),V=$(""),E={image:pe,author:{name:"Genlogin",image:pe},tag:"Facebook"},{router:te}=j(),{appDetails:v,state:D,getAppDetails:xe,exportApp:we,exportProtectedApp:ke,updateApp:ae,productData:r,buyApp:Ae,isPermit:Pe}=me(),Ce=async()=>{try{N.value=!0,Object.assign(c,{voucherSuccessMsg:"",voucherErrorMsg:"",amount:0,discount_amount:0,voucherOffPercent:0,voucherOffValue:0});const{data:m}=await Xe({product_id:v.value.metadata.productId,price:r.value.price.lifetime?"lifetime":"subscription",code:V.value});c.amount=m.data.amount,c.discount_amount=m.data.discount_amount,c.voucherOffPercent=m.data.percent,c.voucherOffValue=c.amount-c.discount_amount,m.data.valid?c.voucherSuccessMsg=n("Page.Billing.Label.VoucherApplied"):c.voucherErrorMsg=n("Page.Billing.Label.VoucherInvalid")}catch{c.voucherErrorMsg=n("Page.Billing.Label.VoucherInvalid")}finally{N.value=!1}},q=()=>{te.push({name:"main.myApp"})},Me=async()=>{try{await Ze(v.value.id),window.$message.success(n("Page.AutomationApps.Msg.AppDeleted")),D.showDeleteModal=!1,v.value=null,q()}catch{}},{setTitle:$e}=pt(),Be=F(()=>{var m;return[...v&&((m=v.value)!=null&&m.metadata.protected)?[]:[{label:n("Page.AutomationApps.Button.Export"),key:"export",icon:J(le,{color:"green"})},{label:n("Page.AutomationApps.Button.ExportProtected"),key:"exportProtected",icon:J(le,{color:"orange"})}],{label:n("Page.AutomationApps.Button.Delete"),key:"delete",icon:J(He)}]}),Se=async m=>{switch(m){case"export":await we(f.value,`${v.value.name}.genlogin`);break;case"exportProtected":await ke(f.value);break;case"delete":D.showDeleteModal=!0;break}},Te=F(()=>{var m,p,_;return((p=(m=r.value)==null?void 0:m.descriptions)==null?void 0:p.find(G=>G.language===d.value))||((_=r.value)==null?void 0:_.descriptions[0])}),De=()=>{te.push({name:"main.scriptEditor",params:{id:f.value}})};Z(async()=>{if($e("Details"),await Promise.all([xe(f.value),w(f.value),S(f.value)]),!v.value)return q()});const Ie=async()=>{await ae(),D.showCreateTaskModal=!0},Y=async()=>{const m=r.value.price.lifetime?{method:k.value,product_id:v.value.metadata.productId,price:"lifetime",discount_code:V.value}:r.value.price.subscription?{method:k.value,product_id:v.value.metadata.productId,price:"subscription",duration:r.value.price.subscription.duration,discount_code:V.value}:null,{data:p}=await Ae(m);h.value=p.memo.payment},Le=async()=>{k.value===I.BANK&&(await Y(),h.value.bank_id&&(b.value=!1,T.value=!0)),k.value===I.CRYPTO&&(await Y(),h.value.url&&(b.value=!1,k.value=I.BANK,window.open(h.value.url,"_blank"))),k.value===I.CARD&&(await Y(),h.value.url&&(b.value=!1,k.value=I.BANK,window.open(h.value.url,"_blank")))},Ne=$([{label:"Bank",value:I.BANK,icon:"bank"},{label:"Coin",value:I.COIN,icon:"coin"},{label:"Crypto",value:I.CRYPTO,icon:"bitcoin"}]);return(m,p)=>{var oe,ne,ie;const _=et,G=tt,se=Q,R=Q,Ve=bt,W=at,Ee=st,Re=yt,H=ot,Oe=be,Ue=xt,Fe=nt,je=it,ze=lt;return u(),x(ve,null,[a("div",{class:"flex items-center gap-8px cursor-pointer",onClick:q},[t(y,{type:"goBack"}),a("span",null,o(e(n)("Page.AutomationApps.Button.BackToMyApps")),1)]),a("div",Lt,[(u(),x("img",{key:0,class:"avatar",src:(oe=E==null?void 0:E.author)==null?void 0:oe.image,alt:""},null,8,Nt)),a("div",Vt,[a("div",Et,[a("div",Rt,[a("div",Ot,[t(_,null,{default:s(()=>{var l;return[i(o((l=e(v))==null?void 0:l.name),1)]}),_:1})]),t(G,{round:"",bordered:!1},{default:s(()=>[i(o(e(n)("Page.AutomationApps.Label.App")),1)]),_:1})]),a("div",Ut,[t(se,{disabled:(ie=(ne=e(v))==null?void 0:ne.metadata)==null?void 0:ie.protected,ghost:"",type:"primary",onClick:De},{default:s(()=>[a("div",Ft,[t(y,{type:"edit"}),i(" "+o(e(n)("Page.AutomationApps.Button.EditApp")),1)])]),_:1},8,["disabled"]),t(se,{type:"primary",onClick:p[0]||(p[0]=l=>e(D).showCreateTaskModal=!0)},{default:s(()=>[a("div",jt,[t(y,{type:"add"}),i(" "+o(e(n)("Page.AutomationApps.Button.CreateTask")),1)])]),_:1}),t(Je,{trigger:"click",size:"huge","drop-down-actions":e(Be),onSelect:Se},null,8,["drop-down-actions"])])]),a("div",zt,[t(_,{class:"flex items-center gap-4px",depth:"3"},{default:s(()=>[t(y,{type:"clock"}),i(" "+o(e(n)("Page.AutomationApps.Label.Updated"))+" "+o(e(v)&&e(P)(e(v).updatedAt)),1)]),_:1}),t(_,{class:"flex items-center gap-4px",depth:"3"},{default:s(()=>[t(y,{type:"eye"}),t(_,{depth:"3"},{default:s(()=>[i(o(0))]),_:1})]),_:1}),t(_,{class:"flex items-center gap-4px",depth:"3"},{default:s(()=>[t(y,{type:"download"}),t(_,{depth:"3"},{default:s(()=>[i(o(0))]),_:1})]),_:1}),t(_,{class:"flex items-center gap-4px",depth:"3"},{default:s(()=>[t(y,{type:"layer"}),t(_,{depth:"3"},{default:s(()=>{var l;return[i(o(((l=e(v))==null?void 0:l.version)||"1.0.0"),1)]}),_:1})]),_:1}),t(_,{class:"flex items-center gap-4px",depth:"3"},{default:s(()=>{var l,O;return[(l=E.author)!=null&&l.image?(u(),x("img",{key:0,class:"logo",src:(O=E.author)==null?void 0:O.image,alt:""},null,8,Kt)):(u(),L(y,{key:1,type:"users"})),t(_,{depth:"3"},{default:s(()=>{var U;return[i(o((U=E.author)==null?void 0:U.name),1)]}),_:1})]}),_:1})])])]),t(_,{class:"block my-16px"},{default:s(()=>{var l;return[i(o((l=e(v))==null?void 0:l.script.description),1)]}),_:1}),e(Pe)?K("",!0):(u(),L(Ve,{key:0,class:"my-8px",type:"warning"},{icon:s(()=>[t(y,{type:"info",class:"mt-12px"})]),default:s(()=>[a("div",qt,[i(" Extend your subscription to restore full access. "),t(R,{type:"warning",onClick:p[1]||(p[1]=l=>b.value=!0)},{default:s(()=>[i(" Payment ")]),_:1})])]),_:1})),t(Ee,{"default-value":"input",style:he({"--number-bg-color":e(g)?"#262626":"#F0F0F0"})},{default:s(()=>[t(W,{name:"input"},{tab:s(()=>[a("div",Yt,[t(y,{type:"play"}),i(" "+o(e(n)("Page.AutomationApps.Label.Input")),1)])]),default:s(()=>[t(It)]),_:1}),t(W,{name:"runs"},{tab:s(()=>[a("div",Gt,[a("div",Wt,o(e(M).length),1),i(" "+o(e(n)("Page.AutomationApps.Label.Runs")),1)])]),default:s(()=>[t(kt)]),_:1}),t(W,{name:"savedTasks"},{tab:s(()=>[a("div",Ht,[a("div",Jt,o(e(C).length),1),i(" "+o(e(n)("Page.AutomationApps.Label.SavedTasks")),1)])]),default:s(()=>[t(At)]),_:1})]),_:1},8,["style"]),a("div",Qt,[t(H,null,{default:s(()=>[t(Re),a("div",Xt,[t(R,{type:"primary",onClick:Ie},{default:s(()=>[t(y,{color:"#fff",class:"mr-8px",type:"play"}),a("div",Zt,o(e(n)("Page.AutomationApps.Button.SaveAndRun")),1)]),_:1}),t(R,{type:"primary",ghost:"",onClick:e(ae)},{default:s(()=>[t(y,{class:"mr-8px",type:"save"}),i(" "+o(e(n)("Page.AutomationApps.Button.Save")),1)]),_:1},8,["onClick"])])]),_:1})]),t(wt,{"show-modal":e(D).showCreateTaskModal,"onUpdate:showModal":p[2]||(p[2]=l=>e(D).showCreateTaskModal=l),app:e(v)},null,8,["show-modal","app"]),t(ct,{type:"delete",icon:"trash",header:e(n)("Page.AutomationApps.Label.DeleteApp"),"is-show":e(D).showDeleteModal,"cancel-label":e(n)("Common.Button.Keep"),"submit-label":e(n)("Common.Button.Delete"),"action-submit":Me,onClose:p[3]||(p[3]=l=>e(D).showDeleteModal=!1)},{body:s(()=>[t(_,null,{default:s(()=>[i(o(e(n)("Common.Label.ConfirmCheck")),1)]),_:1})]),_:1},8,["header","is-show","cancel-label","submit-label"]),t(de,{"is-show":e(b),header:"Buy service",icon:"wallet","submit-label":"Buy now",width:"1200px","action-submit":Le,onClose:p[6]||(p[6]=l=>b.value=!1)},{body:s(()=>[t(ut,{"payment-list":e(Ne),onUpdateMethod:p[5]||(p[5]=l=>{k.value=l})},{service:s(()=>[t(H,null,{default:s(()=>{var l,O,U;return[ea,t(Fe,{class:"mt-24px",vertical:""},{default:s(()=>[a("div",ta,[t(Ue,null,{default:s(()=>[t(Oe,{value:e(V),"onUpdate:value":p[4]||(p[4]=Ke=>X(V)?V.value=Ke:null),"allow-input":e(Qe),clearable:"",class:"w-200px",placeholder:"Enter voucher"},null,8,["value","allow-input"]),t(R,{loading:e(N),type:"primary",onClick:Ce},{default:s(()=>[i(o(e(n)("Common.Button.Add")),1)]),_:1},8,["loading"])]),_:1})]),e(c).voucherSuccessMsg?(u(),L(_,{key:0,class:"text-green-500",depth:"3"},{default:s(()=>[i(o(e(c).voucherSuccessMsg),1)]),_:1})):K("",!0),e(c).voucherErrorMsg?(u(),L(_,{key:1,class:"text-red-500",depth:"3"},{default:s(()=>[i(o(e(c).voucherErrorMsg),1)]),_:1})):K("",!0)]),_:1}),a("div",aa,[i(" App name : "),a("div",sa,o((l=e(Te))==null?void 0:l.name),1)]),a("div",oa,[i(" Created by : "),a("div",na,[t(je,{size:"small",src:(O=e(r))==null?void 0:O.seller_icon},null,8,["src"]),i(" "+o((U=e(r))==null?void 0:U.seller_name),1)])]),a("div",ia,[la,a("div",pa,o(e(r).price.lifetime?`$${e(r).price.lifetime}`:e(r).price.subscription?`$${e(r).price.subscription.price} / ${e(r).price.subscription.duration}`:""),1)]),a("div",ca,[a("div",ua,o(e(n)("Page.Billing.Label.AddVoucher")),1),a("div",da," $"+o(e(c).voucherOffValue.toFixed(2)),1)]),a("div",null,[t(_,{class:"block text-xs",depth:"3"},{default:s(()=>[i(" Off "+o(e(c).voucherOffPercent)+"% ",1)]),_:1})]),a("div",ra,[a("div",_a,o(e(n)("Page.Billing.Label.Total")),1),e(c).voucherSuccessMsg?(u(),x("div",ma," $"+o(e(c).discount_amount),1)):(u(),x("div",fa,o(e(r).price.lifetime?`$${e(r).price.lifetime}`:e(r).price.subscription?`$${e(r).price.subscription.price} / ${e(r).price.subscription.duration}`:""),1))])]}),_:1})]),_:1},8,["payment-list"])]),_:1},8,["is-show"]),t(ze,{show:e(T),"onUpdate:show":p[8]||(p[8]=l=>X(T)?T.value=l:null)},{default:s(()=>[t(H,{class:"min-h-380px",style:{width:"700px"},bordered:!1,size:"huge"},{default:s(()=>[a("div",va,[a("div",ha,[a("img",{src:e(h).url},null,8,ga)]),a("div",ba,[a("div",ya,[a("div",xa,[i(" Ngân hàng: "),a("div",wa,o(e(h).bank_id),1)]),a("div",ka,[i(" Số tài khoản: "),a("div",Aa,o(e(h).account_no),1)]),a("div",Pa,[i(" Chủ tài khoản: "),a("div",Ca,o(e(h).account_name),1)]),a("div",Ma,[i(" Số tiền: "),a("div",$a,o(e(h).amount.toFixed(2))+" VND ",1)]),a("div",Ba,[i(" Nội dung chuyển tiền: "),a("div",Sa,o(e(h).description),1)]),Ta]),a("div",Da,[t(R,{class:"w-1/3",secondary:"",onClick:p[7]||(p[7]=l=>T.value=!1)},{default:s(()=>[i(" Close ")]),_:1})])])])]),_:1})]),_:1},8,["show"])],64)}}});const bs=ge(Ia,[["__scopeId","data-v-e3f089e6"]]);export{bs as default};
