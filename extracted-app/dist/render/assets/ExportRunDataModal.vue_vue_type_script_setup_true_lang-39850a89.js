import{a2 as k,dL as v,ay as h,ew as S,ex as M,aL as E,am as R,a9 as $}from"./main-8b08e1d6.js";import{d as C,r as L,S as f,X as B,Y as t,D as n,u as e,E as T,$ as Y,U as I,F as N,ad as j}from"./_plugin-vue_export-helper-b059e461.js";import{_ as F}from"./Radio-c980589e.js";import{_ as O}from"./RadioGroup-69a7fbba.js";import{_ as V}from"./FormItem-52ed65a1.js";const J=C({__name:"ExportRunDataModal",props:{runId:{type:String,default:""},modelShow:{type:Boolean,default:!1}},emits:["update:modelShow"],setup(i,{emit:g}){const c=i,{t:s}=k(),a=L({loading:!1,type:"xlsx",outputDir:""}),x=[{label:"XLSX",value:"xlsx"},{label:"CSV",value:"csv"},{label:"JSON",value:"json"}],y=async()=>{a.loading=!0;const{data:{data:m}}=await v(c.runId),l=m.task.name,u=h().format("YYYY-MM-DD_HH-mm-ss");try{const{data:o}=await S(`${l}_${u}.${a.type}`);if(!o)return;a.outputDir=o;const{outputDir:p,type:_}=a;await M(c.runId,{outputDir:p,type:_}),window.$message.success(s("Modal.ExportRunData.Msg.DataExported"))}catch{}finally{a.loading=!1}},d=()=>{g("update:modelShow",!1),Object.assign(a,{type:"xlsx",outputDir:""})};return(m,l)=>{const u=F,o=E,p=O,_=V,w=R,D=$;return f(),B(D,{show:i.modelShow,title:e(s)("Modal.ExportRunData.Label.Title"),"transform-origin":"center",preset:"card",style:{width:"600px"},size:"huge",segmented:{footer:"soft"},onClose:d,onMaskClick:d},{footer:t(()=>[n(w,{type:"primary",loading:e(a).loading,size:"small",onClick:y},{default:t(()=>[T(Y(e(s)("Modal.ExportRunData.Button.Download")),1)]),_:1},8,["loading"])]),default:t(()=>[n(_,{label:e(s)("Modal.ExportRunData.Label.SelectType"),"show-feedback":!1},{default:t(()=>[n(p,{value:e(a).type,"onUpdate:value":l[0]||(l[0]=r=>e(a).type=r)},{default:t(()=>[n(o,null,{default:t(()=>[(f(),I(N,null,j(x,(r,b)=>n(u,{key:b,value:r.value,label:r.label},null,8,["value","label"])),64))]),_:1})]),_:1},8,["value"])]),_:1},8,["label"])]),_:1},8,["show","title"])}}});export{J as _};
