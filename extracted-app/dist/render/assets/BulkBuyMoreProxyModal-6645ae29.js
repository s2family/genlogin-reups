import{d as le,e as ie,b as re,j as Z,eU as ue,c5 as q,m as ce,a2 as de,bf as _e,eO as $,bg as M,br as pe,ah as F,bs as ve,bA as he,eN as me,a7 as fe,a8 as be,am as ye,a9 as ge,fL as xe,fM as Pe,eP as Ce}from"./main-8b08e1d6.js";import{M as ke}from"./Modal-0f4a5102.js";import{d as ee,c as E,h as H,b,w as Q,S as h,U as m,D as o,Y as i,u as e,F as Y,ad as J,V as t,$ as p,E as r,q as W,ae as we,a2 as O,ab as Be,ac as Re,a1 as Ne}from"./_plugin-vue_export-helper-b059e461.js";import{_ as Se}from"./Scrollbar-e90e60b7.js";import{_ as Ie}from"./Select-f7c79767.js";import{_ as Te}from"./InputGroup-20db4544.js";import"./lodash-6114c6d4.js";import"./axios-1e30d922.js";import"./xlsx-f5126985.js";import"./Divider-65f3d898.js";import"./Suffix-fc59bb7a.js";const Me=le("input-group-label",`
 position: relative;
 user-select: none;
 -webkit-user-select: none;
 box-sizing: border-box;
 padding: 0 12px;
 display: inline-block;
 border-radius: var(--n-border-radius);
 background-color: var(--n-group-label-color);
 color: var(--n-group-label-text-color);
 font-size: var(--n-font-size);
 line-height: var(--n-height);
 height: var(--n-height);
 flex-shrink: 0;
 white-space: nowrap;
 transition: 
 color .3s var(--n-bezier),
 background-color .3s var(--n-bezier),
 box-shadow .3s var(--n-bezier);
`,[ie("border",`
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 border-radius: inherit;
 border: var(--n-group-label-border);
 transition: border-color .3s var(--n-bezier);
 `)]),Oe=Object.assign(Object.assign({},Z.props),{size:{type:String,default:"medium"},bordered:{type:Boolean,default:void 0}}),Ee=ee({name:"InputGroupLabel",props:Oe,setup(c){const{mergedBorderedRef:B,mergedClsPrefixRef:f,inlineThemeDisabled:d}=re(c),C=Z("Input","-input-group-label",Me,ue,c,f),N=E(()=>{const{size:u}=c,{common:{cubicBezierEaseInOut:x},self:{groupLabelColor:V,borderRadius:P,groupLabelTextColor:v,lineHeight:R,groupLabelBorder:y,[q("fontSize",u)]:k,[q("height",u)]:A}}=C.value;return{"--n-bezier":x,"--n-group-label-color":V,"--n-group-label-border":y,"--n-border-radius":P,"--n-group-label-text-color":v,"--n-font-size":k,"--n-line-height":R,"--n-height":A}}),n=d?ce("input-group-label",E(()=>c.size[0]),N,c):void 0;return{mergedClsPrefix:f,mergedBordered:B,cssVars:d?void 0:N,themeClass:n==null?void 0:n.themeClass,onRender:n==null?void 0:n.onRender}},render(){var c,B,f;const{mergedClsPrefix:d}=this;return(c=this.onRender)===null||c===void 0||c.call(this),H("div",{class:[`${d}-input-group-label`,this.themeClass],style:this.cssVars},(f=(B=this.$slots).default)===null||f===void 0?void 0:f.call(B),this.mergedBordered?H("div",{class:`${d}-input-group-label__border`}):null)}}),j=c=>(Be("data-v-3d3cc72a"),c=c(),Re(),c),Ve={key:0},Ae={class:"flex align-center gap-2"},Le={class:"self-end"},ze=j(()=>t("hr",{class:"my-2"},null,-1)),De={class:"flex justify-between"},$e=j(()=>t("span",null,"Total",-1)),Ye={key:1},je={class:"mb-16px payment"},Ue={class:"flex gap-8px mt-16px"},Ke={key:0},Xe={class:"mt-16px"},Ge={key:1},qe={class:"flex mt-16px items-center justify-between"},Fe={key:2},He={class:"mt-16px"},Qe={key:3},Je={class:"mt-16px"},We={class:"flex gap-24px"},Ze={class:"qr-code w-full"},et=["src"],tt={class:"flex flex-col justify-between"},st={class:"flex flex-col gap-16px"},at={class:"flex gap-8px"},ot={class:"font-semibold"},nt={class:"flex gap-8px"},lt={class:"font-semibold"},it={class:"flex gap-8px"},rt={class:"font-semibold"},ut={class:"flex gap-8px"},ct={class:"font-semibold"},dt={class:"flex gap-8px"},_t={class:"font-semibold"},pt=j(()=>t("div",{class:"font-semibold"}," Lưu ý nhập đúng cú pháp hệ thống sẽ nạp tự động hoặc bạn có thể quét mã QR. Vui lòng đợi từ 3 - 5 phút để hệ thống ghi nhận sau khi chuyển khoản. ",-1)),vt={class:"w-full mt-16px flex justify-end"},ht=ee({__name:"BulkBuyMoreProxyModal",emits:["close"],setup(c,{emit:B}){const{t:f}=de(),{showModal:d,selectedProxies:C}=_e(),N=b([{label:"Bank",value:"BANK",icon:"bank"},{label:"Coin",value:"COIN",icon:"coin"},{label:"Crypto",value:"CRYPTO",icon:"bitcoin"},{label:"Card/Paypal",value:"CARD",icon:"creditCard"}]),n=b(N.value[0].value),u=b(),x=b(!1),V=b(!1),P=b(null),v=b(1),R=b(!1),y=b($[0].value),k=b({}),A=E(()=>Object.values(k.value).reduce((s,a)=>(s+=a,s),0)),L=E(()=>C.value.every(s=>s.extras.type===M.VINA_PROXY_V4)),U=()=>{d.bulkBuyMoreProxy=!1,y.value=$[0].value,k.value={},B("close")},te=()=>{x.value=!1,v.value=1,P.value&&clearInterval(P.value),U()},se=s=>{var I;const{type:a,custom:_}=s.extras,{country:g}=_,S=Array.from(new Set(ve.concat(he)));let w=null;return[M.VINA_PROXY_V4,M.VINA_PROXY_DATA_CENTER,M.KENT_PROXY].includes(a)?w="vn":w=(I=S.find(T=>T.value===(g==null?void 0:g.toUpperCase())))==null?void 0:I.flag,w},ae=async s=>{if(L.value)k.value[s.id]=2;else try{R.value=!0;const a={extras:{day:parseInt(y.value),id_list:[s.id]},proxy_id:s.proxy_id},{data:_}=await xe(a),g=await Pe({amount:_.data,from_currency:"VND",to_currency:"USD"});k.value[s.id]=g.data.data}catch{}finally{R.value=!1}},z=async()=>await Promise.all(C.value.map(s=>ae(s))),D=async()=>{try{const s=C.value.map(w=>w.id),a=C.value[0].proxy_id,g={extras:{day:L.value?30:y.value,id_list:s},proxy_id:a,method:n.value},{data:S}=await Ce(g);u.value=S.data,window.$message.success(f("Page.Proxy.Modal.BuyProxy.Success"))}catch{}},K=async()=>{try{P.value&&clearInterval(P.value);const s=window.$message.create("Loading",{type:"loading"});d.bulkBuyMoreProxy=!1,n.value==="BANK"&&(await D(),u.value.extras.method.bank_id&&(d.bulkBuyMoreProxy=!1,x.value=!0,P.value=setInterval(async()=>{const{data:{data:a}}=await me();a.data[0].update_status==="DONE"&&(window.$message.success("Payment success!"),clearInterval(P.value),x.value=!1)},5e3))),n.value==="CRYPTO"&&(await D(),u.value.extras.method.url&&(d.buyProxy=!1,n.value="BANK",window.open(u.value.extras.method.url,"_blank"))),n.value==="CARD"&&(await D(),u.value.extras.method.url&&(d.buyProxy=!1,n.value="BANK",window.open(u.value.extras.method.url,"_blank"))),s.destroy()}catch{v.value=1}},oe=()=>{v.value=1,z()};return Q(y,()=>{z()}),Q(()=>d.bulkBuyMoreProxy,s=>{s&&z()}),(s,a)=>{const _=fe,g=Se,S=Ee,w=Ie,I=Te,T=be,X=ye,ne=ge;return h(),m(Y,null,[o(ke,{"is-show":e(d).bulkBuyMoreProxy,"is-button-back":e(v)===2,"submit-label":e(v)===2?"Extend":"Next",header:"Extend Proxies",icon:"proxy",width:"700px",loading:e(R),onClose:U,onActionSubmit:a[2]||(a[2]=l=>e(v)===1?v.value=2:K),onClickSubmit:a[3]||(a[3]=()=>{e(v)===1?v.value=2:K()}),onBack:oe},{body:i(()=>[e(v)===1?(h(),m("div",Ve,[o(g,null,{default:i(()=>[(h(!0),m(Y,null,J(e(C),(l,G)=>(h(),m("div",{key:G,class:"flex justify-between"},[t("div",Ae,[o(e(pe),{country:se(l)},null,8,["country"]),t("span",Le,p(`${l.extras.host}:${l.extras.port}`),1)]),t("span",null,"$"+p(e(k)[l.id]),1)]))),128)),ze,t("div",De,[$e,o(_,{class:"font-semibold"},{default:i(()=>[r(" $"+p(e(A)),1)]),_:1})])]),_:1}),o(I,null,{default:i(()=>[o(S,null,{default:i(()=>[r("Day")]),_:1}),o(w,{value:e(y),"onUpdate:value":a[0]||(a[0]=l=>W(y)?y.value=l:null),disabled:e(L)||e(R),options:e($)},null,8,["value","disabled","options"])]),_:1})])):(h(),m("div",Ye,[t("div",je,[o(_,{class:"font-semibold"},{default:i(()=>[r(p(e(f)("Page.Billing.Label.PaymentMethod")),1)]),_:1}),t("div",Ue,[(h(!0),m(Y,null,J(e(N),l=>(h(),m("div",{key:l.value,class:we(["w-full cursor-pointer pointer-events",{active:e(n)===l.value,disabled:l.value==="COIN"||l.value==="CARD"}])},[o(T,{onClick:G=>n.value=l.value},{default:i(()=>[o(F,{type:l.icon},null,8,["type"]),t("div",null,p(l.label),1)]),_:2},1032,["onClick"])],2))),128))]),e(n)==="BANK"?(h(),m("div",Ke,[t("div",Xe,[o(_,null,{default:i(()=>[r(p(e(f)("Page.Billing.Label.PaymentDesc")),1)]),_:1})])])):O("",!0),e(n)==="COIN"?(h(),m("div",Ge,[o(X,{type:"primary",class:"pl-0 mt-16px",quaternary:"",onClick:a[1]||(a[1]=l=>V.value=!0)},{default:i(()=>[o(F,{type:"topup",class:"mr-8px"}),r(" Top up ")]),_:1}),t("div",qe,[o(_,null,{default:i(()=>[r("Balance")]),_:1}),o(_,null,{default:i(()=>[r("300 Coin")]),_:1}),r(" Coming soon ")])])):O("",!0),e(n)==="CRYPTO"?(h(),m("div",Fe,[t("div",He,[o(_,null,{default:i(()=>[r(p(),1)]),_:1})])])):O("",!0),e(n)==="CARD"?(h(),m("div",Qe,[t("div",Je,[o(_,null,{default:i(()=>[r(p(),1)]),_:1})])])):O("",!0)])]))]),_:1},8,["is-show","is-button-back","submit-label","loading"]),o(ne,{show:e(x),"onUpdate:show":a[4]||(a[4]=l=>W(x)?x.value=l:null),"mask-closable":!1},{default:i(()=>[o(T,{class:"min-h-380px",style:{width:"700px"},bordered:!1,size:"huge"},{default:i(()=>[t("div",We,[t("div",Ze,[t("img",{src:e(u).extras.method.url},null,8,et)]),t("div",tt,[t("div",st,[t("div",at,[r(" Ngân hàng: "),t("div",ot,p(e(u).extras.method.bank_id),1)]),t("div",nt,[r(" Số tài khoản: "),t("div",lt,p(e(u).extras.method.account_no),1)]),t("div",it,[r(" Chủ tài khoản: "),t("div",rt,p(e(u).extras.method.account_name),1)]),t("div",ut,[r(" Số tiền: "),t("div",ct,p(e(u).extras.method.amount)+" VND ",1)]),t("div",dt,[r(" Nội dung chuyển tiền: "),t("div",_t,p(e(u).extras.method.description),1)]),pt]),t("div",vt,[o(X,{class:"w-1/3",secondary:"",onClick:te},{default:i(()=>[r(" Close ")]),_:1})])])])]),_:1})]),_:1},8,["show"])],64)}}});const Rt=Ne(ht,[["__scopeId","data-v-3d3cc72a"]]);export{Rt as default};
