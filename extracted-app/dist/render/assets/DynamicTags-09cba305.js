import{b9 as x,ba as P,eU as w,fb as N,fH as K,fI as W,d as L,b as $,dV as H,dA as E,j as U,h as J,m as M,aY as Y,am as q,N as G,eI as Q,aL as X,fJ as Z,D as A}from"./main-8b08e1d6.js";import{s as ee}from"./Pagination-ce77c3f3.js";import{_ as te}from"./Input-96fa4693.js";import{d as ne,b as f,z as ae,c as V,h as u,n as se}from"./_plugin-vue_export-helper-b059e461.js";const ie=x({name:"DynamicTags",common:P,peers:{Input:w,Button:N,Tag:K,Space:W},self(){return{inputWidth:"64px"}}}),le=ie,ue=L("dynamic-tags",[L("input",{minWidth:"var(--n-input-width)"})]),oe=Object.assign(Object.assign(Object.assign({},U.props),Z),{size:{type:String,default:"medium"},closable:{type:Boolean,default:!0},defaultValue:{type:Array,default:()=>[]},value:Array,inputStyle:[String,Object],inputProps:Object,max:Number,tagStyle:[String,Object],renderTag:Function,onCreate:{type:Function,default:t=>t},"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onChange:[Function,Array]}),pe=ne({name:"DynamicTags",props:oe,setup(t){const{mergedClsPrefixRef:h,inlineThemeDisabled:o}=$(t),{localeRef:r}=H("DynamicTags"),d=E(t),{mergedDisabledRef:s}=d,c=f(""),m=f(!1),p=f(!0),v=f(null),y=U("DynamicTags","-dynamic-tags",ue,le,t,h),b=f(t.defaultValue),F=ae(t,"value"),i=J(F,b),S=V(()=>r.value.add),z=V(()=>ee(t.size)),C=V(()=>s.value||!!t.max&&i.value.length>=t.max);function T(e){const{onChange:n,"onUpdate:value":g,onUpdateValue:B}=t,{nTriggerFormInput:j,nTriggerFormChange:k}=d;n&&A(n,e),B&&A(B,e),g&&A(g,e),b.value=e,j(),k()}function I(e){const n=i.value.slice(0);n.splice(e,1),T(n)}function O(e){switch(e.key){case"Enter":l()}}function l(e){const n=e??c.value;if(n){const g=i.value.slice(0);g.push(t.onCreate(n)),T(g)}m.value=!1,p.value=!0,c.value=""}function R(){l()}function D(){m.value=!0,se(()=>{var e;(e=v.value)===null||e===void 0||e.focus(),p.value=!1})}const _=V(()=>{const{self:{inputWidth:e}}=y.value;return{"--n-input-width":e}}),a=o?M("dynamic-tags",void 0,_,t):void 0;return{mergedClsPrefix:h,inputInstRef:v,localizedAdd:S,inputSize:z,inputValue:c,showInput:m,inputForceFocused:p,mergedValue:i,mergedDisabled:s,triggerDisabled:C,handleInputKeyUp:O,handleAddClick:D,handleInputBlur:R,handleCloseClick:I,handleInputConfirm:l,mergedTheme:y,cssVars:o?void 0:_,themeClass:a==null?void 0:a.themeClass,onRender:a==null?void 0:a.onRender}},render(){const{mergedTheme:t,cssVars:h,mergedClsPrefix:o,onRender:r,renderTag:d}=this;return r==null||r(),u(X,{class:[`${o}-dynamic-tags`,this.themeClass],size:"small",style:h,theme:t.peers.Space,themeOverrides:t.peerOverrides.Space,itemStyle:"display: flex;"},{default:()=>{const{mergedTheme:s,tagStyle:c,type:m,round:p,size:v,color:y,closable:b,mergedDisabled:F,showInput:i,inputValue:S,inputStyle:z,inputSize:C,inputForceFocused:T,triggerDisabled:I,handleInputKeyUp:O,handleInputBlur:l,handleAddClick:R,handleCloseClick:D,handleInputConfirm:_,$slots:a}=this;return this.mergedValue.map((e,n)=>d?d(e,n):u(Y,{key:n,theme:s.peers.Tag,themeOverrides:s.peerOverrides.Tag,style:c,type:m,round:p,size:v,color:y,closable:b,disabled:F,onClose:()=>{D(n)}},{default:()=>typeof e=="string"?e:e.label})).concat(i?a.input?a.input({submit:_,deactivate:l}):u(te,Object.assign({placeholder:"",size:C,style:z,autosize:!0},this.inputProps,{ref:"inputInstRef",value:S,onUpdateValue:e=>{this.inputValue=e},theme:s.peers.Input,themeOverrides:s.peerOverrides.Input,onKeyup:O,onBlur:l,internalForceFocus:T})):a.trigger?a.trigger({activate:R,disabled:I}):u(q,{dashed:!0,disabled:I,theme:s.peers.Button,themeOverrides:s.peerOverrides.Button,size:C,onClick:R},{icon:()=>u(G,{clsPrefix:o},{default:()=>u(Q,null)})}))}})}});export{pe as _};
