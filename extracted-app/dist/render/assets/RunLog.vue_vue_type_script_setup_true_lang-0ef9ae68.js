import{a2 as v,a8 as k}from"./main-8b08e1d6.js";import{u as R,_ as h}from"./useConsole-dd6c2120.js";import{u as T}from"./useRunScript-b4e924db.js";import{d as y,b as i,c as L,m as x,M as w,o as B,u as n,S as _,U as b,$ as C,X as D,Y as I,D as E,n as M}from"./_plugin-vue_export-helper-b059e461.js";const N={key:0},X=y({__name:"RunLog",setup(P){const{taskRun:t}=T(),o=i(null),{logLoading:p,defaultTaskRunParams:a,scriptLogs:s,getTaskRunLogs:l}=R(),c=L(()=>s.value.join(`
`)),m=()=>{p.value||a.value.offset&&l(t.value.id,a.value.offset)},u=()=>{o.value&&M(()=>{var e;(e=o.value)==null||e.scrollTo({position:"bottom",slient:!0})})},{t:f}=v(),r=i(null);return x(async()=>{s.value=[],r.value=setInterval(async()=>{await l(t.value.id),u()},2e3),w(()=>{u()})}),B(()=>{clearInterval(r.value)}),(e,S)=>{const g=h,d=k;return n(c).length?(_(),D(d,{key:1,class:"p-2"},{default:I(()=>[E(g,{ref_key:"logRef",ref:o,rows:30,log:n(c),trim:"",language:"script-log",class:"select-text",onReachTop:m},null,8,["log"])]),_:1})):(_(),b("span",N,C(n(f)("Page.AutomationRuns.Label.NoLog")),1))}}});export{X as _};
