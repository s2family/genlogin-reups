import{a2 as C,ah as U,a7 as k,am as A,aY as K,aQ as Q,aZ as X,an as Z,bu as G,a8 as H}from"./main-8b08e1d6.js";import{M as L}from"./Modal-0f4a5102.js";import{u as M}from"./useExtension-8cf8cfbf.js";import{a as J,_ as O}from"./Upload-46a3755a.js";import{d as $,b as W,S as g,X as w,Y as n,D as o,u as t,q as ee,V as r,E as u,$ as i,a1 as I,f as te,U as B,F,ad as oe,a2 as D,ae as ne}from"./_plugin-vue_export-helper-b059e461.js";import{_ as se}from"./p-263c92a4.js";import ae from"./ModalConfirm-92ee844f.js";import{_ as le}from"./Input-96fa4693.js";import{_ as ie}from"./Divider-65f3d898.js";import{_ as _e,a as ce}from"./Grid-308f499b.js";import"./lodash-6114c6d4.js";import"./axios-1e30d922.js";import"./xlsx-f5126985.js";import"./Progress-0b0a0198.js";import"./_createCompounder-4af3bdce.js";import"./Suffix-fc59bb7a.js";const de=$({__name:"ExtensionUploadFileModal",setup(P){const{state:e,importExtensionFile:_,getExtensions:x}=M(),{t:s}=C(),c=W([]),y=()=>{e.showUploadFileModal=!1,c.value=[]},v=async()=>{try{const m=c.value[0].file.path;e.loading=!0,await _(m),window.$message.success(s("Page.Extensions.Msg.ExtensionInstalled")),await x()}catch{}finally{e.id=null,e.loading=!1,y()}};return(m,p)=>{const a=k,d=se,f=J,b=O;return g(),w(L,{"is-show":t(e).showUploadFileModal,header:t(s)("Page.Extensions.Button.Upload"),icon:"upload","submit-label":t(s)("Page.Extensions.Button.UploadFile"),loading:t(e).loading,"action-submit":v,onClose:p[1]||(p[1]=E=>t(e).showUploadFileModal=!1)},{body:n(()=>[o(b,{"file-list":t(c),"onUpdate:fileList":p[0]||(p[0]=E=>ee(c)?c.value=E:null),"directory-dnd":"",max:1,accept:".zip,.crx"},{default:n(()=>[o(f,null,{default:n(()=>[r("div",null,[o(U,{type:"upload",size:"50",color:"#5671FF"})]),o(a,{style:{"font-size":"16px"}},{default:n(()=>[u(i(t(s)("Page.Extensions.Label.DragDrop")),1)]),_:1}),o(d,{depth:"3",style:{margin:"8px 0 0 0"}},{default:n(()=>[u(i(t(s)("Page.Extensions.Label.SupportedExt")),1)]),_:1})]),_:1})]),_:1},8,["file-list"])]),_:1},8,["is-show","header","submit-label","loading"])}}});const re=I(de,[["__scopeId","data-v-3c0d153b"]]),pe=$({__name:"ExtensionDeleteConfirmModal",setup(P){const{state:e,getExtensions:_,deleteExtension:x}=M(),{t:s}=C(),c=()=>{e.loading=!1,e.showDeleteModal=!1,e.ext=null},y=async()=>{try{e.loading=!0,await x(e.ext.id),window.$message.success(s("Page.Extensions.Msg.ExtensionDeleted")),await _()}catch{}finally{c()}};return(v,m)=>{const p=k;return g(),w(ae,{type:"delete",icon:"trash",header:t(s)("Page.Extensions.Label.RemoveTitle"),"is-show":t(e).showDeleteModal,"cancel-label":t(s)("Common.Button.Keep"),"submit-label":t(s)("Common.Button.Remove"),"action-submit":y,onClose:c},{body:n(()=>[o(p,null,{default:n(()=>{var a,d;return[u(i(t(s)("Page.Extensions.Label.ConfirmDelete"))+" "+i(`${((d=(a=t(e))==null?void 0:a.ext)==null?void 0:d.name)||""}`)+"?",1)]}),_:1})]),_:1},8,["header","is-show","cancel-label","submit-label"])}}});const ue=I(pe,[["__scopeId","data-v-afd71834"]]),me=$({__name:"ExtensionImportUrlModal",setup(P){const{state:e,importExtensionByUrl:_,getExtensions:x}=M(),{t:s}=C(),c=()=>{e.showImportUrlModal=!1,e.url=null},y=async()=>{try{e.loading=!0,await _(e.url),window.$message.success(s("Page.Extensions.Msg.ExtensionInstalled")),await x()}catch{}finally{e.id=null,e.loading=!1,c()}};return(v,m)=>{const p=le;return g(),w(L,{"is-show":t(e).showImportUrlModal,header:t(s)("Page.Extensions.Button.ImportURL"),icon:"extensions","submit-label":t(s)("Page.Extensions.Button.Download"),loading:t(e).loading,"action-submit":y,onClose:c},{body:n(()=>[o(p,{value:t(e).url,"onUpdate:value":m[0]||(m[0]=a=>t(e).url=a),type:"text",size:"large",placeholder:"URL"},null,8,["value"])]),_:1},8,["is-show","header","submit-label","loading"])}}});const fe=I(me,[["__scopeId","data-v-ca2338c5"]]),ge={class:"flex items-center justify-start mb-12px"},xe={class:"flex items-center gap-8px"},ye={class:"mr-16px flex items-center gap-8px"},ve={style:{color:"#5671ff"},class:"font-semibold"},Ee={class:"flex items-center gap-8px"},he={class:"font-semibold",style:{color:"#fff"}},we={class:"mb-12px"},be={class:"p-16px"},Ue={class:"flex gap-16px justify-between items-center"},Ce={class:"flex flex-col"},Me={class:"flex gap-2"},$e=$({__name:"Extensions",setup(P){const{t:e}=C(),{state:_,sortedExtensions:x,getExtensions:s,toggleExtension:c}=M(),y=a=>{_.showDeleteModal=!0,_.ext=a},v=async(a,d)=>{await c(a,d),await s()},m=async a=>{await navigator.clipboard.writeText(a.extId),window.$message.success(e("Page.Extensions.Msg.IdCopied"))},p=(a,d)=>{const{id:f,url:b}=a;_.id=f,d==="file"?_.showUploadFileModal=!0:(_.url=b,_.showImportUrlModal=!0)};return te(async()=>{await s()}),(a,d)=>{const f=A,b=K,E=k,z=Q,R=X,N=Z,T=ie,V=G,j=H,S=_e,q=ce;return g(),B(F,null,[r("div",ge,[r("div",xe,[o(f,{size:"large",type:"primary",ghost:"",onClick:d[0]||(d[0]=l=>t(_).showUploadFileModal=!0)},{default:n(()=>[r("div",ye,[o(U,{color:"#5671FF",size:"18",type:"upload"}),r("div",ve,i(t(e)("Page.Extensions.Button.Upload")),1)])]),_:1}),o(f,{size:"large",type:"primary",onClick:d[1]||(d[1]=l=>t(_).showImportUrlModal=!0)},{default:n(()=>[r("div",Ee,[o(U,{color:"#fff",size:"18",type:"link"}),r("div",he,i(t(e)("Page.Extensions.Button.ImportURL")),1)])]),_:1})])]),r("span",we,i(t(e)("Page.Extensions.Label.ExtensionNote")),1),o(q,{cols:"4","x-gap":"12","y-gap":"24"},{default:n(()=>[(g(!0),B(F,null,oe(t(x),(l,Y)=>(g(),w(S,{key:Y},{default:n(()=>[o(j,{class:"extension-card"},{default:n(()=>[r("div",be,[r("div",Ue,[r("div",Ce,[o(z,{style:{"max-width":"100%"}},{default:n(()=>[l.version?(g(),w(b,{key:0},{default:n(()=>[u(i(l.version),1)]),_:2},1024)):D("",!0),o(E,{class:"m-0 font-semibold overflow-ellipsis"},{default:n(()=>[l.pinned?(g(),w(U,{key:0,type:"star",color:"yellow"})):D("",!0),u(" "+i(l.name),1)]),_:2},1024)]),_:2},1024),r("div",Me,[o(R,null,{trigger:n(()=>[o(E,{type:"info",class:"cursor-pointer font-semibold"},{default:n(()=>[u(i(t(e)("Common.Button.Update")),1)]),_:1})]),action:n(()=>[o(f,{onClick:h=>p(l,"file")},{default:n(()=>[u(i(t(e)("Page.Extensions.Button.Upload")),1)]),_:2},1032,["onClick"]),o(f,{type:"primary",onClick:h=>p(l,"url")},{default:n(()=>[u(i(t(e)("Page.Extensions.Button.ImportURL")),1)]),_:2},1032,["onClick"])]),default:n(()=>[u(" "+i(t(e)("Page.Extensions.Label.SelectUpdateMethod")),1)]),_:2},1024),o(E,{type:"success",class:"cursor-pointer font-semibold",onClick:h=>m(l)},{default:n(()=>[u(i(t(e)("Page.Extensions.Button.CopyID")),1)]),_:2},1032,["onClick"])])]),o(N,{size:47,src:`data:image/png;base64,${l.icon}`},null,8,["src"])])]),o(T),r("div",{class:ne(["actions item flex items-center",l.deletable?"justify-between":"justify-end"])},[o(E,{class:"cursor-pointer remove-extension flex items-center gap-8px mr-2",quaternary:"",depth:"3",onClick:h=>y(l)},{default:n(()=>[o(U,{type:"deleteCircle"}),u(" "+i(t(e)("Page.Extensions.Button.Remove")),1)]),_:2},1032,["onClick"]),o(V,{value:l.disabled,"onUpdate:value":h=>l.disabled=h,"checked-value":!1,"unchecked-value":!0,"on-update:value":h=>v(l.id,h)},null,8,["value","onUpdate:value","on-update:value"])],2)]),_:2},1024)]),_:2},1024))),128))]),_:1}),o(ue),o(fe),o(re)],64)}}});const Ae=I($e,[["__scopeId","data-v-ae72770c"]]);export{Ae as default};
