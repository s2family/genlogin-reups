import{a2 as y,bW as k,ac as h,I as w,H as x,db as d,bm as P,ag as L,fV as B,aL as C}from"./main-8b08e1d6.js";import{a as I}from"./axios-1e30d922.js";import{d as $,b as V,m as D,S as E,U as O,D as n,Y as i,u as e,h as u}from"./_plugin-vue_export-helper-b059e461.js";import{_ as R}from"./Select-f7c79767.js";import{_ as U}from"./FormItem-52ed65a1.js";import"./lodash-6114c6d4.js";import"./xlsx-f5126985.js";import"./Suffix-fc59bb7a.js";const q=$({__name:"Network",setup(A){const{t}=y(),{allowedProxyServices:p,proxyServiceCheckerOptions:M}=k(),{settings:r}=h(),{accessToken:m}=w(x()),c=V([{label:t("Page.Settings.Label.International"),value:null,latency:0},{label:"Vietnam",value:"vn",latency:0}]),_=a=>u("div",{class:"flex gap-4"},[a.label,u("span","-"),u("span",{class:"text-green-500"},d(a.latency))]),v=async()=>{window.$message.success("Backend server updated!"),await L(r.value.backendServer)},b=async()=>{await Promise.all(c.value.map(async a=>{const s=Date.now(),o=B();await I.get(`${o}/v1/users/me`,{headers:{Authorization:`Bearer ${m.value}`}});const l=Date.now();a.latency=l-s}))},f=a=>{a.length&&(p.value=a)};return D(async()=>{await b()}),(a,s)=>{const o=R,l=U,g=C;return E(),O("div",null,[n(g,{class:"mb-2",vertical:""},{default:i(()=>[n(l,{label:e(t)("Page.Settings.Label.Server"),"show-feedback":!1},{default:i(()=>[n(o,{value:e(r).backendServer,"onUpdate:value":[s[0]||(s[0]=S=>e(r).backendServer=S),v],options:e(c),"render-label":_,placeholder:`${e(t)("Page.Settings.Label.International")} - ${e(d)(e(c)[0].latency)}`},null,8,["value","options","placeholder"])]),_:1},8,["label"]),n(l,{label:e(t)("Page.Settings.Label.ProxyServiceChecker"),"show-feedback":!1},{default:i(()=>[n(o,{multiple:"",value:e(p),options:e(P),"value-field":"name","label-field":"label","on-update:value":f},null,8,["value","options"])]),_:1},8,["label"])]),_:1})])}}});export{q as default};
