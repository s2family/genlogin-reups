import{d as f,z as Y,f as y,g as P,e as O,b as Z,c1 as se,fF as ue,c4 as ee,b9 as de,ba as ce,eU as pe,fb as me,fG as fe,c as he,eY as ge,h as ye,j as te,m as be,dV as ve,am as A,c7 as J,r as Q,eF as Pe,N as D,eI as X,D as L}from"./main-8b08e1d6.js";import{_ as G}from"./Input-96fa4693.js";import{d as U,h as r,p as ne,i as x,b as Ve,z,c as N,aR as E,t as M}from"./_plugin-vue_export-helper-b059e461.js";import{R as Ie}from"./Remove-be3cc84a.js";import{A as Re}from"./DataTable-e5054828.js";const $e=U({name:"ArrowUp",render(){return r("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},r("g",{fill:"none"},r("path",{d:"M3.13 9.163a.5.5 0 1 0 .74.674L9.5 3.67V17.5a.5.5 0 0 0 1 0V3.672l5.63 6.165a.5.5 0 0 0 .738-.674l-6.315-6.916a.746.746 0 0 0-.632-.24a.746.746 0 0 0-.476.24L3.131 9.163z",fill:"currentColor"})))}}),o="0!important",re="-1px!important";function w(e){return P(e+"-type",[y("& +",[f("button",{},[P(e+"-type",[O("border",{borderLeftWidth:o}),O("state-border",{left:re})])])])])}function k(e){return P(e+"-type",[y("& +",[f("button",[P(e+"-type",[O("border",{borderTopWidth:o}),O("state-border",{top:re})])])])])}const we=f("button-group",`
 flex-wrap: nowrap;
 display: inline-flex;
 position: relative;
`,[Y("vertical",{flexDirection:"row"},[Y("rtl",[f("button",[y("&:first-child:not(:last-child)",`
 margin-right: ${o};
 border-top-right-radius: ${o};
 border-bottom-right-radius: ${o};
 `),y("&:last-child:not(:first-child)",`
 margin-left: ${o};
 border-top-left-radius: ${o};
 border-bottom-left-radius: ${o};
 `),y("&:not(:first-child):not(:last-child)",`
 margin-left: ${o};
 margin-right: ${o};
 border-radius: ${o};
 `),w("default"),P("ghost",[w("primary"),w("info"),w("success"),w("warning"),w("error")])])])]),P("vertical",{flexDirection:"column"},[f("button",[y("&:first-child:not(:last-child)",`
 margin-bottom: ${o};
 margin-left: ${o};
 margin-right: ${o};
 border-bottom-left-radius: ${o};
 border-bottom-right-radius: ${o};
 `),y("&:last-child:not(:first-child)",`
 margin-top: ${o};
 margin-left: ${o};
 margin-right: ${o};
 border-top-left-radius: ${o};
 border-top-right-radius: ${o};
 `),y("&:not(:first-child):not(:last-child)",`
 margin: ${o};
 border-radius: ${o};
 `),k("default"),P("ghost",[k("primary"),k("info"),k("success"),k("warning"),k("error")])])])]),ke={size:{type:String,default:void 0},vertical:Boolean},Be=U({name:"ButtonGroup",props:ke,setup(e){const{mergedClsPrefixRef:c,mergedRtlRef:i}=Z(e);return se("-button-group",we,c),ne(ue,e),{rtlEnabled:ee("ButtonGroup",i,c),mergedClsPrefix:c}},render(){const{mergedClsPrefix:e}=this;return r("div",{class:[`${e}-button-group`,this.rtlEnabled&&`${e}-button-group--rtl`,this.vertical&&`${e}-button-group--vertical`],role:"group"},this.$slots)}}),Ce=()=>fe,Se=de({name:"DynamicInput",common:ce,peers:{Input:pe,Button:me},self:Ce}),Ae=Se,q=he("n-dynamic-input"),De=U({name:"DynamicInputInputPreset",props:{clsPrefix:{type:String,required:!0},value:{type:String,default:""},disabled:Boolean,parentPath:String,path:String,onUpdateValue:{type:Function,required:!0}},setup(){const{mergedThemeRef:e,placeholderRef:c}=x(q);return{mergedTheme:e,placeholder:c}},render(){const{mergedTheme:e,placeholder:c,value:i,clsPrefix:s,onUpdateValue:m,disabled:d}=this;return r("div",{class:`${s}-dynamic-input-preset-input`},r(G,{theme:e.peers.Input,"theme-overrides":e.peerOverrides.Input,value:i,placeholder:c,onUpdateValue:m,disabled:d}))}}),Oe=U({name:"DynamicInputPairPreset",props:{clsPrefix:{type:String,required:!0},value:{type:Object,default:()=>({key:"",value:""})},disabled:Boolean,parentPath:String,path:String,onUpdateValue:{type:Function,required:!0}},setup(e){const{mergedThemeRef:c,keyPlaceholderRef:i,valuePlaceholderRef:s}=x(q);return{mergedTheme:c,keyPlaceholder:i,valuePlaceholder:s,handleKeyInput(m){e.onUpdateValue({key:m,value:e.value.value})},handleValueInput(m){e.onUpdateValue({key:e.value.key,value:m})}}},render(){const{mergedTheme:e,keyPlaceholder:c,valuePlaceholder:i,value:s,clsPrefix:m,disabled:d}=this;return r("div",{class:`${m}-dynamic-input-preset-pair`},r(G,{theme:e.peers.Input,"theme-overrides":e.peerOverrides.Input,value:s.key,class:`${m}-dynamic-input-pair-input`,placeholder:c,onUpdateValue:this.handleKeyInput,disabled:d}),r(G,{theme:e.peers.Input,"theme-overrides":e.peerOverrides.Input,value:s.value,class:`${m}-dynamic-input-pair-input`,placeholder:i,onUpdateValue:this.handleValueInput,disabled:d}))}}),Ue=f("dynamic-input",{width:"100%"},[f("dynamic-input-item",`
 margin-bottom: 10px;
 display: flex;
 flex-wrap: nowrap;
 `,[f("dynamic-input-preset-input",{flex:1,alignItems:"center"}),f("dynamic-input-preset-pair",`
 flex: 1;
 display: flex;
 align-items: center;
 `,[f("dynamic-input-pair-input",[y("&:first-child",{"margin-right":"12px"})])]),O("action",`
 align-self: flex-start;
 display: flex;
 justify-content: flex-end;
 flex-shrink: 0;
 flex-grow: 0;
 margin: var(--action-margin);
 `,[P("icon",{cursor:"pointer"})]),y("&:last-child",{marginBottom:0})]),f("form-item",`
 padding-top: 0 !important;
 margin-right: 0 !important;
 `,[f("form-item-blank",{paddingTop:"0 !important"})])]),K=new WeakMap,je=Object.assign(Object.assign({},te.props),{max:Number,min:{type:Number,default:0},value:Array,defaultValue:{type:Array,default:()=>[]},preset:{type:String,default:"input"},keyField:String,itemStyle:[String,Object],keyPlaceholder:{type:String,default:""},valuePlaceholder:{type:String,default:""},placeholder:{type:String,default:""},disabled:Boolean,showSortButton:Boolean,createButtonProps:Object,onCreate:Function,onRemove:Function,"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onClear:Function,onInput:[Function,Array]}),Ke=U({name:"DynamicInput",props:je,setup(e,{slots:c}){const{mergedComponentPropsRef:i,mergedClsPrefixRef:s,mergedRtlRef:m,inlineThemeDisabled:d}=Z(),I=x(ge,null),B=Ve(e.defaultValue),j=z(e,"value"),h=ye(j,B),p=te("DynamicInput","-dynamic-input",Ue,Ae,e,s),T=N(()=>{const{value:t}=h;if(Array.isArray(t)){const{max:n}=e;return n!==void 0&&t.length>=n}return!1}),_=N(()=>{const{value:t}=h;return Array.isArray(t)?t.length<=e.min:!0}),F=N(()=>{var t,n;return(n=(t=i==null?void 0:i.value)===null||t===void 0?void 0:t.DynamicInput)===null||n===void 0?void 0:n.buttonSize});function g(t){const{onInput:n,"onUpdate:value":l,onUpdateValue:a}=e;n&&L(n,t),l&&L(l,t),a&&L(a,t),B.value=t}function C(t,n){if(t==null||typeof t!="object")return n;const l=E(t)?M(t):t;let a=K.get(l);return a===void 0&&K.set(l,a=Pe()),a}function S(t,n){const{value:l}=h,a=Array.from(l??[]),v=a[t];if(a[t]=n,v&&n&&typeof v=="object"&&typeof n=="object"){const le=E(v)?M(v):v,oe=E(n)?M(n):n,H=K.get(le);H!==void 0&&K.set(oe,H)}g(a)}function b(){V(-1)}function V(t){const{value:n}=h,{onCreate:l}=e,a=Array.from(n??[]);if(l)a.splice(t+1,0,l(t+1)),g(a);else if(c.default)a.splice(t+1,0,null),g(a);else switch(e.preset){case"input":a.splice(t+1,0,""),g(a);break;case"pair":a.splice(t+1,0,{key:"",value:""}),g(a);break}}function u(t){const{value:n}=h;if(!Array.isArray(n))return;const{min:l}=e;if(n.length<=l)return;const{onRemove:a}=e;a&&a(t);const v=Array.from(n);v.splice(t,1),g(v)}function R(t,n,l){if(n<0||l<0||n>=t.length||l>=t.length||n===l)return;const a=t[n];t[n]=t[l],t[l]=a}function ae(t,n){const{value:l}=h;if(!Array.isArray(l))return;const a=Array.from(l);t==="up"&&R(a,n,n-1),t==="down"&&R(a,n,n+1),g(a)}ne(q,{mergedThemeRef:p,keyPlaceholderRef:z(e,"keyPlaceholder"),valuePlaceholderRef:z(e,"valuePlaceholder"),placeholderRef:z(e,"placeholder")});const ie=ee("DynamicInput",m,s),W=N(()=>{const{self:{actionMargin:t,actionMarginRtl:n}}=p.value;return{"--action-margin":t,"--action-margin-rtl":n}}),$=d?be("dynamic-input",void 0,W,e):void 0;return{locale:ve("DynamicInput").localeRef,rtlEnabled:ie,buttonSize:F,mergedClsPrefix:s,NFormItem:I,uncontrolledValue:B,mergedValue:h,insertionDisabled:T,removeDisabled:_,handleCreateClick:b,ensureKey:C,handleValueChange:S,remove:u,move:ae,createItem:V,mergedTheme:p,cssVars:d?void 0:W,themeClass:$==null?void 0:$.themeClass,onRender:$==null?void 0:$.onRender}},render(){const{$slots:e,buttonSize:c,mergedClsPrefix:i,mergedValue:s,locale:m,mergedTheme:d,keyField:I,itemStyle:B,preset:j,showSortButton:h,NFormItem:p,ensureKey:T,handleValueChange:_,remove:F,createItem:g,move:C,onRender:S,disabled:b}=this;return S==null||S(),r("div",{class:[`${i}-dynamic-input`,this.rtlEnabled&&`${i}-dynamic-input--rtl`,this.themeClass],style:this.cssVars},!Array.isArray(s)||s.length===0?r(A,Object.assign({block:!0,ghost:!0,dashed:!0,size:c},this.createButtonProps,{disabled:this.insertionDisabled||b,theme:d.peers.Button,themeOverrides:d.peerOverrides.Button,onClick:this.handleCreateClick}),{default:()=>J(e["create-button-default"],()=>[m.create]),icon:()=>J(e["create-button-icon"],()=>[r(D,{clsPrefix:i},{default:()=>r(X,null)})])}):s.map((V,u)=>r("div",{key:I?V[I]:T(V,u),"data-key":I?V[I]:T(V,u),class:`${i}-dynamic-input-item`,style:B},Q(e.default,{value:s[u],index:u},()=>[j==="input"?r(De,{disabled:b,clsPrefix:i,value:s[u],parentPath:p?p.path.value:void 0,path:p!=null&&p.path.value?`${p.path.value}[${u}]`:void 0,onUpdateValue:R=>{_(u,R)}}):j==="pair"?r(Oe,{disabled:b,clsPrefix:i,value:s[u],parentPath:p?p.path.value:void 0,path:p!=null&&p.path.value?`${p.path.value}[${u}]`:void 0,onUpdateValue:R=>{_(u,R)}}):null]),Q(e.action,{value:s[u],index:u,create:g,remove:F,move:C},()=>[r("div",{class:`${i}-dynamic-input-item__action`},r(Be,{size:c},{default:()=>[r(A,{disabled:this.removeDisabled||b,theme:d.peers.Button,themeOverrides:d.peerOverrides.Button,circle:!0,onClick:()=>{F(u)}},{icon:()=>r(D,{clsPrefix:i},{default:()=>r(Ie,null)})}),r(A,{disabled:this.insertionDisabled||b,circle:!0,theme:d.peers.Button,themeOverrides:d.peerOverrides.Button,onClick:()=>{g(u)}},{icon:()=>r(D,{clsPrefix:i},{default:()=>r(X,null)})}),h?r(A,{disabled:u===0||b,circle:!0,theme:d.peers.Button,themeOverrides:d.peerOverrides.Button,onClick:()=>{C("up",u)}},{icon:()=>r(D,{clsPrefix:i},{default:()=>r($e,null)})}):null,h?r(A,{disabled:u===s.length-1||b,circle:!0,theme:d.peers.Button,themeOverrides:d.peerOverrides.Button,onClick:()=>{C("down",u)}},{icon:()=>r(D,{clsPrefix:i},{default:()=>r(Re,null)})}):null]}))]))))}});export{Ke as _};
