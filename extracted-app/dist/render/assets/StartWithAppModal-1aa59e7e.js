import{d as E,b as P,r as D,w as V,S as y,X as S,Y as t,D as o,u as e,E as d,$ as r,q as O,ag as F,V as _,a2 as H,a1 as K}from"./_plugin-vue_export-helper-b059e461.js";import{a2 as Y,I as q,H as G,a3 as C,g2 as x,ah as X,M as j,g3 as J,dN as Q,a_ as Z,am as ee,aL as ae,x as te,a9 as oe}from"./main-8b08e1d6.js";import{a as se}from"./useMyApps-6a511b1e.js";import{_ as le}from"./Select-f7c79767.js";import{_ as ne}from"./FormItem-52ed65a1.js";import{_ as pe}from"./InputNumber-c85d5887.js";import{_ as ie}from"./Input-96fa4693.js";import{_ as re}from"./Checkbox-ce86da58.js";import{_ as ue}from"./Form-e484375f.js";import"./lodash-6114c6d4.js";import"./axios-1e30d922.js";import"./xlsx-f5126985.js";import"./useScriptEditor-4173e447.js";import"./a-72358bba.js";import"./Suffix-fc59bb7a.js";import"./Remove-be3cc84a.js";const de={class:"flex gap-16px w-4/5"},ce={class:"w-full flex items-center gap-8px"},_e={class:"mt-2"},me=E({__name:"StartWithAppModal",props:{show:{type:Boolean,default:!1},profiles:{type:Array,default:()=>[]}},emits:["update:show","success"],setup(b,{emit:k}){const v=b,{t:n}=Y(),{user:L}=q(G()),c=P(null),s=P(C(x)),{defaultParams:w,appOptions:R,fetchApps:g}=se(),p=D({loading:!1,show:!1}),A=()=>{s.value=C(x),c.value=null,k("update:show",!1)},z=async()=>{const u=v.profiles.filter(i=>i.browser===j.CHROME).map(i=>(delete i.browser,i)),{data:{data:a}}=await J(c.value,s.value,u);await Q({userId:L.value.id,taskId:a.id,appId:a.appId,status:Z.PENDING}),k("update:show",!1),window.$message.success(n("Page.AutomationTasks.Msg.TaskRunCreated"))},B=u=>{w.value.name=u,p.show=!0},I=async()=>{w.value.name="",p.show=!0,await g()};return V(()=>v.show,async u=>{u&&await g()}),(u,a)=>{const i=ee,h=ae,M=le,m=ne,U=te,T=pe,$=ie,f=re,N=ue,W=oe;return y(),S(W,{show:b.show,title:e(n)("Page.Profiles.Actions.StartWithApp"),style:{width:"50%"},"transform-origin":"center","mask-closable":!1,preset:"dialog",onClose:A},{action:t(()=>[o(h,null,{default:t(()=>[o(i,{size:"small",disabled:e(p).loading,onClick:A},{default:t(()=>[d(r(e(n)("Common.Button.Cancel")),1)]),_:1},8,["disabled"]),o(i,{size:"small",type:"primary",disabled:e(p).loading,loading:e(p).loading,onClick:z},{default:t(()=>[d(r(e(n)("Common.Button.Start")),1)]),_:1},8,["disabled","loading"])]),_:1})]),default:t(()=>[o(h,{vertical:""},{default:t(()=>[o(m,{class:"w-full",label:e(n)("Page.AutomationApps.Label.App")},{default:t(()=>[o(M,{value:e(c),"onUpdate:value":a[0]||(a[0]=l=>O(c)?c.value=l:null),options:e(R),placeholder:e(n)("Page.Profiles.Label.SelectApp"),filterable:"",clearable:"","on-search":B,"on-clear":I,onKeyup:F(e(g),["enter"]),onFocus:a[1]||(a[1]=l=>e(p).show=!0),onBlur:a[2]||(a[2]=l=>e(p).show=!1)},null,8,["value","options","placeholder","onKeyup"])]),_:1},8,["label"]),o(N,null,{default:t(()=>[_("div",de,[o(m,{class:"w-full"},{label:t(()=>[_("div",ce,[_("div",null,r(e(n)("Page.AutomationTasks.Label.ProfileThreads")),1),o(U,{trigger:"hover"},{trigger:t(()=>[o(X,{color:"#5671ff",class:"mr-8px cursor-pointer",type:"helpCircle",size:"large"})]),default:t(()=>[_("div",null,r(e(n)("Page.AutomationTasks.Label.ProfileThreadsDesc")),1)]),_:1})])]),default:t(()=>[o(T,{value:e(s).profileThreads,"onUpdate:value":a[3]||(a[3]=l=>e(s).profileThreads=l),class:"w-full",size:"large",placeholder:e(n)("Page.AutomationTasks.Label.ProfileThreads")},null,8,["value","placeholder"])]),_:1}),o(m,{class:"w-full",label:e(n)("Page.AutomationTasks.Label.Screen")},{default:t(()=>[o($,{value:e(s).screenSize,"onUpdate:value":a[4]||(a[4]=l=>e(s).screenSize=l),placeholder:"Eg: 1600,900",clearable:""},null,8,["value"])]),_:1},8,["label"])]),o(h,null,{default:t(()=>[o(f,{checked:e(s).optimizeScreen,"onUpdate:checked":a[5]||(a[5]=l=>e(s).optimizeScreen=l)},{default:t(()=>[d(r(e(n)("Page.AutomationTasks.Label.OptimizeScreen")),1)]),_:1},8,["checked"]),o(f,{checked:e(s).headless,"onUpdate:checked":a[6]||(a[6]=l=>e(s).headless=l)},{default:t(()=>[d(r(e(n)("Page.AutomationTasks.Label.Headless")),1)]),_:1},8,["checked"]),o(f,{checked:e(s).logging,"onUpdate:checked":a[7]||(a[7]=l=>e(s).logging=l)},{default:t(()=>[d(r(e(n)("Page.AutomationTasks.Label.Logging")),1)]),_:1},8,["checked"])]),_:1}),_("div",_e,[o(f,{checked:e(s).repeat,"onUpdate:checked":a[8]||(a[8]=l=>e(s).repeat=l)},{default:t(()=>[d(" Repeat ")]),_:1},8,["checked"]),e(s).repeat?(y(),S(m,{key:0,label:"Repeat times"},{default:t(()=>[o(T,{value:e(s).repeatTimes,"onUpdate:value":a[9]||(a[9]=l=>e(s).repeatTimes=l),min:1},null,8,["value"])]),_:1})):H("",!0)])]),_:1})]),_:1})]),_:1},8,["show","title"])}}});const ze=K(me,[["__scopeId","data-v-203abe6b"]]);export{ze as default};
