import{a2 as P,b4 as v,a3 as y,g6 as C}from"./main-8b08e1d6.js";import{M as x}from"./Modal-0f4a5102.js";import{d as $,r as D,b as _,w as B,S as M,X as k,Y as g,V as w,D as b,u as s,q as A,$ as L}from"./_plugin-vue_export-helper-b059e461.js";import{_ as N}from"./InputNumber-c85d5887.js";import{_ as V}from"./FormItem-52ed65a1.js";import"./lodash-6114c6d4.js";import"./axios-1e30d922.js";import"./xlsx-f5126985.js";import"./Divider-65f3d898.js";import"./Input-96fa4693.js";import"./Suffix-fc59bb7a.js";import"./Remove-be3cc84a.js";const O={class:"d-flex flex-row mt-3 mb-2 align-items-center"},S={class:"text-gray-400"},n=20,J=$({__name:"CloneProfileModal",props:{show:{type:Boolean,default:!1},ids:{type:Array,default:()=>[]}},emits:["update:show","success"],setup(m,{emit:u}){const f=m,{t:l}=P(),i=D({submitting:!1}),e=_(1),r=_(null);B(()=>f.show,async t=>{if(t){const{data:{data:o}}=await v(f.ids[0]);r.value=o}});const d=()=>{u("update:show",!1),e.value=1,r.value=null},h=async()=>{if(e.value>n){window.$message.warning(`Only ${n} can clone at once`);return}try{i.submitting=!0;const{profile_data:t,filename:o}=r.value;await Promise.all(Array.from({length:e.value},(p,c)=>{const a=y(t);return a.name=`${a.name} (${c})`,a.cookies="",C(a,!!o)})),window.$message.success("Profile cloned!"),d(),u("success")}catch{window.$message.error("Profile clone failed!")}finally{i.submitting=!1}};return(t,o)=>{const p=N,c=V;return M(),k(x,{"is-show":m.show,header:s(l)("Page.Profiles.Label.CloneProfile"),icon:"changeOwner","submit-label":s(l)("Page.Profiles.Actions.Clone"),"action-submit":h,loading:s(i).submitting,onClose:d},{body:g(()=>[w("div",O,[b(c,{label:s(l)("Page.Profiles.Label.MaxCloneAmount",{max:n}),"show-feedback":!1},{default:g(()=>[b(p,{value:s(e),"onUpdate:value":o[0]||(o[0]=a=>A(e)?e.value=a:null),placeholder:"",max:n},null,8,["value"])]),_:1},8,["label"]),w("small",S,L(s(l)("Page.Profiles.Label.CloneNote")),1)])]),_:1},8,["is-show","header","submit-label","loading"])}}});export{J as default};
