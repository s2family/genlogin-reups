import{ah as I,aY as R,gj as B,am as O,aL as j}from"./main-8b08e1d6.js";import{b as F,a as G}from"./useScriptEditor-4173e447.js";import{_ as f}from"./ModalNode-47dd364b.js";import{d as Y,i as q,b as A,m as L,S as r,X as m,Y as a,D as n,u as e,E as u,a2 as g,V as v,$ as b,h as P}from"./_plugin-vue_export-helper-b059e461.js";import{_ as X}from"./FormItem-52ed65a1.js";import{_ as z}from"./a-72358bba.js";import{_ as H}from"./Input-96fa4693.js";import{_ as J}from"./Select-f7c79767.js";import"./lodash-6114c6d4.js";import"./axios-1e30d922.js";import"./xlsx-f5126985.js";import"./ScriptEditor-c5673dff.js";import"./InputSearch.vue_vue_type_script_setup_true_lang-d786940a.js";import"./useMyApps-6a511b1e.js";import"./Divider-65f3d898.js";import"./Modal-0f4a5102.js";import"./DynamicInput-debc4a5e.js";import"./Remove-be3cc84a.js";import"./DataTable-e5054828.js";import"./Checkbox-ce86da58.js";import"./RadioGroup-69a7fbba.js";import"./Radio-c980589e.js";import"./Suffix-fc59bb7a.js";import"./Pagination-ce77c3f3.js";import"./_baseUniq-35fed69a.js";import"./toInteger-0dcb6e10.js";import"./SelectProfiles.vue_vue_type_script_setup_true_lang-3d20c4d9.js";import"./FormMakingResult-fec35bca.js";import"./useSavedTasks-dbe97dc3.js";import"./useRunScript-b4e924db.js";import"./useConsole-dd6c2120.js";import"./Upload-46a3755a.js";import"./Progress-0b0a0198.js";import"./_createCompounder-4af3bdce.js";import"./Alert-2eccd136.js";import"./InputNumber-c85d5887.js";import"./Grid-308f499b.js";import"./DatePicker-91499e1f.js";import"./ModalConfirm-92ee844f.js";import"./useSelectProfiles-b9438807.js";import"./firefox-icon-2ab5a045.js";import"./CollapseItem-114ac5a0.js";import"./Scrollbar-e90e60b7.js";import"./Form-e484375f.js";import"./FormItemGridItem-951b0746.js";import"./vuedraggable.umd-e6c5d70a.js";import"./InputSearch-1469c448.js";import"./InputGroup-20db4544.js";const K=v("span",null," Expression ",-1),Q={class:"random-output"},Ho=Y({__name:"RegEx",setup(W){const{scriptId:x}=F(),{editor:h,variables:V,modalNode:o}=q(x),{newVariable:d,createNewVariable:w,onSearchVariable:k,prepareAutomation:y,variableOptions:C}=G(h.value,V.value),E=()=>{const s=w();o.options.outputVariable=s},M=()=>{window.open("https://regexr.com/")},N=[{label:"Global (g)",value:"g"},{label:"Case insensitive (i)",value:"i"},{label:"Multiline (m)",value:"m"}],$=({option:s,handleClose:t})=>P(R,{closable:!0,onMousedown:i=>{i.preventDefault()},onClose:i=>{i.stopPropagation(),t()}},{default:()=>s.value}),l=A(""),D=async()=>{try{const s=await y();s.testId=o.node.id,l.value=await(await B(s)).data}catch(s){l.value=s.error.message}};return L(()=>{o.options.value=o.options.value||"",o.options.expression=o.options.expression||"",o.options.indexMatch=o.options.indexMatch||"",o.options.flags=o.options.flags||[]}),(s,t)=>{const i=X,S=z,T=H,c=J,_=O,U=j;return r(),m(U,{vertical:""},{default:a(()=>[n(i,{"show-feedback":!1,label:"Input value"},{default:a(()=>[n(f,{modelValue:e(o).options.value,"onUpdate:modelValue":t[0]||(t[0]=p=>e(o).options.value=p),placeholder:"Enter value"},null,8,["modelValue"])]),_:1}),n(i,{"show-feedback":!1},{label:a(()=>[K,n(S,{onClick:M},{default:a(()=>[u(" Guide ")]),_:1})]),default:a(()=>[n(T,{value:e(o).options.expression,"onUpdate:value":t[1]||(t[1]=p=>e(o).options.expression=p),placeholder:"Enter expression"},null,8,["value"])]),_:1}),n(i,{"show-feedback":!1,label:"Flags"},{default:a(()=>[n(c,{value:e(o).options.flags,"onUpdate:value":t[2]||(t[2]=p=>e(o).options.flags=p),placeholder:"Flags",options:N,multiple:"","render-tag":$},null,8,["value"])]),_:1}),e(o).options.flags&&e(o).options.flags.includes("g")?(r(),m(i,{key:0,"show-feedback":!1,label:"Matched index"},{default:a(()=>[n(f,{modelValue:e(o).options.indexMatch,"onUpdate:modelValue":t[3]||(t[3]=p=>e(o).options.indexMatch=p),placeholder:"Default first matched"},null,8,["modelValue"])]),_:1})):g("",!0),n(_,{type:"primary",onClick:D},{default:a(()=>[u(" Test ")]),_:1}),v("pre",Q,b(e(l)),1),n(i,{"show-feedback":!1,label:"Output variable"},{default:a(()=>[n(c,{value:e(o).options.outputVariable,"onUpdate:value":t[4]||(t[4]=p=>e(o).options.outputVariable=p),options:e(C),clearable:"",filterable:"","on-search":e(k)},{empty:a(()=>[e(d).length?(r(),m(_,{key:0,dashed:"",onClick:E},{icon:a(()=>[n(I,{type:"add"})]),default:a(()=>[u(" Create "+b(e(d)),1)]),_:1})):g("",!0)]),_:1},8,["value","options","on-search"])]),_:1})]),_:1})}}});export{Ho as default};
