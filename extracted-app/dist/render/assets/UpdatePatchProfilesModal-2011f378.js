import{a2 as H,K as X,ee as L,M as v,g0 as f,ah as E,Q as Y,R as j,O as K,P as Q,S as q,U as R,T as J,W as Z,g1 as ee,X as ae,a3 as te,f_ as le,f$ as oe,am as ne,aL as se,a0 as re,a1 as ie,a7 as de,a9 as pe}from"./main-8b08e1d6.js";import{c as ue}from"./firefox-icon-2ab5a045.js";import{r as ce}from"./index-35523669.js";import{d as fe,r as _e,S as k,X as y,Y as l,D as t,u as a,E as m,$ as S,V as b,a2 as M,U as me,F as be,ad as ge,ab as we,ac as ve,a1 as he}from"./_plugin-vue_export-helper-b059e461.js";import{_ as Pe}from"./Select-f7c79767.js";import{_ as Oe}from"./FormItem-52ed65a1.js";import{_ as ke,a as Se}from"./Grid-308f499b.js";import{_ as xe}from"./Input-96fa4693.js";import{_ as Ce}from"./Checkbox-ce86da58.js";import{_ as ye}from"./Divider-65f3d898.js";import{_ as Ue}from"./Scrollbar-e90e60b7.js";import"./lodash-6114c6d4.js";import"./axios-1e30d922.js";import"./xlsx-f5126985.js";import"./Suffix-fc59bb7a.js";const N=g=>(we("data-v-499e3b6e"),g=g(),ve(),g),Ee={class:"flex items-center gap-8px"},Re=["src"],Ie=N(()=>b("div",null,"Titan Browser",-1)),Me={class:"flex items-center gap-8px"},Ne=N(()=>b("div",null,"Nightly",-1)),Te=N(()=>b("span",null,"E.g: name_%rand(2)%_%index(0)% => name_ab_0001, name_xy_0002...",-1)),Fe=fe({__name:"UpdatePatchProfilesModal",props:{show:{type:Boolean,default:!1},profiles:{type:Array,default:()=>[]}},emits:["update:show","success"],setup(g,{emit:T}){const B=g,{t:s}=H(),{getNewUserAgent:V}=X(),e=_e({loading:!1,selectedOSTab:L(),browser:v.CHROME,browser_version:null,userAgent:"",startUrl:"",updatedProfiles:[],failedProfiles:[],clearCache:!0,restoreSession:!0,liteMode:"False",name:"",screen:null,platform:null,applyFingerprintOption:!1,hardware:{canvas:f.OFF,clientRects:f.NOISE,audioContext:f.NOISE,font:f.NOISE,webGL:f.NOISE}}),$=i=>{i?e.liteMode="True":e.liteMode="False"},I=async()=>{if(!e.browser_version){e.userAgent="";return}if(e.userAgent=await V(e.browser,e.selectedOSTab,e.browser_version),e.browser===v.CHROME&&e.platform)switch(e.platform){case"pixels":const i=` Edg/${e.browser_version}.0.0.0`;e.userAgent.endsWith(i)||(e.userAgent+=i);break}},D=i=>{i?e.browser_version=Z:e.browser_version=null,I()},z=i=>e.name.replace(/%rand\((\d+)\)%/g,()=>{const w=parseInt(RegExp.$1);return Math.random().toString(36).substring(2,2+w)}).replace(/%index\((\d+)\)%/g,()=>(parseInt(RegExp.$1)+i).toString().padStart(4,"0")),G=async()=>{const i=ee(e.browser_version,e.platform);if(e.browser===v.CHROME&&!i)return window.$message.error(s("Common.Msg.BrowserPlatformUnsupported",{version:e.browser_version,platform:e.platform.toUpperCase()}));const o=B.profiles,w={platform:e.platform,...e.browser&&{browser:e.browser},...e.browser_version&&{browser_version:e.browser_version},...e.userAgent&&{userAgent:e.userAgent},...e.selectedOSTab&&{os:e.selectedOSTab},other:{startUrl:e.startUrl,liteMode:e.liteMode,extensions:"",chromeArguments:""},name:"",clearCache:e.clearCache,restoreSession:e.restoreSession,navigator:{screenResolution:e.screen,languages:[],platform:null,hardwareConcurrency:null,doNotTrack:!1},...e.applyFingerprintOption&&{hardware:e.hardware}};try{e.loading=!0;const d=ce.createPatch({navigator:{screenResolution:null,languages:[],platform:null,hardwareConcurrency:null,doNotTrack:!1},other:{startUrl:null,liteMode:null,extensions:"",chromeArguments:""},...e.applyFingerprintOption?{hardware:{canvas:null,clientRects:null,audioContext:null,font:null,webGL:null}}:{}},w),h=ae(o,100);for(const P of h){const p=P.indices,r=P.chunk.map(c=>c.id),u=P.chunk.map((c,O)=>{let _=te(d);const C=_.findIndex(U=>U.path==="/name");return e.name?_[C].value=z(p[O]):_.splice(C,1),_=le(_,c.id),_}).flat(),{data:{data:{profile_ids:x}}}=await oe(u);x.forEach(c=>{r.includes(c)?e.updatedProfiles.push(c):e.failedProfiles.push(c)})}window.$message.success(s("Page.Profiles.Msg.ProfileUpdated"))}catch{}finally{e.loading=!1}},F=()=>{Object.assign(e,{loading:!1,selectedOSTab:L(),browser:v.CHROME,browser_version:null,userAgent:"",startUrl:"",updatedProfiles:[],failedProfiles:[],clearCache:!0,restoreSession:!0,liteMode:"False",name:"",screen:null,platform:null,applyFingerprintOption:!1,hardware:{canvas:f.OFF,clientRects:f.NOISE,audioContext:f.NOISE,font:f.NOISE,webGL:f.NOISE}}),T("update:show",!1),T("success")};return(i,o)=>{const w=ne,d=se,h=re,P=ie,p=Pe,r=Oe,u=ke,x=xe,c=Se,O=Ce,_=ye,C=de,U=Ue,W=pe;return k(),y(W,{show:g.show,title:a(s)("Page.Profiles.Actions.UpdateBulkProfiles"),style:{width:"50%"},"transform-origin":"center","mask-closable":!1,preset:"dialog",onClose:F},{action:l(()=>[t(d,null,{default:l(()=>[t(w,{size:"small",disabled:a(e).loading,onClick:F},{default:l(()=>[m(S(a(s)("Common.Button.Cancel")),1)]),_:1},8,["disabled"]),t(w,{size:"small",type:"success",disabled:a(e).loading,loading:a(e).loading,onClick:G},{default:l(()=>[m(S(a(s)("Common.Button.Update")),1)]),_:1},8,["disabled","loading"])]),_:1})]),default:l(()=>[t(U,{style:{"max-height":"50vh"},class:"px-5"},{default:l(()=>[t(d,{size:"large",vertical:""},{default:l(()=>[t(P,{value:a(e).browser,"onUpdate:value":o[0]||(o[0]=n=>a(e).browser=n),size:"medium",type:"segment"},{default:l(()=>[t(h,{name:a(v).CHROME},{tab:l(()=>[b("div",Ee,[b("img",{class:"browser",src:a(ue)},null,8,Re),Ie])]),_:1},8,["name"]),t(h,{name:a(v).FIREFOX},{tab:l(()=>[b("div",Me,[t(E,{type:"firefox"}),Ne])]),_:1},8,["name"])]),_:1},8,["value"]),t(P,{value:a(e).selectedOSTab,"onUpdate:value":[o[1]||(o[1]=n=>a(e).selectedOSTab=n),I],class:"mt-2",type:"segment"},{default:l(()=>[t(h,{name:"Windows",tab:"Windows"},{tab:l(()=>[t(E,{type:"window",size:20,class:"mr-2"}),m(" Windows ")]),_:1}),t(h,{name:"Mac OS",tab:"Mac OS"},{tab:l(()=>[t(E,{type:"mac",size:20,class:"mr-2"}),m(" Mac OS ")]),_:1})]),_:1},8,["value"]),t(c,{cols:"12","x-gap":10},{default:l(()=>[t(u,{span:"2"},{default:l(()=>[t(r,{label:a(s)("Common.Label.Platform"),"show-feedback":!1},{default:l(()=>[t(p,{value:a(e).platform,"onUpdate:value":o[2]||(o[2]=n=>a(e).platform=n),options:a(Y),clearable:"",filterable:"",placeholder:a(s)("Common.Label.Default"),"render-label":a(j),onUpdateValue:D},null,8,["value","options","placeholder","render-label"])]),_:1},8,["label"])]),_:1}),t(u,{span:"3"},{default:l(()=>[t(r,{label:a(s)("Common.Label.Version"),"show-feedback":!1},{default:l(()=>[t(p,{value:a(e).browser_version,"onUpdate:value":[o[3]||(o[3]=n=>a(e).browser_version=n),o[4]||(o[4]=()=>I())],options:a(e).browser===a(v).CHROME?a(K):a(Q),placeholder:a(s)("Page.Profiles.Label.EmptyBrowserVersion"),clearable:""},null,8,["value","options","placeholder"])]),_:1},8,["label"])]),_:1}),t(u,{span:"7"},{default:l(()=>[t(r,{label:"User Agent","show-feedback":!1},{default:l(()=>[t(x,{value:a(e).userAgent,"onUpdate:value":o[5]||(o[5]=n=>a(e).userAgent=n),disabled:!a(e).browser_version,placeholder:"Please select browser version."},null,8,["value","disabled"])]),_:1})]),_:1})]),_:1}),t(r,{label:"Name","show-feedback":!1},{default:l(()=>[t(d,{class:"w-full",vertical:""},{default:l(()=>[t(x,{value:a(e).name,"onUpdate:value":o[6]||(o[6]=n=>a(e).name=n),placeholder:a(s)("Page.Profiles.Label.InputNamePattern")},null,8,["value","placeholder"]),t(d,{vertical:""},{default:l(()=>[b("span",null,S(a(s)("Page.Profiles.Label.RandomString"))+": %rand(length)%",1),b("span",null,S(a(s)("Page.Profiles.Label.StartIndex"))+" %index(startIndex)%",1),Te]),_:1})]),_:1})]),_:1}),t(r,{label:a(s)("Page.CreateProfile.Tabs.Overview.Label.StartUrl"),"show-feedback":!1},{default:l(()=>[t(x,{value:a(e).startUrl,"onUpdate:value":o[7]||(o[7]=n=>a(e).startUrl=n),placeholder:"https://getip.pro",clearable:""},null,8,["value"])]),_:1},8,["label"]),t(d,null,{default:l(()=>[t(O,{checked:a(e).clearCache,"onUpdate:checked":o[8]||(o[8]=n=>a(e).clearCache=n),label:"Clear cache after closing profile"},null,8,["checked"]),t(O,{checked:a(e).restoreSession,"onUpdate:checked":o[9]||(o[9]=n=>a(e).restoreSession=n),label:"Restore last session"},null,8,["checked"]),t(O,{checked:a(e).liteMode==="True",label:"Enable lite mode",onUpdateChecked:$},null,8,["checked"])]),_:1}),t(r,{label:"Screen resolution","show-feedback":!1},{default:l(()=>[t(p,{value:a(e).screen,"onUpdate:value":o[10]||(o[10]=n=>a(e).screen=n),clearable:"",placeholder:"Random",size:"large",options:a(q).screenResolution,filterable:""},null,8,["value","options"])]),_:1}),t(O,{checked:a(e).applyFingerprintOption,"onUpdate:checked":o[11]||(o[11]=n=>a(e).applyFingerprintOption=n)},{default:l(()=>[m(" Apply fingerprint options ")]),_:1},8,["checked"]),a(e).applyFingerprintOption?(k(),y(c,{key:0,"x-gap":"24px",cols:"5",class:"mb-24px"},{default:l(()=>[t(u,null,{default:l(()=>[t(r,{"show-feedback":!1,label:"WebGL"},{default:l(()=>[t(p,{value:a(e).hardware.webGL,"onUpdate:value":o[12]||(o[12]=n=>a(e).hardware.webGL=n),placeholder:"Default",options:a(R)},null,8,["value","options"])]),_:1})]),_:1}),t(u,null,{default:l(()=>[t(r,{"show-feedback":!1,label:"Canvas"},{default:l(()=>[t(p,{value:a(e).hardware.canvas,"onUpdate:value":o[13]||(o[13]=n=>a(e).hardware.canvas=n),placeholder:"Default",options:a(J)},null,8,["value","options"])]),_:1})]),_:1}),t(u,null,{default:l(()=>[t(r,{"show-feedback":!1,label:"Client Rects"},{default:l(()=>[t(p,{value:a(e).hardware.clientRects,"onUpdate:value":o[14]||(o[14]=n=>a(e).hardware.clientRects=n),placeholder:"Default",options:a(R)},null,8,["value","options"])]),_:1})]),_:1}),t(u,null,{default:l(()=>[t(r,{"show-feedback":!1,label:"Audio Context"},{default:l(()=>[t(p,{value:a(e).hardware.audioContext,"onUpdate:value":o[15]||(o[15]=n=>a(e).hardware.audioContext=n),placeholder:"Default",options:a(R)},null,8,["value","options"])]),_:1})]),_:1}),t(u,null,{default:l(()=>[t(r,{"show-feedback":!1,label:"Fonts"},{default:l(()=>[t(p,{value:a(e).hardware.font,"onUpdate:value":o[16]||(o[16]=n=>a(e).hardware.font=n),placeholder:"Default",options:a(R)},null,8,["value","options"])]),_:1})]),_:1})]),_:1})):M("",!0)]),_:1}),t(_),t(d,{vertical:""},{default:l(()=>[t(U,{style:{"max-height":"240px","margin-bottom":"20px"},trigger:"hover"},{default:l(()=>[(k(!0),me(be,null,ge(g.profiles,(n,A)=>(k(),y(d,{key:A},{default:l(()=>[m(S(A+1)+". ",1),t(C,{strong:""},{default:l(()=>[m(S(n.name)+" ",1),a(e).updatedProfiles.includes(n.id)?(k(),y(E,{key:0,type:"check",color:"#0e7a0d",size:"20",class:"relative top-1"})):M("",!0),a(e).failedProfiles.includes(n.id)?(k(),y(C,{key:1,type:"error"},{default:l(()=>[m(" Error ")]),_:1})):M("",!0)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1},8,["show","title"])}}});const qe=he(Fe,[["__scopeId","data-v-499e3b6e"]]);export{qe as default};
