import{d as B,c as p,m as L,n as O,S as b,U as P,V as c,D as o,Y as y,af as v,X as z,a2 as H,$ as T,u as e,a8 as f}from"./_plugin-vue_export-helper-b059e461.js";import{H as l,P as r,i as u}from"./useScriptEditor-4173e447.js";import{ah as m,am as j,bu as w,aL as x}from"./main-8b08e1d6.js";import"./lodash-6114c6d4.js";import"./axios-1e30d922.js";import"./xlsx-f5126985.js";const D={class:"node-loop-container relative h-full w-full"},E={class:"top-0 left-0 w-full absolute node-menu-container hidden",style:{transform:"translateY(-100%)"}},V={class:"flex gap-1 items-center dark:text-gray-300 node-menu mb-1"},M=B({__name:"CustomLoopNode",props:{id:{type:String,required:!1},type:{type:String,required:!1},selected:{type:Boolean,required:!1},dragging:{type:Boolean,required:!1},connectable:{type:Boolean,required:!1},zIndex:{type:Number,required:!1},position:{type:Object,required:!1},dimensions:{type:Object,required:!1},data:{type:Object,required:!1},events:{type:Object,required:!1},label:{type:String,default:""},isValidTargetPos:{type:Boolean,required:!1},isValidSourcePos:{type:Boolean,required:!1},parentNode:{type:String,required:!1},dragHandle:{type:String,required:!1},sourcePosition:{type:String,required:!1},targetPosition:{type:String,required:!1},resizing:{type:Boolean,default:!1}},emits:["updateNodeInternals","edit","delete","run","update"],setup(i,{emit:d}){const n=i,S=p(()=>({backgroundColor:n.data.color,top:"35%"})),q=p(()=>({backgroundColor:"#d03050",top:"65%"})),$=p(()=>({backgroundColor:"#f0a020",bottom:"0%",left:"30%"})),C=p(()=>({backgroundColor:"#f0a020",bottom:"0%",left:"70%"})),_=a=>{d("update",{disabled:!a}),a?document.querySelector(`[data-id=${n.id}]`).classList.remove("inactive-node-card"):document.querySelector(`[data-id=${n.id}]`).classList.add("inactive-node-card")};return n.data.options.disabled===void 0&&d("update",{disabled:!1}),n.data.options.nodeSleep===void 0&&d("update",{nodeSleep:"0"}),n.data.options.nodeTimeout===void 0&&d("update",{nodeTimeout:"30"}),n.data.options.timeoutNextNode===void 0&&d("update",{timeoutNextNode:"successNode"}),L(()=>{O(()=>{n.data.options.disabled&&document.querySelector(`[data-id=${n.id}]`).classList.add("inactive-node-card")})}),(a,t)=>{const g=j,N=w,k=x;return b(),P("div",D,[c("div",E,[c("div",V,[o(g,{class:"node-toolbar-button",tertiary:"",strong:"",size:"tiny",title:"Delete node",onClick:t[0]||(t[0]=v(s=>a.$emit("delete",i.id),["stop"]))},{icon:y(()=>[o(m,{color:"red",type:"trash"})]),_:1}),o(g,{class:"node-toolbar-button",type:"primary",tertiary:"",strong:"",size:"tiny",title:"Run from this node",onClick:t[1]||(t[1]=v(s=>a.$emit("run",i.id),["stop"]))},{icon:y(()=>[o(m,{type:"play"})]),_:1}),o(N,{title:"Enable/Disable",class:"ml-auto node-toolbar-button",size:"small",value:!i.data.options.disabled,"on-update:value":_},null,8,["value"])])]),c("div",{class:"w-full h-full flex justify-center",onClick:t[2]||(t[2]=s=>a.$emit("edit")),onDelete:t[3]||(t[3]=s=>a.$emit("delete",i.id)),onRun:t[4]||(t[4]=s=>a.$emit("run",i.id)),onUpdate:t[5]||(t[5]=s=>a.$emit("update",s))},[o(k,{align:"center",justify:"center",class:"!gap-y-0"},{default:y(()=>{var s;return[(s=i.data)!=null&&s.icon?(b(),z(m,{key:0,class:"flex self-center",type:i.data.icon,size:"24"},null,8,["type"])):H("",!0),c("div",null,T(i.label),1)]}),_:1}),o(e(u),{id:e(l).SUCCESS,type:"target",position:e(r).Left},null,8,["id","position"]),o(e(u),{id:e(l).SUCCESS,type:"source",position:e(r).Right,style:f(e(S))},null,8,["id","position","style"]),o(e(u),{id:e(l).FAIL,type:"source",position:e(r).Right,style:f(e(q))},null,8,["id","position","style"]),o(e(u),{id:e(l).START_LOOP,type:"source",position:e(r).Bottom,style:f(e($))},null,8,["id","position","style"]),o(e(u),{id:e(l).END_LOOP,type:"target",position:e(r).Bottom,style:f(e(C))},null,8,["id","position","style"])],32)])}}});export{M as default};
