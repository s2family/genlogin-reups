import{c as D}from"./lodash-6114c6d4.js";var j={},m={};Object.defineProperty(m,"__esModule",{value:!0});m.Pointer=m.escapeToken=m.unescapeToken=void 0;function b(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}m.unescapeToken=b;function V(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}m.escapeToken=V;var x=function(){function e(r){r===void 0&&(r=[""]),this.tokens=r}return e.fromJSON=function(r){var n=r.split("/").map(b);if(n[0]!=="")throw new Error("Invalid JSON Pointer: ".concat(r));return new e(n)},e.prototype.toString=function(){return this.tokens.map(V).join("/")},e.prototype.evaluate=function(r){for(var n=null,t="",a=r,i=1,h=this.tokens.length;i<h;i++)n=a,t=this.tokens[i],!(t=="__proto__"||t=="constructor"||t=="prototype")&&(a=(n||{})[t]);return{parent:n,key:t,value:a}},e.prototype.get=function(r){return this.evaluate(r).value},e.prototype.set=function(r,n){var t=this.evaluate(r);t.parent&&(t.parent[t.key]=n)},e.prototype.push=function(r){this.tokens.push(r)},e.prototype.add=function(r){var n=this.tokens.concat(String(r));return new e(n)},e}();m.Pointer=x;var f={},k={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.clone=e.objectType=e.hasOwnProperty=void 0,e.hasOwnProperty=Object.prototype.hasOwnProperty;function r(a){return a===void 0?"undefined":a===null?"null":Array.isArray(a)?"array":typeof a}e.objectType=r;function n(a){return a!=null&&typeof a=="object"}function t(a){if(!n(a))return a;if(a.constructor==Array){for(var i=a.length,h=new Array(i),y=0;y<i;y++)h[y]=t(a[y]);return h}if(a.constructor==Date){var P=new Date(+a);return P}var l={};for(var u in a)e.hasOwnProperty.call(a,u)&&(l[u]=t(a[u]));return l}e.clone=t})(k);var s={};Object.defineProperty(s,"__esModule",{value:!0});s.diffAny=s.diffObjects=s.diffArrays=s.intersection=s.subtract=s.isDestructive=void 0;var w=k;function rr(e){var r=e.op;return r==="remove"||r==="replace"||r==="copy"||r==="move"}s.isDestructive=rr;function N(e,r){var n={};for(var t in e)w.hasOwnProperty.call(e,t)&&e[t]!==void 0&&(n[t]=1);for(var a in r)w.hasOwnProperty.call(r,a)&&r[a]!==void 0&&delete n[a];return Object.keys(n)}s.subtract=N;function q(e){for(var r=e.length,n={},t=0;t<r;t++){var a=e[t];for(var i in a)w.hasOwnProperty.call(a,i)&&a[i]!==void 0&&(n[i]=(n[i]||0)+1)}for(var i in n)n[i]<r&&delete n[i];return Object.keys(n)}s.intersection=q;function er(e){return e.op==="add"}function nr(e){return e.op==="remove"}function T(e,r){return{operations:e.operations.concat(r),cost:e.cost+1}}function z(e,r,n,t){t===void 0&&(t=_);var a={"0,0":{operations:[],cost:0}};function i(u,o){var v="".concat(u,",").concat(o),c=a[v];if(c===void 0){if(u>0&&o>0&&!t(e[u-1],r[o-1],n.add(String(u-1))).length)c=i(u-1,o-1);else{var p=[];if(u>0){var A=i(u-1,o),g={op:"remove",index:u-1};p.push(T(A,g))}if(o>0){var E=i(u,o-1),S={op:"add",index:u-1,value:r[o-1]};p.push(T(E,S))}if(u>0&&o>0){var U=i(u-1,o-1),W={op:"replace",index:u-1,original:e[u-1],value:r[o-1]};p.push(T(U,W))}var X=p.sort(function(Y,Z){return Y.cost-Z.cost})[0];c=X}a[v]=c}return c}var h=isNaN(e.length)||e.length<=0?0:e.length,y=isNaN(r.length)||r.length<=0?0:r.length,P=i(h,y).operations,l=P.reduce(function(u,o){var v=u[0],c=u[1];if(er(o)){var p=o.index+1+c,A=p<h+c?String(p):"-",g={op:o.op,path:n.add(A).toString(),value:o.value};return[v.concat(g),c+1]}else if(nr(o)){var g={op:o.op,path:n.add(String(o.index+c)).toString()};return[v.concat(g),c-1]}else{var E=n.add(String(o.index+c)),S=t(o.original,o.value,E);return[v.concat.apply(v,S),c]}},[[],0])[0];return l}s.diffArrays=z;function C(e,r,n,t){t===void 0&&(t=_);var a=[];return N(e,r).forEach(function(i){a.push({op:"remove",path:n.add(i).toString()})}),N(r,e).forEach(function(i){a.push({op:"add",path:n.add(i).toString(),value:r[i]})}),q([e,r]).forEach(function(i){a.push.apply(a,t(e[i],r[i],n.add(i)))}),a}s.diffObjects=C;function _(e,r,n,t){if(t===void 0&&(t=_),e===r)return[];var a=(0,w.objectType)(e),i=(0,w.objectType)(r);return a=="array"&&i=="array"?z(e,r,n,t):a=="object"&&i=="object"?C(e,r,n,t):[{op:"replace",path:n.toString(),value:r}]}s.diffAny=_;var J=D&&D.__extends||function(){var e=function(r,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(t[i]=a[i])},e(r,n)};return function(r,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(r,n);function t(){this.constructor=r}r.prototype=n===null?Object.create(n):(t.prototype=n.prototype,new t)}}();Object.defineProperty(f,"__esModule",{value:!0});f.apply=f.InvalidOperationError=f.test=f.copy=f.move=f.replace=f.remove=f.add=f.TestError=f.MissingError=void 0;var O=m,I=k,tr=s,d=function(e){J(r,e);function r(n){var t=e.call(this,"Value required at path: ".concat(n))||this;return t.path=n,t.name="MissingError",t}return r}(Error);f.MissingError=d;var G=function(e){J(r,e);function r(n,t){var a=e.call(this,"Test failed: ".concat(n," != ").concat(t))||this;return a.actual=n,a.expected=t,a.name="TestError",a}return r}(Error);f.TestError=G;function M(e,r,n){if(Array.isArray(e))if(r=="-")e.push(n);else{var t=parseInt(r,10);e.splice(t,0,n)}else e[r]=n}function R(e,r){if(Array.isArray(e)){var n=parseInt(r,10);e.splice(n,1)}else delete e[r]}function $(e,r){var n=O.Pointer.fromJSON(r.path).evaluate(e);return n.parent===void 0?new d(r.path):(M(n.parent,n.key,(0,I.clone)(r.value)),null)}f.add=$;function B(e,r){var n=O.Pointer.fromJSON(r.path).evaluate(e);return n.value===void 0?new d(r.path):(R(n.parent,n.key),null)}f.remove=B;function F(e,r){var n=O.Pointer.fromJSON(r.path).evaluate(e);if(n.parent===null)return new d(r.path);if(Array.isArray(n.parent)){if(parseInt(n.key,10)>=n.parent.length)return new d(r.path)}else if(n.value===void 0)return new d(r.path);return n.parent[n.key]=(0,I.clone)(r.value),null}f.replace=F;function H(e,r){var n=O.Pointer.fromJSON(r.from).evaluate(e);if(n.value===void 0)return new d(r.from);var t=O.Pointer.fromJSON(r.path).evaluate(e);return t.parent===void 0?new d(r.path):(R(n.parent,n.key),M(t.parent,t.key,n.value),null)}f.move=H;function K(e,r){var n=O.Pointer.fromJSON(r.from).evaluate(e);if(n.value===void 0)return new d(r.from);var t=O.Pointer.fromJSON(r.path).evaluate(e);return t.parent===void 0?new d(r.path):(M(t.parent,t.key,(0,I.clone)(n.value)),null)}f.copy=K;function L(e,r){var n=O.Pointer.fromJSON(r.path).evaluate(e);return(0,tr.diffAny)(n.value,r.value,new O.Pointer).length?new G(n.value,r.value):null}f.test=L;var Q=function(e){J(r,e);function r(n){var t=e.call(this,"Invalid operation: ".concat(n.op))||this;return t.operation=n,t.name="InvalidOperationError",t}return r}(Error);f.InvalidOperationError=Q;function ar(e,r){switch(r.op){case"add":return $(e,r);case"remove":return B(e,r);case"replace":return F(e,r);case"move":return H(e,r);case"copy":return K(e,r);case"test":return L(e,r)}return new Q(r)}f.apply=ar;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.createTests=e.createPatch=e.applyPatch=e.Pointer=void 0;var r=m;Object.defineProperty(e,"Pointer",{enumerable:!0,get:function(){return r.Pointer}});var n=f,t=s;function a(l,u){return u.map(function(o){return(0,n.apply)(l,o)})}e.applyPatch=a;function i(l){function u(o,v,c){var p=l(o,v,c);return Array.isArray(p)?p:(0,t.diffAny)(o,v,c,u)}return u}function h(l,u,o){var v=new r.Pointer;return(o?i(o):t.diffAny)(l,u,v)}e.createPatch=h;function y(l,u){var o=r.Pointer.fromJSON(u).evaluate(l);if(o!==void 0)return{op:"test",path:u,value:o.value}}function P(l,u){var o=new Array;return u.filter(t.isDestructive).forEach(function(v){var c=y(l,v.path);if(c&&o.push(c),"from"in v){var p=y(l,v.from);p&&o.push(p)}}),o}e.createTests=P})(j);export{j as r};
