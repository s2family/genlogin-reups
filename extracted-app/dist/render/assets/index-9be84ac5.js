import{d as ae,S as r,U as b,V as g,W as dn,F as ne,ad as ce,X as C,Y as u,ae as Z,a2 as N,D as l,E as M,$ as T,a1 as $e,B as un,c as re,b as G,w as Ce,u as t,h as K,r as Qe,f as pn,q as ge,L as we,a8 as ke,n as _t,a4 as St,af as It,J as hn,ah as fn,O as gn,ab as Ot,ac as Rt,m as Je,o as vn,e as mn,ag as _n}from"./_plugin-vue_export-helper-b059e461.js";import{ah as B,an as Bt,aQ as yn,aA as Ye,am as fe,x as et,a2 as De,aR as ue,aL as xe,aS as bn,aT as wn,aU as je,aV as Ut,aW as xn,a7 as _e,aq as Lt,aX as Pt,a3 as it,aY as Ft,aZ as An,ao as zt,I as jt,ad as Yt,a_ as he,a8 as Wt,a$ as Mt,b0 as kn,a4 as Dn,b1 as Cn,b2 as Nt,b3 as yt,b4 as Tn,a6 as Sn}from"./main-8b08e1d6.js";import Ke from"./ModalConfirm-92ee844f.js";import{M as Ae}from"./Modal-0f4a5102.js";import{l as Ze}from"./lodash-6114c6d4.js";import{u as Vt}from"./useRunScript-b4e924db.js";import{u as Gt,_ as In,a as Mn}from"./SelectProfiles.vue_vue_type_script_setup_true_lang-3d20c4d9.js";import{u as Ht}from"./useMyApps-6a511b1e.js";import{E as L,u as We,a as Oe,b as ct,F as Nn,g as En,c as tt,d as dt}from"./FormMakingResult-fec35bca.js";import{_ as Ve}from"./Select-f7c79767.js";import{_ as $n}from"./InputNumber-c85d5887.js";import{_ as Re}from"./Input-96fa4693.js";import{_ as wt}from"./DatePicker-91499e1f.js";import{_ as qt}from"./Scrollbar-e90e60b7.js";import{_ as On}from"./a-72358bba.js";import{_ as ut}from"./FormItem-52ed65a1.js";import{_ as Rn}from"./Form-e484375f.js";import{_ as Bn}from"./Divider-65f3d898.js";import{_ as Un,a as Ln}from"./CollapseItem-114ac5a0.js";import{u as Xt}from"./useSavedTasks-dbe97dc3.js";import{l as bt}from"./logo-dark-be7b231e.js";import{T as Pn,a as Fn}from"./TaskInput-b53c909e.js";import{_ as zn}from"./DataTable.vue_vue_type_style_index_0_lang-cdaf49f4.js";import{_ as jn}from"./InputSearch.vue_vue_type_script_setup_true_lang-d786940a.js";import{_ as Yn}from"./RunLog.vue_vue_type_script_setup_true_lang-0ef9ae68.js";import{a as Wn,_ as Vn}from"./LayoutSider-73b42742.js";import{_ as Gn}from"./Badge-93754219.js";import{_ as Hn}from"./DataTable-e5054828.js";import{_ as qn}from"./Layout-a5efc6cd.js";import"./axios-1e30d922.js";import"./xlsx-f5126985.js";import"./useSelectProfiles-b9438807.js";import"./firefox-icon-2ab5a045.js";import"./Pagination-ce77c3f3.js";import"./useScriptEditor-4173e447.js";import"./useConsole-dd6c2120.js";import"./Radio-c980589e.js";import"./RadioGroup-69a7fbba.js";import"./Checkbox-ce86da58.js";import"./Upload-46a3755a.js";import"./Progress-0b0a0198.js";import"./_createCompounder-4af3bdce.js";import"./Alert-2eccd136.js";import"./Grid-308f499b.js";import"./Suffix-fc59bb7a.js";import"./Remove-be3cc84a.js";import"./Variables-e3cd83d6.js";import"./DynamicInput-debc4a5e.js";const Xn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 576 512"},Kn=g("path",{d:"M402.3 344.9l32-32c5-5 13.7-1.5 13.7 5.7V464c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V112c0-26.5 21.5-48 48-48h273.5c7.1 0 10.7 8.6 5.7 13.7l-32 32c-1.5 1.5-3.5 2.3-5.7 2.3H48v352h352V350.5c0-2.1.8-4.1 2.3-5.6zm156.6-201.8L296.3 405.7l-90.4 10c-26.2 2.9-48.5-19.2-45.6-45.6l10-90.4L432.9 17.1c22.9-22.9 59.9-22.9 82.7 0l43.2 43.2c22.9 22.9 22.9 60 .1 82.8zM460.1 174L402 115.9L216.2 301.8l-7.3 65.3l65.3-7.3L460.1 174zm64.8-79.7l-43.2-43.2c-4.1-4.1-10.8-4.1-14.8 0L436 82l58.1 58.1l30.9-30.9c4-4.2 4-10.8-.1-14.9z",fill:"currentColor"},null,-1),Qn=[Kn],Et=ae({name:"EditRegular",render:function(n,o){return r(),b("svg",Xn,Qn)}}),Zn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 448 512"},Jn=g("path",{d:"M268 416h24a12 12 0 0 0 12-12V188a12 12 0 0 0-12-12h-24a12 12 0 0 0-12 12v216a12 12 0 0 0 12 12zM432 80h-82.41l-34-56.7A48 48 0 0 0 274.41 0H173.59a48 48 0 0 0-41.16 23.3L98.41 80H16A16 16 0 0 0 0 96v16a16 16 0 0 0 16 16h16v336a48 48 0 0 0 48 48h288a48 48 0 0 0 48-48V128h16a16 16 0 0 0 16-16V96a16 16 0 0 0-16-16zM171.84 50.91A6 6 0 0 1 177 48h94a6 6 0 0 1 5.15 2.91L293.61 80H154.39zM368 464H80V128h288zm-212-48h24a12 12 0 0 0 12-12V188a12 12 0 0 0-12-12h-24a12 12 0 0 0-12 12v216a12 12 0 0 0 12 12z",fill:"currentColor"},null,-1),ea=[Jn],$t=ae({name:"TrashAltRegular",render:function(n,o){return r(),b("svg",Zn,ea)}}),ta={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},na=dn('<g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="6" cy="12" r="3"></circle><circle cx="18" cy="6" r="3"></circle><circle cx="18" cy="18" r="3"></circle><path d="M8.7 10.7l6.6-3.4"></path><path d="M8.7 13.3l6.6 3.4"></path></g>',1),aa=[na],oa=ae({name:"Share",render:function(n,o){return r(),b("svg",ta,aa)}}),sa={class:"flex flex-col prevent-select"},la={class:"flex items-center justify-between context-item"},ra={class:"flex items-center gap-8px context-item"},ia=["onClick"],ca={class:"flex items-center justify-between"},da={class:"flex items-center gap-8px context-item"},ua=["onClick"],pa={class:"flex items-center gap-8px context-item"},ha=["onClick"],fa=["onClick"],ga={class:""},va={class:"flex items-center justify-between context-item"},ma={class:"flex items-center gap-8px context-item"},_a=["onClick"],ya={class:"flex items-center justify-between"},ba={class:"flex items-center gap-8px context-item"},wa=["onClick"],xa={class:"flex items-center gap-8px context-item"},Aa=["onClick"],ka=["onClick"],Da=ae({__name:"ContextMenu",props:{contextMenu:{type:Array,default:()=>[]}},emits:["select"],setup(e,{emit:n}){const{getAppDetails:o,isShowModalPayment:d}=Ht(),s=async S=>{try{S.loading=!0,await o(S.id),d.value=!0}catch(D){console.error(D)}finally{S.loading=!1}},a=(S,D)=>{n("select",{item:S,parent:D})};return(S,D)=>{const c=Bt,p=yn,E=Ye,k=fe,P=et;return r(),b("div",sa,[(r(!0),b(ne,null,ce(e.contextMenu,(_,m)=>{var w;return r(),b("div",{key:m},[_.disabled?(r(),C(P,{key:0,trigger:"hover",placement:"right",class:"min-w-220px"},{trigger:u(()=>{var h;return[g("div",{class:Z(["cursor-pointer hover:bg-[#5671ff33] rounded hover:text-[#5671FF] p-8px",{disabled:_.disabled}]),onClick:()=>{}},[(h=_.children)!=null&&h.length?(r(),C(E,{key:0,trigger:"hover",style:{width:"200px",padding:"4px","margin-left":"16px","border-radius":"var(--4, 4px)","box-shadow":"0px 4px 4px 0px rgba(0, 0, 0, 0.05)"},placement:"right-start","show-arrow":!1},{trigger:u(()=>[g("div",la,[g("div",ra,[_.color?(r(),b("div",{key:0,class:Z([_.color,"color"])},null,2)):N("",!0),_.icon?(r(),C(B,{key:1,type:_.icon,size:"16"},null,8,["type"])):N("",!0),_.image?(r(),C(c,{key:2,class:"w-16px h-16px",src:_.image},null,8,["src"])):N("",!0),l(p,{style:{maxWidth:"140px !important"}},{default:u(()=>[M(T(_.name),1)]),_:2},1024)]),l(B,{type:"next",size:"16",color:"#828282"})])]),default:u(()=>[(r(!0),b(ne,null,ce(_.children,(x,y)=>{var A;return r(),b("div",{key:y,class:"cursor-pointer hover:bg-[#5671ff33] rounded hover:text-[#5671FF] p-8px",onClick:v=>x.children.length===0&&a(x,_)},[(A=x.children)!=null&&A.length?(r(),C(E,{key:0,trigger:"hover",style:{width:"200px",padding:"4px","margin-left":"16px","border-radius":"var(--4, 4px)","box-shadow":"0px 4px 4px 0px rgba(0, 0, 0, 0.05)"},placement:"right-start","show-arrow":!1},{trigger:u(()=>[g("div",ca,[g("div",da,[x.color?(r(),b("div",{key:0,class:Z([x.color,"color"])},null,2)):N("",!0),x.icon?(r(),C(B,{key:1,type:x.icon,size:"16"},null,8,["type"])):N("",!0),l(p,{style:{maxWidth:"160px !important"}},{default:u(()=>[M(T(x.name),1)]),_:2},1024)]),l(B,{type:"next",size:"16",color:"#828282"})])]),default:u(()=>[(r(!0),b(ne,null,ce(x.children,(v,$)=>(r(),b("div",{key:$,class:"cursor-pointer hover:bg-[#5671ff33] rounded hover:text-[#5671FF] p-8px",onClick:V=>a(v,_)},[g("div",pa,[v.color?(r(),b("div",{key:0,class:Z([v.color,"color"])},null,2)):N("",!0),v.icon?(r(),C(B,{key:1,type:v.icon,size:"16"},null,8,["type"])):N("",!0),l(p,{style:{maxWidth:"160px !important"}},{default:u(()=>[M(T(v.name),1)]),_:2},1024)])],8,ua))),128))]),_:2},1024)):(r(),b("div",{key:1,class:"flex items-center gap-8px context-item",onClick:v=>a(x)},[x.color?(r(),b("div",{key:0,class:Z([x.color,"color"])},null,2)):N("",!0),x.icon?(r(),C(B,{key:1,type:x.icon,size:"16"},null,8,["type"])):N("",!0),l(p,{style:{maxWidth:"160px !important"}},{default:u(()=>[M(T(x.name),1)]),_:2},1024)],8,ha)),M(" 45 0 ")],8,ia)}),128))]),_:2},1024)):(r(),b("div",{key:1,class:"flex items-center gap-8px context-item",onClick:x=>a(_)},[_.color?(r(),b("div",{key:0,class:Z([_.color,"color"])},null,2)):N("",!0),_.icon?(r(),C(B,{key:1,type:_.icon,size:"16"},null,8,["type"])):N("",!0),_.image?(r(),C(c,{key:2,class:"w-16px h-16px",src:_.image},null,8,["src"])):N("",!0),l(p,{style:{maxWidth:"140px !important"}},{default:u(()=>[M(T(_.name),1)]),_:2},1024)],8,fa))],2)]}),default:u(()=>[g("div",ga,[M(" Not permit to run this module. "),l(k,{quaternary:"",type:"primary",loading:_.loading,onClick:h=>s(_)},{default:u(()=>[M(" Active now ")]),_:2},1032,["loading","onClick"])])]),_:2},1024)):(r(),b("div",{key:1,class:Z(["cursor-pointer hover:bg-[#5671ff33] rounded hover:text-[#5671FF] p-8px",{disabled:_.permit}]),onClick:()=>{}},[(w=_.children)!=null&&w.length&&!_.permit?(r(),C(E,{key:0,trigger:"hover",style:{width:"200px",padding:"4px","margin-left":"16px","border-radius":"var(--4, 4px)","box-shadow":"0px 4px 4px 0px rgba(0, 0, 0, 0.05)"},placement:"right-start","show-arrow":!1},{trigger:u(()=>[g("div",va,[g("div",ma,[_.color?(r(),b("div",{key:0,class:Z([_.color,"color"])},null,2)):N("",!0),_.icon?(r(),C(B,{key:1,type:_.icon,size:"16"},null,8,["type"])):N("",!0),_.image?(r(),C(c,{key:2,class:"w-16px h-16px",src:_.image},null,8,["src"])):N("",!0),l(p,{style:{maxWidth:"140px !important"}},{default:u(()=>[M(T(_.name),1)]),_:2},1024)]),l(B,{type:"next",size:"16",color:"#828282"})])]),default:u(()=>[(r(!0),b(ne,null,ce(_.children,(h,x)=>{var y;return r(),b("div",{key:x,class:"cursor-pointer hover:bg-[#5671ff33] rounded hover:text-[#5671FF] p-8px",onClick:A=>h.children.length===0&&a(h,_)},[(y=h.children)!=null&&y.length?(r(),C(E,{key:0,trigger:"hover",style:{width:"200px",padding:"4px","margin-left":"16px","border-radius":"var(--4, 4px)","box-shadow":"0px 4px 4px 0px rgba(0, 0, 0, 0.05)"},placement:"right-start","show-arrow":!1},{trigger:u(()=>[g("div",ya,[g("div",ba,[h.color?(r(),b("div",{key:0,class:Z([h.color,"color"])},null,2)):N("",!0),h.icon?(r(),C(B,{key:1,type:h.icon,size:"16"},null,8,["type"])):N("",!0),l(p,{style:{maxWidth:"140px !important"}},{default:u(()=>[M(T(h.name),1)]),_:2},1024)]),l(B,{type:"next",size:"16",color:"#828282"})])]),default:u(()=>[(r(!0),b(ne,null,ce(h.children,(A,v)=>(r(),b("div",{key:v,class:"cursor-pointer hover:bg-[#5671ff33] rounded hover:text-[#5671FF] p-8px",onClick:$=>a(A,_)},[g("div",xa,[A.color?(r(),b("div",{key:0,class:Z([A.color,"color"])},null,2)):N("",!0),A.icon?(r(),C(B,{key:1,type:A.icon,size:"16"},null,8,["type"])):N("",!0),l(p,{style:{maxWidth:"140px !important"}},{default:u(()=>[M(T(A.name),1)]),_:2},1024)])],8,wa))),128))]),_:2},1024)):(r(),b("div",{key:1,class:"flex items-center gap-8px context-item",onClick:A=>a(h)},[h.color?(r(),b("div",{key:0,class:Z([h.color,"color"])},null,2)):N("",!0),h.icon?(r(),C(B,{key:1,type:h.icon,size:"16"},null,8,["type"])):N("",!0),l(p,{style:{maxWidth:"140px !important"}},{default:u(()=>[M(T(h.name),1)]),_:2},1024)],8,Aa))],8,_a)}),128))]),_:2},1024)):(r(),b("div",{key:1,class:"flex items-center gap-8px context-item",onClick:h=>a(_)},[_.color?(r(),b("div",{key:0,class:Z([_.color,"color"])},null,2)):N("",!0),_.icon?(r(),C(B,{key:1,type:_.icon,size:"16"},null,8,["type"])):N("",!0),_.image?(r(),C(c,{key:2,class:"w-16px h-16px",src:_.image},null,8,["src"])):N("",!0),l(p,{style:{maxWidth:"140px !important"}},{default:u(()=>[M(T(_.name),1)]),_:2},1024)],8,ka))],2))])}),128))])}}});const Ca=$e(Da,[["__scopeId","data-v-c2e28ab1"]]),Ta={class:"mt-16px flex flex-col gap-16px mr-16px"},Sa={class:"w-1/3"},Ia={class:"flex items-center gap-12px w-full"},Ma={class:"flex items-center gap-12px w-full"},Na=["onClick"],Ea=ae({__name:"Filter",props:{fieldList:{type:Array,required:!0,default:()=>[]},filters:{type:Array,required:!0,default:()=>[]}},emits:["update:filters"],setup(e,{emit:n}){const o=e,{fieldList:d}=un(o),{t:s}=De(),a=re(()=>d.value.map(y=>({value:y.key,label:y.title,type:y.type,options:y.options}))),S=G([{label:s("Common.Condition.Is"),value:L.IS},{label:s("Common.Condition.IsNot"),value:L.IS_NOT},{label:s("Common.Condition.Contains"),value:L.CONTAINS},{label:s("Common.Condition.NotContains"),value:L.NOT_CONTAINS},{label:s("Common.Condition.Empty"),value:L.EMPTY},{label:s("Common.Condition.NotEmpty"),value:L.NOT_EMPTY}]),D=G([{label:s("Common.Condition.Is"),value:L.IS},{label:s("Common.Condition.IsBefore"),value:L.IS_BEFORE},{label:s("Common.Condition.IsAfter"),value:L.IS_AFTER},{label:s("Common.Condition.Empty"),value:L.EMPTY},{label:s("Common.Condition.NotEmpty"),value:L.NOT_EMPTY}]),c=[{label:s("Common.Condition.Is"),value:L.IS},{label:s("Common.Condition.IsNot"),value:L.IS_NOT},{label:s("Common.Condition.GreaterThan"),value:L.GREATER_THAN},{label:s("Common.Condition.GreaterThanOrEqual"),value:L.GREATER_THAN_OR_EQUAL},{label:s("Common.Condition.LessThan"),value:L.LESS_THAN},{label:s("Common.Condition.LessThanOrEqual"),value:L.LESS_THAN_OR_EQUAL},{label:s("Common.Condition.Empty"),value:L.EMPTY},{label:s("Common.Condition.NotEmpty"),value:L.NOT_EMPTY}],p=[{label:s("Common.Condition.ExactDate"),value:L.EXACT_DATE},{label:s("Common.Condition.Today"),value:L.TODAY},{label:s("Common.Condition.Tomorrow"),value:L.TOMORROW},{label:s("Common.Condition.Yesterday"),value:L.YESTERDAY},{label:s("Common.Condition.ThisWeek"),value:L.THIS_WEEK},{label:s("Common.Condition.LastWeek"),value:L.LAST_WEEK},{label:s("Common.Condition.ThisMonth"),value:L.THIS_MONTH},{label:s("Common.Condition.LastMonth"),value:L.LAST_MONTH},{label:s("Common.Condition.Past7Days"),value:L.PAST_7_DAYS},{label:s("Common.Condition.Next7Days"),value:L.NEXT_7_DAYS},{label:s("Common.Condition.Past30Days"),value:L.PAST_30_DAYS}],E=[{label:s("Common.Condition.ExactDate"),value:L.EXACT_DATE},{label:s("Common.Condition.Today"),value:L.TODAY},{label:s("Common.Condition.Tomorrow"),value:L.TOMORROW},{label:s("Common.Condition.Yesterday"),value:L.YESTERDAY}],k=re(()=>y=>{switch(y){case ue.DATE:return D.value;case ue.NUMBER:return c;default:return S.value}}),P=re(()=>y=>a.value.find(v=>v.value===y).options||[]),_=y=>K("div",{class:["tag-color",y.color]},{default:()=>y.value}),m=G([]),w=y=>{m.value.splice(m.value.indexOf(y),1)},h=()=>{m.value.push({key:a.value[0].value,type:a.value[0].type,condition:L.IS,extraCondition:null,data:null})},x=(y,A)=>{const v=a.value.find($=>$.value===y);m.value[A].type=v.type,m.value[A].condition=L.IS,m.value[A].extraCondition=null,m.value[A].data=null};return Ce(m,y=>{n("update:filters",y)},{deep:!0}),Ce(()=>o.filters,y=>{m.value=y},{deep:!0}),(y,A)=>{const v=Ve,$=$n,V=Re,q=wt,Q=qt,J=fe,se=xe;return r(),b(ne,null,[g("div",null,T(t(s)("Common.Label.Filters")),1),l(Q,{trigger:"hover",style:{"max-height":"270px"}},{default:u(()=>[g("div",Ta,[(r(!0),b(ne,null,ce(t(m),(U,Te)=>(r(),b("div",{key:Te,class:"flex items-center w-full gap-16px"},[g("div",Sa,[l(v,{value:U.key,"onUpdate:value":[W=>U.key=W,W=>x(W,Te)],class:"w-50","consistent-menu-width":!1,style:{width:"unset !important"},options:t(a)},null,8,["value","onUpdate:value","options"])]),g("div",Ia,[g("div",Ma,[l(v,{value:U.condition,"onUpdate:value":W=>U.condition=W,class:"w-40",placeholder:t(s)("Page.AccountManager.Label.Condition"),options:t(k)(U.type),clearable:"","consistent-menu-width":!1,onUpdateValue:W=>{U.extraCondition=null,U.data=null}},null,8,["value","onUpdate:value","placeholder","options","onUpdateValue"]),U.type===t(ue).NUMBER?(r(),C($,{key:0,value:U.data,"onUpdate:value":W=>U.data=W,"show-button":!1},null,8,["value","onUpdate:value"])):[t(ue).STATUS,t(ue).SELECT,t(ue).MULTI_SELECT].includes(U.type)&&![t(L).EMPTY,t(L).NOT_EMPTY].includes(U.condition)?(r(),C(v,{key:1,value:U.data,"onUpdate:value":W=>U.data=W,"consistent-menu-width":!1,style:{width:"200px !important"},"label-field":"value",options:t(P)(U.key),"render-label":_,multiple:U.type===t(ue).MULTI_SELECT||[t(L).CONTAINS,t(L).NOT_CONTAINS].includes(U.condition),"max-tag-count":"responsive",placeholder:t(s)("Page.AccountManager.Label.Value"),clearable:""},null,8,["value","onUpdate:value","options","multiple","placeholder"])):U.type===t(ue).DATE&&[t(L).CONTAINS,t(L).NOT_CONTAINS].includes(U.condition)?(r(),C(v,{key:2,value:U.extraCondition,"onUpdate:value":W=>U.extraCondition=W,class:"w-30",placeholder:t(s)("Page.AccountManager.Label.Value"),options:U.condition===t(L).IS?p:E,clearable:"",onUpdateValue:W=>U.exactTime=null},null,8,["value","onUpdate:value","placeholder","options","onUpdateValue"])):[t(L).EMPTY,t(L).NOT_EMPTY].includes(U.condition)?N("",!0):(r(),C(V,{key:3,value:U.data,"onUpdate:value":W=>U.data=W,placeholder:t(s)("Page.AccountManager.Label.Value"),clearable:""},null,8,["value","onUpdate:value","placeholder"])),U.extraCondition===t(L).EXACT_DATE?(r(),C(q,{key:4,value:U.exactTime,"onUpdate:value":W=>U.exactTime=W,placeholder:t(s)("Page.AccountManager.Label.Date"),clearable:""},null,8,["value","onUpdate:value","placeholder"])):N("",!0)]),g("div",{class:"cursor-pointer flex items-center gap-8px text-[#828282]",onClick:W=>w(U)},[l(B,{type:"close",size:"16",color:"#BDBDBD"})],8,Na)])]))),128))])]),_:1}),l(se,{align:"center",class:"mt-16px",justify:"space-between"},{default:u(()=>[l(J,{"icon-placement":"left",quaternary:"",onClick:h},{icon:u(()=>[l(B,{type:"plus"})]),default:u(()=>[M(" "+T(t(s)("Page.AccountManager.Label.AddCondition")),1)]),_:1}),l(se,{align:"center"},{default:u(()=>[l(J,{class:"text-[#828282]",quaternary:"",onClick:A[0]||(A[0]=U=>m.value=[])},{default:u(()=>[M(T(t(s)("Page.AccountManager.Label.ClearCondition")),1)]),_:1})]),_:1})]),_:1})],64)}}}),$a={class:"flex flex-auto gap-x-2"},Oa=ae({__name:"ImportFileModal",props:{show:Boolean,appId:String},emits:["update:show","imported"],setup(e,{emit:n}){const o=e,{t:d}=De(),{selectedTable:s}=We(),a=Qe({importing:!1,filePath:""}),S=G(null),D=async E=>{const k=E.target.files[0];k&&(a.filePath=k.path)},c=async()=>{await bn(s.value)},p=async()=>{try{if(!a.filePath)return window.$message.warning(d("Common.Noti.NoFileSelected"));a.importing=!0,await wn({filePath:a.filePath,table:s.value}),window.$message.success(d("Page.AccountManager.Noti.TableImported")),a.filePath="",n("update:show",!1),n("imported")}catch{}finally{a.importing=!1}};return(E,k)=>{const P=On,_=xe,m=Re,w=fe,h=ut;return r(),C(Ae,{"is-show":o.show,icon:"download",header:t(d)("Page.AccountManager.Button.ImportFile"),"submit-label":"Import","action-submit":p,loading:t(a).importing,onClose:k[2]||(k[2]=x=>n("update:show",!1))},{body:u(()=>[l(_,{align:"center"},{default:u(()=>[l(P,{onClick:c},{default:u(()=>[l(B,{type:"download"}),M(" "+T(t(d)("Page.AccountManager.Label.DownloadTemplate")),1)]),_:1})]),_:1}),l(h,{"show-feedback":!1,label:t(d)("Page.AccountManager.Label.FilePath")},{default:u(()=>[g("div",$a,[l(m,{value:t(a).filePath,"onUpdate:value":k[0]||(k[0]=x=>t(a).filePath=x),placeholder:t(d)("Page.AccountManager.Label.SelectFileAccept")},null,8,["value","placeholder"]),l(w,{type:"primary",dashed:"",onClick:k[1]||(k[1]=x=>{var y;return(y=t(S))==null?void 0:y.click()})},{icon:u(()=>[l(B,{type:"selectFile"})]),_:1})])]),_:1},8,["label"]),g("input",{ref_key:"file",ref:S,type:"file",style:{display:"none"},accept:".csv,.xlsx",onChange:D},null,544)]),_:1},8,["is-show","header","loading"])}}}),Ra=ae({__name:"InsertAccountModal",props:{show:Boolean,appId:String},emits:["update:show","imported"],setup(e,{emit:n}){const o=e,{appDetails:d,insertAccount:s}=Oe();function a(p){return Object.values(p)}const S=re(()=>{var p;return a((p=d.value)==null?void 0:p.customFields)}),D=G({}),c=async()=>{try{await s(o.appId,D.value),n("imported"),n("update:show",!1),D.value={}}catch{}};return(p,E)=>{const k=ut,P=Re,_=Ve,m=wt,w=Rn;return r(),C(Ae,{"is-show":o.show,icon:"download",header:"Import account","submit-label":"Import","action-submit":c,loading:!1,onClose:E[0]||(E[0]=h=>n("update:show",!1))},{body:u(()=>[l(w,{ref:"formRef",model:t(D)},{default:u(()=>[l(k,{label:"Devices"}),(r(!0),b(ne,null,ce(t(S),(h,x)=>(r(),C(k,{key:x,label:h.title},{default:u(()=>[h.type==="password"?(r(),C(P,{key:0,value:t(D)[h.key],"onUpdate:value":y=>t(D)[h.key]=y,type:"password","show-password-on":"mousedown"},null,8,["value","onUpdate:value"])):h.type==="email"?(r(),C(P,{key:1,value:t(D)[h],"onUpdate:value":y=>t(D)[h]=y},null,8,["value","onUpdate:value"])):["multiSelect","select","status"].includes(h.type)?(r(),C(_,{key:2,value:t(D)[h.key],"onUpdate:value":y=>t(D)[h.key]=y,options:h.options,multiple:h==="multiSelect","label-field":"value"},null,8,["value","onUpdate:value","options","multiple"])):h.type==="date"?(r(),C(m,{key:3,value:t(D)[h.key],"onUpdate:value":y=>t(D)[h.key]=y,type:"date"},null,8,["value","onUpdate:value"])):(r(),C(P,{key:4,value:t(D)[h.key],"onUpdate:value":y=>t(D)[h.key]=y},null,8,["value","onUpdate:value"]))]),_:2},1032,["label"]))),128))]),_:1},8,["model"])]),_:1},8,["is-show"])}}}),Ba={key:0},Ua=ae({__name:"InputAccountModal",props:{show:Boolean},emits:["update:show","imported"],setup(e,{emit:n}){const o=e,{t:d}=De(),{customFields:s,insertAccounts:a}=Oe(),S=G({}),D=re(()=>s.value.map(m=>{const w=h=>Object.values(S.value).findIndex(x=>x===h)!==-1;return{label:m.title,value:m.key,disabled:w(m.key)}})),c=({node:m,option:w})=>K(et,{placement:"right"},{trigger:()=>m,default:()=>w.label}),p=[{label:"Email | Password | Token | 2FA",value:1},{label:"Email | Password | Token",value:2},{label:"Email | Password | 2FA",value:3},{label:"Custom",value:4}],E=G(""),k=G(p[0].value),P=(m,w)=>{if(p.find(y=>y.value===w)||window.$message.error(d("Page.AccountManager.Label.InvalidTypeValue")),!m){window.$message.error(d("Page.AccountManager.Label.InputEmpty"));return}return m.split(/\r?\n/).filter(y=>y.trim()!=="").map(y=>{const A=y.split("|");let v=[];switch(w){case 1:v=["email","password","token","2fa"];break;case 2:v=["email","password","token"];break;case 3:v=["email","password","2fa"];break;case 4:v=Object.values(S.value);break;default:return{error:d("Page.AccountManager.Label.InvalidTypeValue")}}const $={};return A.forEach((V,q)=>{for(let Q=0;Q<v.length;Q++)v[Q]&&(Q===q&&($[v[Q]]=V),Q>q&&($[v[Q]]=""))}),$})},_=async()=>{const m=P(E.value,k.value);!m||m.length<1||(await a(m),n("update:show",!1),n("imported"))};return Ce(()=>o.show,m=>{m&&(S.value=s.value.reduce((w,h,x)=>(w[x]=null,w),{}))}),pn(()=>{E.value=null}),(m,w)=>{const h=Re,x=Ve,y=xe;return r(),C(Ae,{"is-show":o.show,width:"1110px",icon:"download",header:t(d)("Page.AccountManager.Label.AddAccount"),"submit-label":t(d)("Common.Button.Add"),"cancel-label":t(d)("Common.Button.Cancel"),"action-submit":_,loading:!1,onClose:w[2]||(w[2]=A=>n("update:show",!1))},{body:u(()=>[l(h,{value:t(E),"onUpdate:value":w[0]||(w[0]=A=>ge(E)?E.value=A:null),placeholder:t(d)("Page.AccountManager.Label.ImportAccountPlaceholder"),type:"textarea"},null,8,["value","placeholder"]),l(y,{align:"center",class:"mt-16px"},{default:u(()=>[M(T(t(d)("Page.AccountManager.Label.SelectFormat"))+" ",1),l(x,{value:t(k),"onUpdate:value":w[1]||(w[1]=A=>ge(k)?k.value=A:null),class:"w-250px",options:p},null,8,["value"])]),_:1}),t(k)===4?(r(),C(y,{key:0,align:"center",class:"mt-16px"},{default:u(()=>[(r(!0),b(ne,null,ce(t(s),(A,v)=>(r(),b("div",{key:v,class:"flex items-center gap-8px"},[l(x,{value:t(S)[v],"onUpdate:value":$=>t(S)[v]=$,"render-option":c,class:"w-110px type",options:t(D),placeholder:"",clearable:""},null,8,["value","onUpdate:value","options"]),v<t(s).length-1?(r(),b("span",Ba,"|")):N("",!0)]))),128))]),_:1})):N("",!0)]),_:1},8,["is-show","header","submit-label","cancel-label"])}}});const La=$e(Ua,[["__scopeId","data-v-3ba062c1"]]),Pa={key:0},Fa=ae({__name:"UpdateAccountModal",props:{show:Boolean,dataUpdate:Array,accounts:Array},emits:["update:show","imported"],setup(e,{emit:n}){const o=e,{customFields:d,insertAccounts:s}=Oe(),{getAppAccounts:a,updateMultiAccount:S}=ct(),D=G({}),c=re(()=>d.value.map(w=>{const h=x=>Object.values(D.value).findIndex(y=>y===x)!==-1;return{label:w.title,value:w.key,disabled:h(w.key)}})),p=({node:w,option:h})=>K(et,null,{trigger:()=>w,default:()=>h.label}),E=[{label:"UID | Password | Token | 2FA",value:1},{label:"Mail | Password | Token",value:2},{label:"Mail | Password | 2FA",value:3},{label:"Custom",value:4}],k=G(""),P=G(E[0].value),_=(w,h)=>{if(E.find(A=>A.value===h)||window.$message.error("Invalid type value"),!w){window.$message.error("Input data is empty");return}return w.split(/\r?\n/).filter(A=>A.trim()!=="").map(A=>{const v=A.split("|");let $=[];switch(h){case 1:$=["uid","password","token","2fa"];break;case 2:$=["email","password","token"];break;case 3:$=["email","password","2fa"];break;case 4:$=Object.values(D.value);break;default:return{error:"Invalid type value"}}const V={};return v.forEach((q,Q)=>{for(let J=0;J<$.length;J++)$[J]&&(J===Q&&(V[$[J]]=q),J>Q&&(V[$[J]]=""))}),V})},m=async()=>{const w=_(k.value,P.value);if(!w||w.length<1)return;const h=await o.dataUpdate.map(x=>o.accounts.find(y=>y.id===x));if(w.length!==h.length)window.$message.error(`Data length must be  equal ${h.length}`);else{const x=h.map((y,A)=>{const v={...y.data};for(const $ in w[A])v[$]=w[A][$];return{...y,data:v}});try{await S(x),n("update:show",!1),n("imported"),D.value={},k.value=""}catch(y){window.$message.error(y)}}};return Ce(()=>o.show,w=>{w&&(D.value=d.value.reduce((h,x,y)=>(h[y]=null,h),{}))}),(w,h)=>{const x=Re,y=Ve,A=xe;return r(),C(Ae,{"is-show":o.show,width:"1110px",icon:"download",header:"Update account","submit-label":`Update ${e.dataUpdate.length} accounts`,"action-submit":m,loading:!1,onClose:h[2]||(h[2]=v=>n("update:show",!1))},{body:u(()=>[l(x,{value:t(k),"onUpdate:value":h[0]||(h[0]=v=>ge(k)?k.value=v:null),type:"textarea"},null,8,["value"]),l(A,{align:"center",class:"mt-16px"},{default:u(()=>[M(" Select Format: "),l(y,{value:t(P),"onUpdate:value":h[1]||(h[1]=v=>ge(P)?P.value=v:null),class:"w-250px",options:E},null,8,["value"])]),_:1}),t(P)===4?(r(),C(A,{key:0,align:"center",class:"mt-16px"},{default:u(()=>[(r(!0),b(ne,null,ce(t(d),(v,$)=>(r(),b("div",{key:$,class:"flex items-center gap-8px"},[l(y,{value:t(D)[$],"onUpdate:value":V=>t(D)[$]=V,"render-option":p,class:"w-110px type",options:t(c),placeholder:"",clearable:""},null,8,["value","onUpdate:value","options"]),$<t(d).length-1?(r(),b("span",Pa,"|")):N("",!0)]))),128))]),_:1})):N("",!0)]),_:1},8,["is-show","submit-label"])}}});const za=$e(Fa,[["__scopeId","data-v-2bd02177"]]),ja={key:0},Ya=ae({__name:"CustomCopyModal",props:{show:Boolean},emits:["update:show","change"],setup(e,{emit:n}){const o=e,{customFields:d}=Oe(),s=G({}),a=re(()=>d.value.map(c=>{const p=E=>Object.values(s.value).findIndex(k=>k===E)!==-1;return{label:c.title,value:c.key,disabled:p(c.key)}})),S=({node:c,option:p})=>K(et,null,{trigger:()=>c,default:()=>p.label}),D=async()=>{const c=Object.values(s.value).filter(p=>!!p);c.length?(n("update:show",!1),n("change",c),s.value={}):window.$message.error("Please fill data ")};return Ce(()=>o.show,c=>{c&&(s.value=d.value.reduce((p,E,k)=>(p[k]=null,p),{}))}),(c,p)=>{const E=Ve,k=xe;return r(),C(Ae,{"is-show":o.show,width:"1000px",icon:"copyOutline",header:"Custom Copy","submit-label":"Copy","action-submit":D,loading:!1,onClose:p[0]||(p[0]=P=>n("update:show",!1))},{body:u(()=>[l(k,{align:"center",class:"mt-16px"},{default:u(()=>[(r(!0),b(ne,null,ce(t(d),(P,_)=>(r(),b("div",{key:_,class:"flex items-center gap-8px"},[l(E,{value:t(s)[_],"onUpdate:value":m=>t(s)[_]=m,"render-option":S,class:"w-110px type",options:t(a),placeholder:"",clearable:""},null,8,["value","onUpdate:value","options"]),_<t(d).length-1?(r(),b("span",ja,"|")):N("",!0)]))),128))]),_:1})]),_:1},8,["is-show"])}}});const Wa=$e(Ya,[["__scopeId","data-v-63285dc7"]]),Va={key:0},Ga={class:"app-input-modal mt-8px"},Ha={key:1},qa=ae({__name:"AppInputModal",props:{show:Boolean,appId:String},emits:["update:show"],setup(e,{emit:n}){const o=e,{appDetails:d,getAppDetails:s,updateApp:a}=Ht(),S=async()=>{await a(),n("update:show",!1)};return Ce(()=>o.show,D=>{D&&s(o.appId)}),(D,c)=>(r(),C(Ae,{width:"600px","is-show":o.show,header:"App input","submit-label":"Update","action-submit":S,onClose:c[0]||(c[0]=p=>n("update:show",!1))},{body:u(()=>{var p;return[(p=t(d))!=null&&p.input.length?(r(),b("div",Va,[g("div",Ga,[l(Nn,{"list-node":t(d).input},null,8,["list-node"])])])):(r(),b("span",Ha,"No input for this app."))]}),_:1},8,["is-show"]))}});var pt={props:{dragAndDrop:{type:Object,required:!0},DND_STATUS:{type:Object,required:!0},enableDragNodeOut:{type:Boolean,required:!0}}};function Xa(e,n,o,d,s,a){return o.dragAndDrop.dragNode!==null&&(o.enableDragNodeOut===!0||o.dragAndDrop.status===o.DND_STATUS.INTERNAL)&&o.dragAndDrop.clientX!==null?(r(),b("div",{key:0,class:"vue-tree-drag-image-wrapper",style:ke({"--mousex":o.dragAndDrop.clientX+"px","--mousey":o.dragAndDrop.clientY+"px","--dragNodeFontSize":o.dragAndDrop.dragNode.style.fontSize})},[we(e.$slots,"default")],4)):N("v-if",!0)}function xt(e,n){n===void 0&&(n={});var o=n.insertAt;if(!(!e||typeof document>"u")){var d=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",o==="top"&&d.firstChild?d.insertBefore(s,d.firstChild):d.appendChild(s),s.styleSheet?s.styleSheet.cssText=e:s.appendChild(document.createTextNode(e))}}var Ka=`
.vue-tree-wrapper .vue-tree-drag-image-wrapper[data-v-050cb55e] {
  display: block;
  position: absolute;
  z-index: 11;
  left: calc(var(--mousex) + var(--dragImageOffsetX) - var(--treeClientX));
  top: calc(var(--mousey) + var(--dragImageOffsetY) - var(--treeClientY));
  font-size: var(--dragNodeFontSize);
  text-indent: 0;
  text-wrap: nowrap;
}
`;xt(Ka);pt.render=Xa;pt.__scopeId="data-v-050cb55e";pt.__file="src/DragImage.vue";var ht={props:{dragAndDrop:{type:Object,required:!0}}};function Qa(e,n,o,d,s,a){return o.dragAndDrop.isDroppable&&o.dragAndDrop.overNode!==null&&o.dragAndDrop.overArea!==null?(r(),b("div",{key:0,class:Z(["vue-tree-drag-arrow-wrapper",`vue-tree-drag-arrow-${o.dragAndDrop.overArea}`]),style:ke({"--overNodeX":o.dragAndDrop.overRect.left+"px","--overNodeY":o.dragAndDrop.overRect.top+"px","--overNodeHeight":o.dragAndDrop.overRect.height+"px","--overNodeFullIndent":o.dragAndDrop.overNode.__.fullIndent})},[we(e.$slots,"default")],6)):N("v-if",!0)}var Za=`
.vue-tree-wrapper .vue-tree-drag-arrow-wrapper[data-v-07850de8] {
  height: var(--overNodeHeight);
  width: 0;
  border: 0;
  padding: 0;
  margin: 0;
  text-indent: 0;
  position: absolute;
  left: calc(var(--overNodeX) + var(--overNodeFullIndent) + 1em - var(--treeClientX));
  top: calc(var(--overNodeY) - var(--treeClientY));
  display: flex;
  flex-direction: column;
  flex-wrap: nowrap;
  align-items: flex-end;
  overflow: visible;
  z-index: 10;
  font-size: 12px;
}
.vue-tree-wrapper .vue-tree-drag-arrow-wrapper .vue-tree-drag-arrow[data-v-07850de8] {
  width: 1.7em;
  height: 2.6em;
  stroke: #5cb85c;
  fill: #5cb85c;
  overflow: visible;
}
.vue-tree-wrapper .vue-tree-drag-arrow-prev[data-v-07850de8] {
  justify-content: flex-start;
}
.vue-tree-wrapper .vue-tree-drag-arrow-prev[data-v-07850de8] > :first-child {
  transform: translateY(-50%);
}
.vue-tree-wrapper .vue-tree-drag-arrow-next[data-v-07850de8] {
  justify-content: flex-end;
}
.vue-tree-wrapper .vue-tree-drag-arrow-next[data-v-07850de8] > :first-child {
  transform: translateY(50%);
}
.vue-tree-wrapper .vue-tree-drag-arrow-self[data-v-07850de8] {
  justify-content: center;
}
.vue-tree-wrapper .vue-tree-drag-arrow-self[data-v-07850de8] > :first-child {
  transform: translateY(0);
}
.vue-tree-wrapper .vue-tree-node-drag-over-self .vue-tree-icon-and-title[data-v-07850de8] {
  background-color: var(--dragOverBgColor);
}
.vue-tree-wrapper .vue-tree-drag-image-wrapper .vue-tree-drag-image[data-v-07850de8] {
  text-indent: 0;
  font-size: var(--fontSize);
  width: auto;
  height: 1.5em;
  line-height: 1.5em;
  padding: 0.3em 0.5em;
  border: 0;
  border-radius: 5px;
  background-color: #bae7ff;
}
`;xt(Za);ht.render=Qa;ht.__scopeId="data-v-07850de8";ht.__file="src/DragArrow.vue";var ft={name:"vue-tree",components:{DragImage:pt,DragArrow:ht},props:{tree:{type:Array,default:function(){return[]}},defaultAttrs:{type:Object,default:function(){return{}}},treeId:{type:String,default:"default"},checkboxLinkage:{type:Boolean,default:!0},dragImageOffsetX:{type:String,default:"20px"},dragImageOffsetY:{type:String,default:"10px"},animationDuration:{type:String,default:"0.5s"},multiSelect:{type:Boolean,default:!1},pressEnterToBlur:{type:Boolean,default:!0},autoReload:{type:Boolean,default:!0},autoHideContextMenu:{type:Boolean,default:!0},enableDragNodeOut:{type:Boolean,default:!1},enableDropExternalElement:{type:Boolean,default:!1},dropToMove:{type:Boolean,default:!0},enableTouchSupport:{type:Boolean,default:!1},fnLoadData:{type:Function,required:!1,default:null},fnIsDroppable:{type:Function,required:!1,default:null},fnBeforeDrag:{type:Function,required:!1,default:null},fnBeforeCheck:{type:Function,required:!1,default:null},fnBeforeUncheck:{type:Function,required:!1,default:null},fnBeforeSelect:{type:Function,required:!1,default:null},fnBeforeExpand:{type:Function,required:!1,default:null},fnBeforeCollapse:{type:Function,required:!1,default:null},fnBeforeContextMenu:{type:Function,required:!1,default:null},fnAfterCalculate:{type:Function,required:!1,default:null},fnBeforeDrop:{type:Function,required:!1,default:null},fnCustomClasses:{type:Function,required:!1,default:null}},emits:["click","select","deselect","create","remove","focus","blur","edit","quitedit","input","keydown","keyup","keypress","dragstart","dragover","dragenter","dragleave","dragentertree","dragleavetree","dragend","drop","move","expand","collapse","check","uncheck","checkbox-state-change"],data(){return{nodes:JSON.parse(JSON.stringify(this.tree)),items:this.getItems(),autoIdCounter:0,treeRect:{clientX:0,clientY:0,width:0,height:0},treeRectInterval:null,spareDefaultAttrs:{selected:!1,directoryState:"expanded",checkbox:{show:!1,disable:!1,state:"unchecked"},style:{height:"2em",indent:"20px",fontSize:"12px",bgColor:"transparent",hoverBgColor:"#e7f4f9",selectedBgColor:"#bae7ff",dragOverBgColor:"#e7f4f9",iconMarginRight:"0.5em",extraFloatRight:!1,extraAlwaysVisible:!1,checkboxMarginRight:"0.1em",switcherMarginRight:"0.1em",titleMaxWidth:"none",titleOverflow:"clip",marginTop:0,marginBottom:0,showSwitcher:!0,showIcon:!0},__:{isEditing:!1,isSearchResult:!1,isDroppable:!0,dragOverArea:null,indent:"20px",height:"2em",titleMaxWidth:"none",titleTip:"",customClasses:[]}},emptyImage:null,dragAndDrop:{status:0,dragNode:null,overNode:null,overArea:null,overRect:{left:null,top:null,width:null,height:null},isDroppable:!1,clientX:null,clientY:null,isTouch:!1,from:null},DND_STATUS:{NONE:0,OUT_OF:1,INTERNAL:2,INTO:3},touchStartTarget:null,contextMenu:{node:null,event:null}}},watch:{tree:{handler(){this.autoReload===!0&&this.reload()},deep:!0}},methods:{getItems(){if(!Array.isArray(this.nodes))return[];let e=[],n=[];for(let s=this.nodes.length-1;s>=0;s--){let a=this.nodes[s];this.setAttr(a,"__","depth",1),this.setAttr(a,"__","parent",null),this.setAttr(a,"__","path",[]),this.setAttr(a,"__","pos",s),n.push(a)}for(;n.length>0;){let s=n.pop();if(e.push(s),s.hasChild){Object.prototype.hasOwnProperty.call(s,"children")||this.$set(s,"children",[]);for(let a=s.children.length-1;a>=0;a--){let S=s.children[a];this.setAttr(S,"__","depth",this.getAttr(s,"__","depth")+1),this.setAttr(S,"__","parent",s),this.setAttr(S,"__","path",[...this.getAttr(s,"__","path"),s]),this.setAttr(S,"__","pos",a),n.push(S)}}}let o=0,d=99999;for(let s=0;s<e.length;s++){const a=e[s];Object.prototype.hasOwnProperty.call(a,"id")||this.setAttr(a,"id",this.generateId());const S=this.getAttr(a,"__","depth"),D=S<=d;D&&(d=this.getDirectoryState(a)==="collapsed"?S:99999);const c=this.getAttr(a,"__","path"),p=this.getAttr(a,"style","indent");let E=0;if(c.length===1)E=p;else if(c.length===2){const m=this.getAttr(c[c.length-1],"style","indent");E=`calc(${p} + ${m})`}else if(c.length>2){const m=this.getAttr(c[c.length-1],"__","fullIndent");E="calc("+p+" + "+m.substring(5)}let k=this.getAttr(a,"style","titleMaxWidth"),P=E.toString();P.substring(0,3)==="calc"&&(P=P.substring(5,E.length-1)),k[0]==="-"?(k[k.length-1]==="%"?k=" - "+-1*parseFloat(k)/100+" * var(--treeWidth)":k=" - "+k.substring(1),k="calc(var(--treeWidth) - 1em - var(--switcherMarginRight) - 2px - 1em - var(--iconMarginRight) "+k+" - ("+P+"))"):k[k.length-1]==="%"&&(k="calc("+parseFloat(k)/100+" * var(--treeWidth))"),this.setAttr(a,"directoryState",this.getDirectoryState(a)),this.setAttr(a,"__","dpos",D?o:-1),this.setAttr(a,"__","gpos",s),this.setAttr(a,"__","isVisible",D),this.setAttr(a,"__","fullIndent",E),this.setAttr(a,"__","titleMaxWidth",k),this.getAttr(a,"__","isInited")||(this.setAttr(a,"selected",this.getAttr(a,"selected")),this.setAttr(a,"checkbox","show",this.getAttr(a,"checkbox","show")),this.setAttr(a,"checkbox","disable",this.getAttr(a,"checkbox","disable")),this.setAttr(a,"checkbox","state",this.getAttr(a,"checkbox","state")),this.setAttr(a,"style","height",this.getAttr(a,"style","height")),this.setAttr(a,"style","indent",this.getAttr(a,"style","indent")),this.setAttr(a,"style","fontSize",this.getAttr(a,"style","fontSize")),this.setAttr(a,"style","bgColor",this.getAttr(a,"style","bgColor")),this.setAttr(a,"style","hoverBgColor",this.getAttr(a,"style","hoverBgColor")),this.setAttr(a,"style","selectedBgColor",this.getAttr(a,"style","selectedBgColor")),this.setAttr(a,"style","dragOverBgColor",this.getAttr(a,"style","dragOverBgColor")),this.setAttr(a,"style","switcherMarginRight",this.getAttr(a,"style","switcherMarginRight")),this.setAttr(a,"style","iconMarginRight",this.getAttr(a,"style","iconMarginRight")),this.setAttr(a,"style","checkboxMarginRight",this.getAttr(a,"style","checkboxMarginRight")),this.setAttr(a,"style","extraFloatRight",this.getAttr(a,"style","extraFloatRight")),this.setAttr(a,"style","extraAlwaysVisible",this.getAttr(a,"style","extraAlwaysVisible")),this.setAttr(a,"style","titleMaxWidth",this.getAttr(a,"style","titleMaxWidth")),this.setAttr(a,"style","titleOverflow",this.getAttr(a,"style","titleOverflow")),this.setAttr(a,"style","marginTop",this.getAttr(a,"style","marginTop")),this.setAttr(a,"style","marginBottom",this.getAttr(a,"style","marginBottom")),this.setAttr(a,"style","showSwitcher",this.getAttr(a,"style","showSwitcher")),this.setAttr(a,"style","showIcon",this.getAttr(a,"style","showIcon")),this.setAttr(a,"__","isEditing",this.getAttr(a,"__","isEditing")),this.setAttr(a,"__","isSearchResult",this.getAttr(a,"__","isSearchResult")),this.setAttr(a,"__","dragOverArea",this.getAttr(a,"__","dragOverArea")),this.setAttr(a,"__","isDroppable",this.getAttr(a,"__","isDroppable")),this.setAttr(a,"__","titleTip",this.getAttr(a,"__","titleTip")),this.setAttr(a,"__","isInited",!0));let _=this.getAttr(a,"__","customClasses");typeof this.fnCustomClasses=="function"&&(_=this.fnCustomClasses(a),Array.isArray(_)||(_=[])),this.setAttr(a,"__","customClasses",_),typeof this.fnAfterCalculate=="function"&&this.fnAfterCalculate(a),D&&o++}return e},reload(){let e={};for(const d of this.items){const s=d.id;e[s]=d}let n=[],o=[];for(o.push({srcNodes:this.tree,desNodes:n});;){let d=o.pop();if(d===void 0)break;let s=d.srcNodes,a=d.desNodes;for(const S of s){const D=S.id,c=e[D]!==void 0?e[D]:{};for(let p in S)typeof S[p]!="object"?c[p]=S[p]:p==="style"||p==="checkbox"?(c[p]===void 0&&(c[p]={}),Object.assign(c[p],S[p])):p==="children"&&(c[p]=[]);S.children===void 0&&c.children!==void 0&&delete c.children,Array.isArray(S.children)&&o.push({srcNodes:S.children,desNodes:c.children}),a.push(c)}}this.nodes=n,this.refresh()},refresh(){this.items=this.getItems(),this.refreshAllDirectoryCheckboxState(),this.calcTreeRect()},getNestedTree(){return this.nodes},getFlatTree(){return this.items},getById(e){for(let n=0;n<this.items.length;n++)if(this.items[n].id===e)return this.items[n];return null},getByGpos(e){return e<0||e>this.items.length-1?null:this.items[e]},setAttr(){if(arguments.length===3){let e=arguments[0],n=arguments[1],o=arguments[2];e[n]=o}if(arguments.length===4){let e=arguments[0],n=arguments[1],o=arguments[2],d=arguments[3];Object.prototype.hasOwnProperty.call(e,n)===!1&&(e[n]={}),e[n][o]=d}},getAttr(){if(arguments.length===2){let e=arguments[0],n=arguments[1];if(Object.prototype.hasOwnProperty.call(e,n)===!0)return e[n];if(Object.prototype.hasOwnProperty.call(this.defaultAttrs,n)===!0)return this.defaultAttrs[n];if(Object.prototype.hasOwnProperty.call(this.spareDefaultAttrs,n)===!0)return this.spareDefaultAttrs[n]}if(arguments.length===3){let e=arguments[0],n=arguments[1],o=arguments[2];if(Object.prototype.hasOwnProperty.call(e,n)===!0&&Object.prototype.hasOwnProperty.call(e[n],o)===!0)return e[n][o];if(Object.prototype.hasOwnProperty.call(this.defaultAttrs,n)===!0&&Object.prototype.hasOwnProperty.call(this.defaultAttrs[n],o)===!0)return this.defaultAttrs[n][o];if(Object.prototype.hasOwnProperty.call(this.spareDefaultAttrs,n)===!0&&Object.prototype.hasOwnProperty.call(this.spareDefaultAttrs[n],o)===!0)return this.spareDefaultAttrs[n][o]}},setTitle(e,n){e.title!==n&&this.$emit("rename",e,e.title,n),e.title=n},generateId(){return this.autoIdCounter+=1,"vue-tree-node-"+this.autoIdCounter},getTitleElement(e){let n="title-"+e.id;return Object.prototype.hasOwnProperty.call(this.$refs,n)===!0?this.$refs[n][0].children[0]:null},mouseenterEvent(e){let n=this.getTitleElement(e),o=n.offsetWidth<n.scrollWidth?e.title:"";this.setAttr(e,"__","titleTip",o)},clickEvent(e,n){if(this.$emit("click",e,n),this.multiSelect)e.selected?this.deselect(e):this.select(e);else if(this.select(e),this.getAttr(e,"selected")===!0){let o=this.getSelected();for(let d of o)d!==e&&this.deselect(d)}this.autoHideContextMenu===!0&&this.hideContextMenuOnDisplay()},treeBlurEvent(e){let n=e.relatedTarget;this.contextMenu.node!==null&&this.autoHideContextMenu===!0&&!this.getElement(this.contextMenu.node).contains(n)&&this.hideContextMenuOnDisplay()},getElement(e){let n="node-"+e.id;return Object.prototype.hasOwnProperty.call(this.$refs,n)?this.$refs[n][0]:null},getOffset(e){let n=this.getElement(e),o=n.offsetLeft,d=n.offsetTop,s=n.offsetParent;for(;s;)o+=s.offsetLeft,d+=s.offsetTop,s=s.offsetParent;return{left:o,top:d}},calcTreeRect(){const e=this.$refs.tree.$el.getBoundingClientRect();this.treeRect.clientX!==e.x&&(this.treeRect.clientX=e.x),this.treeRect.clientY!==e.y&&(this.treeRect.clientY=e.y),this.treeRect.width!==e.width&&(this.treeRect.width=e.width),this.treeRect.height!==e.height&&(this.treeRect.height=e.height)},getSelected(){let e=[];for(let n=0;n<this.items.length;n++){let o=this.items[n];o.selected&&e.push(o)}return e},getSelectedOne(){let e=this.getSelected();return e.length>0?e[0]:null},deselect(e){this.setAttr(e,"selected",!1),this.$emit("deselect",e)},select(e){typeof this.fnBeforeSelect=="function"&&this.fnBeforeSelect(e)===!1||(this.setAttr(e,"selected",!0),this.$emit("select",e))},create(e,n,o){n===null?typeof o>"u"?this.nodes.push(e):typeof o=="number"&&this.nodes.splice(o,0,e):(n.hasChild=!0,Object.prototype.hasOwnProperty.call(n,"children")===!1&&(n.children=[]),typeof o>"u"?n.children.push(e):n.children.splice(o,0,e),this.setAttr(n,"directoryState",this.getDirectoryState(n))),this.refresh(),this.$emit("create",e)},createAndEdit(e,n,o){this.create(e,n,o),this.expand(n),_t().then(()=>{let d=this.getById(e.id);this.edit(d)})},remove(e){let n=this.getAttr(e,"__","parent"),o=this.getAttr(e,"__","pos");n===null?this.nodes.splice(o,1):(n.children.splice(o,1),n.hasChild=n.children.length>0,this.setAttr(n,"directoryState",this.getDirectoryState(n))),this.refresh(),this.$emit("remove",e)},move(e,n,o){let d=this.getAttr(e,"__","parent"),s=this.getAttr(e,"__","pos");d===null?this.nodes.splice(s,1):(d.children.splice(s,1),d.hasChild=d.children.length>0,this.setAttr(d,"directoryState",this.getDirectoryState(d))),d===n&&s<o&&(o-=1),n===null?typeof o>"u"?this.nodes.push(e):typeof o=="number"&&this.nodes.splice(o,0,e):(n.hasChild=!0,Object.prototype.hasOwnProperty.call(n,"children")===!1&&(n.children=[]),typeof o>"u"?n.children.push(e):n.children.splice(o,0,e),this.setAttr(n,"directoryState",this.getDirectoryState(n))),this.refresh(),this.$emit("move",e,d,s,n,o)},traverse(e){for(let n=0;n<this.items.length;n++){let o=this.items[n];e(o)}},search(e,n){let o=[];for(let d of this.items){let s=typeof n=="function"?n(d,e):d.title.indexOf(e)>-1;this.setAttr(d,"__","isSearchResult",s),s&&o.push(d)}for(let d of o){let s=this.getAttr(d,"__","path");for(let a of s)this.setAttr(a,"directoryState","expanded")}return this.refresh(),o},clearSearchResult(){for(let e of this.items)this.setAttr(e,"__","isSearchResult",!1)},sort(e,n,o){if(typeof o!="function"&&(o=function(d,s){return d.title.localeCompare(s.title)}),e===null){if(this.nodes.sort(o),n)for(let d of this.nodes)d.hasChild&&this.sort(d,n,o)}else if(e.hasChild&&(e.children.sort(o),n))for(let d of e.children)d.hasChild&&this.sort(d,n,o);this.refresh()},getDirectoryState(e){if(!e.hasChild)return null;let n=this.getAttr(e,"directoryState");return n===null&&(n=Object.prototype.hasOwnProperty.call(this.defaultAttrs,"directoryState")===!0&&this.defaultAttrs.directoryState!==null?this.defaultAttrs.directoryState:"expanded"),n},expand(e){if(!(!e.hasChild||this.getDirectoryState(e)!="collapsed")&&!(typeof this.fnBeforeExpand=="function"&&this.fnBeforeExpand(e)===!1)){if(this.fnLoadData===null){this.setAttr(e,"directoryState","expanded"),this.refresh(),this.$emit("expand",e);return}if(this.fnLoadData!=null){this.setAttr(e,"directoryState","loading");let o=this.fnLoadData(e);if(typeof o.then=="function"){let s=o;s.then((function(a){e.children=a,this.setAttr(e,"directoryState","expanded"),this.refresh(),this.$emit("expand",e)}).bind(this)),s.catch((function(a){this.setAttr(e,"directoryState","collapsed"),console.log(a)}).bind(this));return}let d=o;Array.isArray(d)&&d.length>0&&(e.children=d,this.setAttr(e,"directoryState","expanded"),this.refresh(),this.$emit("expand",e))}}},collapse(e){!e.hasChild||this.getDirectoryState(e)!=="expanded"||typeof this.fnBeforeCollapse=="function"&&this.fnBeforeCollapse(e)===!1||(this.setAttr(e,"directoryState","collapsed"),this.refresh(),this.$emit("collapse",e))},expandAncestors(e){for(let n of e.__.path)this.expand(n)},contextMenuEvent(e,n){if(!(typeof this.fnBeforeContextMenu=="function"&&this.fnBeforeContextMenu(e,n)===!1)){if(this.contextMenu.node!==e){let o=this.getSelected();for(let d of o)d!==e&&this.deselect(d);this.select(e),this.hideContextMenuOnDisplay()}this.setAttr(e,"__","showContextMenu",!0),this.contextMenu.node=e,this.contextMenu.event=n,n.preventDefault()}},hideContextMenuOnDisplay(){this.contextMenu.node!==null&&this.setAttr(this.contextMenu.node,"__","showContextMenu",!1)},getHiddenTitleWidth(e){let n="title-hidden-"+e.id;return Object.prototype.hasOwnProperty.call(this.$refs,n)===!0?`calc(${this.$refs[n][0].clientWidth}px + 2em)`:e.title.length+1+"ch"},getNewTitle(e){return e.title},edit(e){this.setAttr(e,"__","inputWidth",e.title.length+1+"em"),this.setAttr(e,"__","isEditing",!0),this.$emit("edit",e),_t().then((function(){this.setAttr(e,"__","inputWidth",this.getHiddenTitleWidth(e));let n=this.getTitleElement(e);n.select(),n.focus()}).bind(this))},quitEdit(e){this.setAttr(e,"__","isEditing",!1),_t().then((function(){let n=this.getTitleElement(e);n.scrollLeft=0}).bind(this)),this.$emit("quitedit",e)},focus(e){this.getAttr(e,"__","isEditing")===!0&&this.getTitleElement(e).focus()},blur(e){this.getAttr(e,"__","isEditing")===!0&&this.getTitleElement(e).blur()},focusEvent(e,n){this.$emit("focus",e,n)},blurEvent(e,n){this.$emit("blur",e,n)},inputEvent(e,n){this.$emit("input",e,n)},keydownEvent(e,n){this.pressEnterToBlur&&n.keyCode===13&&this.blur(e),this.$emit("keydown",e,n)},keyupEvent(e,n){this.setAttr(e,"__","inputWidth",this.getHiddenTitleWidth(e)),this.$emit("keyup",e,n)},keypressEvent(e,n){this.$emit("keypress",e,n)},setGlobalCache(){if(Object.prototype.hasOwnProperty.call(window,"vueTreeCache")===!1&&(window.vueTreeCache={}),arguments.length===2){let e=arguments[0],n=arguments[1];window.vueTreeCache[e]=n}else if(arguments.length===3){let e=arguments[0],n=arguments[1],o=arguments[2];Object.prototype.hasOwnProperty.call(window.vueTreeCache,e)===!1&&(window.vueTreeCache[e]={}),window.vueTreeCache[e][n]=o}},getGlobalCache(){var e,n,o;if(arguments.length===1){let d=arguments[0];return(e=window==null?void 0:window.vueTreeCache)==null?void 0:e[d]}else if(arguments.length===2){let d=arguments[0],s=arguments[1];return(o=(n=window==null?void 0:window.vueTreeCache)==null?void 0:n[d])==null?void 0:o[s]}},defaultIsDroppable(){if(this.dragAndDrop.dragNode===this.dragAndDrop.overNode)return!1;let e=this.getAttr(this.dragAndDrop.overNode,"__","path");for(let n of e)if(n===this.dragAndDrop.dragNode)return!1;if(this.dragAndDrop.dragNode.__.parent===this.dragAndDrop.overNode.__.parent){let n=this.getAttr(this.dragAndDrop.dragNode,"__","pos"),o=this.getAttr(this.dragAndDrop.overNode,"__","pos");if(this.dragAndDrop.overArea==="prev"&&o===n+1||this.dragAndDrop.overArea==="next"&&o===n-1)return!1}return!0},isDroppable(){return this.dragAndDrop.status===this.DND_STATUS.INTERNAL&&this.dropToMove===!0&&this.defaultIsDroppable()===!1?!1:typeof this.fnIsDroppable=="function"?this.fnIsDroppable(this.dragAndDrop):!0},dragStartEvent(e,n){if(typeof this.fnBeforeDrag=="function"&&this.fnBeforeDrag(e)===!1){n.preventDefault();return}this.dragAndDrop.status=this.DND_STATUS.INTERNAL,this.dragAndDrop.dragNode=e,this.dragAndDrop.overNode=e,this.dragAndDrop.isTouch=!1,this.dragAndDrop.from=null,n.dataTransfer.setData("vue-tree",JSON.stringify({treeId:this.treeId,nodeId:e.id})),n.dataTransfer.setDragImage(this.emptyImage,0,0),n.dataTransfer.dropEffect="move",n.dataTransfer.effectAllowed="all",this.setGlobalCache("currentDragAndDrop",{isTouch:!1,fromTreeId:this.treeId,fromNodeId:e.id,beginTimestamp:Date.now()}),this.dragEnter(e),this.$emit("dragstart",this.dragAndDrop,n)},calcDragAndDropStatus(e,n){if(!this.$refs.tree)return;let o=this.$refs.tree.$el.getBoundingClientRect(),d=e>o.left&&e<o.right&&n>o.top&&n<o.bottom,s=this.dragAndDrop.status;d===!1&&this.dragAndDrop.dragNode!==null?(this.dragAndDrop.status=this.DND_STATUS.OUT_OF,this.dragAndDrop.overNode!==null&&this.dragLeave(this.dragAndDrop.overNode),s===this.DND_STATUS.INTERNAL&&this.$emit("dragleavetree",this.dragAndDrop)):d===!0&&this.dragAndDrop.dragNode!==null?(this.dragAndDrop.status=this.DND_STATUS.INTERNAL,s===this.DND_STATUS.OUT_OF&&this.$emit("dragentertree",this.dragAndDrop)):d===!0&&this.dragAndDrop.dragNode===null?(this.dragAndDrop.status=this.DND_STATUS.INTO,s===this.DND_STATUS.NONE&&(this.dragAndDrop.from={treeId:this.getGlobalCache("currentDragAndDrop","fromTreeId"),nodeId:this.getGlobalCache("currentDragAndDrop","fromNodeId")},this.$emit("dragentertree",this.dragAndDrop))):d===!1&&this.dragAndDrop.dragNode===null&&(this.dragAndDrop.status=this.DND_STATUS.NONE,s===this.DND_STATUS.INTO&&(this.dragLeave(this.dragAndDrop.overNode),this.$emit("dragleavetree",this.dragAndDrop),this.dragAndDrop.from=null))},globalDragOverEvent(e){e.preventDefault(),this.dragAndDrop.clientX=Math.floor(e.clientX),this.dragAndDrop.clientY=Math.floor(e.clientY),this.calcDragAndDropStatus(e.clientX,e.clientY)},dragOverEvent(e,n){if(this.dragAndDrop.status===this.DND_STATUS.INTO&&this.enableDropExternalElement===!1||this.dragAndDrop.status===this.DND_STATUS.NONE)return;let o=!1;this.dragAndDrop.overNode!==e&&(o=!0,this.dragLeave(this.dragAndDrop.overNode),this.dragEnter(e));const d=n.clientY-this.dragAndDrop.overRect.top,s=this.dragAndDrop.overRect.height;let a="";d<s*.33?a="prev":s-d<s*.33?a="next":a="self",a&&a!==this.dragAndDrop.overArea&&(this.dragAndDrop.overArea=a,o=!0),o&&(this.dragAndDrop.isDroppable=this.isDroppable(),this.dragAndDrop.isDroppable&&this.getElement(e).classList.add(`vue-tree-node-drag-over-${a}`)),n.preventDefault(),this.setAttr(e,"__","dragOverArea",this.dragAndDrop.overArea),this.setAttr(e,"__","isDroppable",this.dragAndDrop.isDroppable),this.$emit("dragover",this.dragAndDrop)},dragEnterEvent(e){e.preventDefault()},dragEnter(e){this.dragAndDrop.overNode=e;const o=this.getElement(e).getBoundingClientRect();this.dragAndDrop.overRect={left:o.left,top:o.top,width:o.width,height:o.height},this.$emit("dragenter",this.dragAndDrop,e)},dragLeave(e){if(e!==null){this.dragAndDrop.overNode=null;const n=this.getElement(e);n.classList.remove("vue-tree-node-drag-over-prev"),n.classList.remove("vue-tree-node-drag-over-next"),n.classList.remove("vue-tree-node-drag-over-self")}this.$emit("dragleave",this.dragAndDrop,e)},dragEndEvent(e){this.dragAndDrop.overNode!==null&&this.dragLeave(this.dragAndDrop.overNode),this.dragAndDrop.dragNode!==null&&(this.setGlobalCache("currentDragAndDrop","endTimestamp",Date.now()),this.setGlobalCache("prevDragAndDrop",this.getGlobalCache("currentDragAndDrop")),this.setGlobalCache("currentDragAndDrop",{})),this.dragAndDrop.dragNode=null,this.dragAndDrop.overArea=null,this.dragAndDrop.overRect={left:null,top:null,width:null,height:null},this.dragAndDrop.clientX=null,this.dragAndDrop.clientY=null,this.dragAndDrop.status=this.DND_STATUS.NONE,this.dragAndDrop.isTouch=!1,this.dragAndDrop.from=null,this.$emit("dragend",this.dragAndDrop,e)},moveOnDrop(){if(this.dragAndDrop.status!==this.DND_STATUS.INTERNAL)return;let e=this.dragAndDrop.dragNode,n=this.dragAndDrop.overNode,o=this.getAttr(n,"__","pos"),d=this.getAttr(n,"__","parent");switch(this.dragAndDrop.overArea){case"prev":this.move(e,d,o);break;case"next":this.move(e,d,o+1);break;case"self":this.move(e,n);break}},dropEvent(e){this.dragAndDrop.status===this.DND_STATUS.INTO&&this.enableDropExternalElement===!1||this.dragAndDrop.status!==this.DND_STATUS.NONE&&this.dragAndDrop.isDroppable!==!1&&(typeof this.fnBeforeDrop=="function"&&this.fnBeforeDrop(this.dragAndDrop)===!1||(this.dragAndDrop.status===this.DND_STATUS.INTERNAL&&this.dropToMove===!0?this.moveOnDrop():(this.$emit("drop",this.getShallowCopyOfDragAndDrop(),e),this.dragAndDrop.status===this.DND_STATUS.INTO&&this.dragLeave(this.dragAndDrop.overNode))))},getShallowCopyOfDragAndDrop(){return{isTouch:this.dragAndDrop.isTouch,status:this.dragAndDrop.status,dragNode:this.dragAndDrop.dragNode,overNode:this.dragAndDrop.overNode,overArea:this.dragAndDrop.overArea,from:this.dragAndDrop.from}},getDragFrom(){let e=this.getGlobalCache("currentDragAndDrop","fromTreeId");e==null&&(e=this.getGlobalCache("prevDragAndDrop","fromTreeId"));let n=this.getGlobalCache("currentDragAndDrop","fromNodeId");return n==null&&(n=this.getGlobalCache("prevDragAndDrop","fromNodeId")),{treeId:e,nodeId:n}},touchStartEvent(e,n){if(this.enableTouchSupport!==!1&&!(n.touches.length>1)){if(typeof this.fnBeforeDrag=="function"&&this.fnBeforeDrag(e)===!1){n.preventDefault();return}this.touchStartTarget=n.touches.item(0).target,this.dragAndDrop.status=this.DND_STATUS.INTERNAL,this.dragAndDrop.dragNode=e,this.dragAndDrop.overNode=e,this.dragAndDrop.isTouch=!0,this.dragAndDrop.from=null,this.dragEnter(e),this.setGlobalCache("currentDragAndDrop",{isTouch:!0,fromTreeId:this.treeId,fromNodeId:e.id,touchStartTarget:n.touches.item(0).target,beginTimestamp:Date.now()}),this.$emit("dragstart",this.dragAndDrop,n)}},globalTouchEndEvent(e){if(this.enableTouchSupport===!1){this.dragEndEvent(e);return}if(e.changedTouches.length>1){this.dragEndEvent(e);return}(this.dragAndDrop.status===this.DND_STATUS.INTERNAL||this.dragAndDrop.status===this.DND_STATUS.INTO)&&this.dropEvent(e),this.dragEndEvent(e)},globalTouchCancelEvent(e){this.dragEndEvent(e)},globalTouchMoveEvent(e){if(this.enableTouchSupport===!1||e.touches.length>1)return;this.dragAndDrop.dragNode!==null&&e.preventDefault();let n=e.touches.item(0);this.dragAndDrop.clientX=n.clientX,this.dragAndDrop.clientY=n.clientY,this.dragAndDrop.isTouch=!0,this.calcDragAndDropStatus(n.clientX,n.clientY),!(this.dragAndDrop.status===this.DND_STATUS.INTO&&this.enableDropExternalElement===!1)&&(this.dragAndDrop.status===this.DND_STATUS.INTERNAL||this.dragAndDrop.status===this.DND_STATUS.INTO)&&this.whichNodeIsBeingTouchedOver(e)},whichNodeIsBeingTouchedOver(e){if(this.dragAndDrop.status!==this.DND_STATUS.INTERNAL&&this.dragAndDrop.status!==this.DND_STATUS.INTO)return;let n=e.touches.item(0),o=1,d=0;if(this.dragAndDrop.overNode!==null){d=this.getAttr(this.dragAndDrop.overNode,"__","gpos");let a=this.getElement(this.dragAndDrop.overNode),S=this.getOffset(this.dragAndDrop.overNode),D=a.clientHeight;n.pageY<S.top?o=-1:n.pageY>S.top+D&&(o=1)}let s=d;for(;s>=0&&s<this.items.length;){let a=this.getByGpos(s),S=this.getElement(a),D=this.getOffset(a),c=S.clientHeight,p=n.pageY-D.top;if(p<0||p>c){s+=o;continue}e.clientX=n.clientX,e.clientY=n.clientY,this.dragOverEvent(a,e);break}},isTheTouchOperationFromTheTree(e){return e.type==="touchend"&&e.changedTouches.item(0).target===this.touchStartTarget||e.type==="touchmove"&&e.touches.item(0).target===this.touchStartTarget||e.type==="touchcancel"&&e.changedTouches.item(0).target===this.touchStartTarget},setCheckboxState(e,n){if(this.getAttr(e,"checkbox","show")===!1)return;let o=this.getAttr(e,"checkbox","state");o!==n&&(this.setAttr(e,"checkbox","state",n),this.$emit("checkbox-state-change",e,o,n))},check(e){if(this.getAttr(e,"checkbox","show")===!1||this.getAttr(e,"checkbox","disable")===!0||typeof this.fnBeforeCheck=="function"&&this.fnBeforeCheck(e)===!1)return;if(!this.checkboxLinkage){this.setCheckboxState(e,"checked"),this.$emit("check",e);return}let n=this.getAttr(e,"__","gpos"),o=this.getAttr(e,"__","depth");for(let a=n;a<this.items.length&&!(a>n&&this.getAttr(this.items[a],"__","depth")<=o);a++)!this.items[a].hasChild&&this.getAttr(this.items[a],"checkbox","show")===!0&&this.getAttr(this.items[a],"checkbox","disable")===!1&&this.setCheckboxState(this.items[a],"checked");let d=this.getAttr(e,"__","path"),s=d.length>0?d[0]:e;this.refreshDirectoryCheckboxStateRecursively(s),this.$emit("check",e)},uncheck(e){if(this.getAttr(e,"checkbox","show")===!1||this.getAttr(e,"checkbox","disable")===!0||typeof this.fnBeforeUncheck=="function"&&this.fnBeforeUncheck(e)===!1)return;if(!this.checkboxLinkage){this.setCheckboxState(e,"unchecked"),this.$emit("uncheck",e);return}let n=this.getAttr(e,"__","gpos"),o=this.getAttr(e,"__","depth");for(let a=n;a<this.items.length&&!(a>n&&this.getAttr(this.items[a],"__","depth")<=o);a++)!this.items[a].hasChild&&this.getAttr(this.items[a],"checkbox","show")===!0&&this.getAttr(this.items[a],"checkbox","disable")===!1&&this.setCheckboxState(this.items[a],"unchecked");let d=this.getAttr(e,"__","path"),s=d.length>0?d[0]:e;this.refreshDirectoryCheckboxStateRecursively(s),this.$emit("uncheck",e)},toggleCheckbox(e){switch(this.getAttr(e,"checkbox","state")){case"checked":this.uncheck(e);break;case"unchecked":this.check(e);break;case"undetermined":this.uncheck(e);break}},refreshAllDirectoryCheckboxState(){if(this.checkboxLinkage)for(let e of this.nodes)this.refreshDirectoryCheckboxStateRecursively(e)},refreshDirectoryCheckboxStateRecursively(e){if(!this.checkboxLinkage)return;if(this.getAttr(e,"checkbox","show")===!1)return{hasChecked:!1,hasUnchecked:!1};if(!e.hasChild){let d=this.getAttr(e,"checkbox","state");return{hasChecked:d==="checked",hasUnchecked:d==="unchecked"}}let n=!1,o=!1;for(let d of e.children){let s=this.refreshDirectoryCheckboxStateRecursively(d);n=n||s.hasChecked,o=o||s.hasUnchecked}return n&&o?this.setCheckboxState(e,"undetermined"):n&&!o?this.setCheckboxState(e,"checked"):!n&&o?this.setCheckboxState(e,"unchecked"):!n&&!o&&this.setCheckboxState(e,this.getAttr(e,"checkbox","state")),{hasChecked:n,hasUnchecked:o}},getByCheckboxState(e){let n=[];for(let o=0;o<this.items.length;o++)this.getAttr(this.items[o],"checkbox","show")===!0&&this.getAttr(this.items[o],"checkbox","state")===e&&n.push(this.items[o]);return n},getChecked(){return this.getByCheckboxState("checked")},getUndetermined(){return this.getByCheckboxState("undetermined")},getUnchecked(){return this.getByCheckboxState("unchecked")},toggleDirectoryState(e){let n=this.getDirectoryState(e);n==="expanded"?this.collapse(e):n==="collapsed"&&this.expand(e)},resizeTree(){this.calcTreeRect()}},mounted(){this.refresh(),document.body.addEventListener("dragover",this.globalDragOverEvent.bind(this),{capture:!0}),this.emptyImage=new Image,this.emptyImage.src="data:image/gif;base64,R0lGODlhAQABAIAAAAUEBAAAACwAAAAAAQABAAACAkQBADs=",document.body.addEventListener("touchcancel",this.globalTouchCancelEvent.bind(this),{capture:!0}),document.body.addEventListener("touchmove",this.globalTouchMoveEvent.bind(this),{capture:!0,passive:!1}),document.body.addEventListener("touchend",this.globalTouchEndEvent.bind(this),{capture:!0,passive:!1}),this.calcTreeRect(),this.treeRectInterval=setInterval(this.calcTreeRect.bind(this),300)},beforeUnmount(){clearInterval(this.treeRectInterval),document.removeEventListener("dragover",this.globalDragOverEvent.bind(this),{capture:!0}),document.removeEventListener("touchend",this.globalTouchEndEvent.bind(this),{capture:!0}),document.removeEventListener("touchmove",this.globalTouchMoveEvent.bind(this),{capture:!0}),document.removeEventListener("touchcancel",this.globalTouchCancelEvent.bind(this),{capture:!0})}};const Ge=e=>(Ot("data-v-5cb0774a"),e=e(),Rt(),e),Ja=["draggable","onClick","onContextmenu","onDragstart","onDragover","onTouchstart"],eo=["onClick"],to={key:0,class:"vue-tree-switcher-icon vue-tree-switcher-expanded",viewBox:"-7 -3 46 46",fill:"currentColor","aria-hidden":"true"},no=Ge(()=>g("path",{d:"M30 10 L16 26 2 10 Z"},null,-1)),ao=[no],oo={key:1,class:"vue-tree-switcher-icon vue-tree-switcher-collapsed",viewBox:"-7 -3 46 46",fill:"currentColor","aria-hidden":"true"},so=Ge(()=>g("path",{d:"M10 30 L26 16 10 2 Z"},null,-1)),lo=[so],ro={key:2,class:"vue-tree-switcher-icon vue-tree-switcher-loading",viewBox:"0 0 32 32",fill:"none",stroke:"currentcolor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"},io=Ge(()=>g("path",{d:"M29 16 C29 22 24 29 16 29 8 29 3 22 3 16 3 10 8 3 16 3 21 3 25 6 27 9 M20 10 L27 9 28 2"},null,-1)),co=[io],uo=["onClick"],po={key:0,class:"vue-tree-icon-wrapper"},ho={key:0,viewBox:"0 0 32 32",fill:"none",stroke:"currentcolor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",class:"vue-tree-icon"},fo=Ge(()=>g("path",{d:"M2 26 L30 26 30 7 14 7 10 4 2 4 Z M30 12 L2 12"},null,-1)),go=[fo],vo={key:1,viewBox:"0 0 32 32",fill:"none",stroke:"currentcolor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",class:"vue-tree-icon"},mo=Ge(()=>g("path",{d:"M6 2 L6 30 26 30 26 10 18 2 Z M18 2 L18 10 26 10"},null,-1)),_o=[mo],yo=["onUpdate:modelValue","title","onKeydown","onKeyup","onKeypress","onInput","onFocus","onBlur","onMouseenter"],bo=["title","onMouseenter"],wo={class:"vue-tree-extra-wrapper"},xo={class:"vue-tree-drag-image"},Ao=Ge(()=>g("svg",{class:"vue-tree-drag-arrow",viewBox:"0 0 24 24"},[g("path",{d:"M16.01 11H4v2h12.01v3L20 12l-3.99-4z"})],-1));function ko(e,n,o,d,s,a){const S=St("drag-image"),D=St("drag-arrow");return r(),b("div",{class:"vue-tree-wrapper",tabindex:"1",onDragend:n[2]||(n[2]=c=>a.dragEndEvent(c)),onBlur:n[3]||(n[3]=function(){return a.treeBlurEvent&&a.treeBlurEvent(...arguments)}),style:ke({"--dragImageOffsetX":o.dragImageOffsetX,"--dragImageOffsetY":o.dragImageOffsetY,"--animationDuration":o.animationDuration,"--treeClientX":s.treeRect.clientX+"px","--treeClientY":s.treeRect.clientY+"px","--treeWidth":s.treeRect.width+"px"})},[l(gn,{tag:"ul",name:"vue-tree-node",class:"vue-tree",ref:"tree"},{default:u(()=>[(r(!0),b(ne,null,ce(s.items,c=>(r(),b(ne,null,[c.__.isVisible?(r(),b("li",{class:Z(["vue-tree-node",{"vue-tree-node-selected":c.selected},{"vue-tree-node-search-result":c.__.isSearchResult},...c.__.customClasses]),style:ke({"--fullIndent":c.__.fullIndent,"--height":c.style.height,"--fontSize":c.style.fontSize,"--bgColor":c.style.bgColor,"--hoverBgColor":c.style.hoverBgColor,"--selectedBgColor":c.style.selectedBgColor,"--dragOverBgColor":c.style.dragOverBgColor,"--switcherMarginRight":c.style.switcherMarginRight,"--iconMarginRight":c.style.iconMarginRight,"--checkboxMarginRight":c.style.checkboxMarginRight,"--extraFloat":c.style.extraFloatRight?"right":"none","--extraDisplay":c.style.extraAlwaysVisible?"inline-block":"none","--titleMaxWidth":c.__.titleMaxWidth,"--titleOverflow":c.style.titleOverflow,"--marginTop":c.style.marginTop,"--marginBottom":c.style.marginBottom}),draggable:!c.__.isEditing,onClick:p=>a.clickEvent(c,p),onContextmenu:p=>a.contextMenuEvent(c,p),onDragstart:p=>a.dragStartEvent(c,p),onDragover:p=>a.dragOverEvent(c,p),onDrop:n[0]||(n[0]=p=>a.dropEvent(p)),onDragenter:n[1]||(n[1]=p=>a.dragEnterEvent(p)),onTouchstart:p=>a.touchStartEvent(c,p),ref_for:!0,ref:"node-"+c.id,key:c.id},[c.style.showSwitcher?(r(),b("span",{key:0,class:"vue-tree-switcher-wrapper",onClick:It(p=>a.toggleDirectoryState(c),["stop"])},[we(e.$slots,"switcher",{node:c},()=>[c.directoryState==="expanded"?(r(),b("svg",to,ao)):c.directoryState==="collapsed"?(r(),b("svg",oo,lo)):c.directoryState==="loading"?(r(),b("svg",ro,co)):N("v-if",!0)])],8,eo)):N("v-if",!0),c.checkbox.show?(r(),b("span",{key:1,class:"vue-tree-checkbox-wrapper",onClick:It(p=>a.toggleCheckbox(c),["stop"])},[we(e.$slots,"checkbox",{node:c},()=>[g("span",{class:Z({"vue-tree-checkbox":!0,"vue-tree-checkbox-checked":c.checkbox.state==="checked","vue-tree-checkbox-unchecked":c.checkbox.state==="unchecked","vue-tree-checkbox-undetermined":c.checkbox.state==="undetermined","vue-tree-checkbox-disabled":c.checkbox.disable})},null,2)])],8,uo)):N("v-if",!0),g("span",{class:"vue-tree-icon-and-title",ref_for:!0,ref:"icon-and-title-"+c.id},[c.style.showIcon?(r(),b("span",po,[we(e.$slots,"icon",{node:c},()=>[c.hasChild&&(c.directoryState==="collapsed"||c.directoryState==="expanded")?(r(),b("svg",ho,go)):(r(),b("svg",vo,_o))])])):N("v-if",!0),g("span",{class:"vue-tree-title-wrapper",ref_for:!0,ref:"title-"+c.id},[c.__.isEditing?we(e.$slots,"input",{key:0,node:c},()=>[hn(g("input",{type:"text","onUpdate:modelValue":p=>c.title=p,class:"vue-tree-title vue-tree-title-editing",title:c.__.titleTip,ref_for:!0,ref:"title-input-"+c.id,style:ke({width:c.__.inputWidth}),onKeydown:p=>a.keydownEvent(c,p),onKeyup:p=>a.keyupEvent(c,p),onKeypress:p=>a.keypressEvent(c,p),onInput:p=>a.inputEvent(c,p),onFocus:p=>a.focusEvent(c,p),onBlur:p=>a.blurEvent(c),onMouseenter:p=>a.mouseenterEvent(c)},null,44,yo),[[fn,c.title]]),g("span",{ref_for:!0,ref:"title-hidden-"+c.id,class:"vue-tree-title vue-tree-title-editing vue-tree-title-hidden"},T(c.title),513)]):we(e.$slots,"title",{key:1,node:c},()=>[g("span",{class:"vue-tree-title",title:c.__.titleTip,onMouseenter:p=>a.mouseenterEvent(c)},T(c.title),41,bo)])],512)],512),g("span",wo,[we(e.$slots,"extra",{node:c})]),c.__.showContextMenu?(r(),b("div",{key:2,class:"vue-tree-contextmenu-wrapper",style:ke({"--mousex":s.contextMenu.event.clientX+"px","--mousey":s.contextMenu.event.clientY+"px"})},[we(e.$slots,"contextmenu",{node:c})],4)):N("v-if",!0)],46,Ja)):N("v-if",!0)],64))),256))]),_:3},512),l(S,{dragAndDrop:s.dragAndDrop,DND_STATUS:s.DND_STATUS,enableDragNodeOut:o.enableDragNodeOut},{default:u(()=>[we(e.$slots,"drag-image",{node:s.dragAndDrop.dragNode,dnd:s.dragAndDrop},()=>[g("span",xo,T(s.dragAndDrop.dragNode.title),1)])]),_:3},8,["dragAndDrop","DND_STATUS","enableDragNodeOut"]),l(D,{dragAndDrop:s.dragAndDrop},{default:u(()=>[we(e.$slots,"drag-arrow",{node:s.dragAndDrop.overNode,dnd:s.dragAndDrop},()=>[Ao])]),_:3},8,["dragAndDrop"])],36)}var Do=`
.vue-tree-wrapper[data-v-5cb0774a] {
  position: relative;
}
.vue-tree-wrapper .vue-tree[data-v-5cb0774a] {
  position: relative;
  padding-inline-start: 0;
  text-align: left;
  list-style: none;
  overflow: visible;
  padding-top: 5px;
  padding-bottom: 5px;
  white-space: nowrap;
  width: 100%;
  margin-top: 0;
}
.vue-tree[data-v-5cb0774a]:focus {
  outline: 0;
}
.vue-tree-node[data-v-5cb0774a] {
  cursor: pointer;
  position: relative;
  line-height: var(--height);
  font-size: var(--fontSize);
  margin-top: var(--marginTop);
  margin-bottom: var(--marginBottom);
  text-indent: var(--fullIndent);
  background-color: var(--bgColor);
  transition: all var(--animationDuration);
}
.vue-tree-node-enter-to[data-v-5cb0774a], .vue-tree-node-leave-from[data-v-5cb0774a] {
  height: var(--height);
  opacity: 1;
}
.vue-tree-node-enter-from[data-v-5cb0774a] {
  height: 3px;
  opacity: 0;
}
.vue-tree-node-leave-to[data-v-5cb0774a] {
  height: 0;
  opacity: 0;
}
.vue-tree-node[data-v-5cb0774a]:hover {
  background-color: var(--hoverBgColor);
}
.vue-tree-node.vue-tree-node-selected[data-v-5cb0774a] {
  background-color: var(--selectedBgColor);
}
.vue-tree-node .vue-tree-icon-and-title[data-v-5cb0774a] {
  display: inline-block;
  text-indent: 0;
  padding-left: 2px;
  padding-right: 5px;
  border-radius: 2px;
  line-height: var(--height);
  vertical-align: middle;
}
.vue-tree-node .vue-tree-title[data-v-5cb0774a] {
  width: auto;
  overflow: hidden;
  max-width: var(--titleMaxWidth);
  text-overflow: var(--titleOverflow);
  white-space: nowrap;
  display: inline-block;
  vertical-align: middle;
  height: var(--height);
  padding-left: 0;
}
.vue-tree-node .vue-tree-title.vue-tree-title-editing[data-v-5cb0774a] {
  display: inline-block;
  border: 1px solid #2196F3;
  outline: 1px solid #2196F3;
  background-color: white;
  padding: 0 5px;
  text-indent: 0;
  height: calc(var(--height) - 5px);
  line-height: calc(var(--height) - 5px);
  text-overflow: clip;
  vertical-align: middle;
  border-radius: 0.16em;
  font-size: var(--fontSize);
}
.vue-tree-node .vue-tree-title.vue-tree-title.vue-tree-title-editing input[data-v-5cb0774a] {
  box-sizing: content-box;
}
.vue-tree-node .vue-tree-title.vue-tree-title-editing.vue-tree-title-hidden[data-v-5cb0774a] {
  position: absolute;
  visibility: hidden;
}
.vue-tree-node .vue-tree-switcher-wrapper[data-v-5cb0774a] {
  text-indent: 0;
  vertical-align: middle;
  display: inline-block;
  min-width: 1em;
  min-height: 1em;
  padding: 0;
  overflow: visible;
  margin-right: var(--switcherMarginRight)
}
.vue-tree-node .vue-tree-switcher-wrapper .vue-tree-switcher-icon[data-v-5cb0774a] {
  width: 1em;
  height: 1em;
  vertical-align: middle;
}
.vue-tree-node .vue-tree-switcher-wrapper .vue-tree-switcher-icon.vue-tree-switcher-loading[data-v-5cb0774a] {
  animation-name: spin-5cb0774a;
  animation-duration: 500ms;
  animation-iteration-count: infinite;
  animation-timing-function: linear;
}
@keyframes spin-5cb0774a {
from {
        transform:rotate(0deg);
}
to {
        transform:rotate(360deg);
}
}
.vue-tree-node .vue-tree-icon-wrapper[data-v-5cb0774a] {
  margin-right: var(--iconMarginRight);
}
.vue-tree-node .vue-tree-icon-wrapper .vue-tree-icon[data-v-5cb0774a] {
  width: 1em;
  height: 1em;
  vertical-align: middle;
}
.vue-tree-node.vue-tree-node-search-result .vue-tree-title[data-v-5cb0774a] {
  color: brown;
  font-weight: bold;
}
.vue-tree-node .vue-tree-extra-wrapper[data-v-5cb0774a] {
  display: var(--extraDisplay);
  text-indent: 0;
  float: var(--extraFloat);
}
.vue-tree-node:hover .vue-tree-extra-wrapper[data-v-5cb0774a] {
  display: inline-block;
}
.vue-tree-node.vue-tree-node-drag-over-self .vue-tree-icon-and-title[data-v-5cb0774a] {
  background-color: var(--dragOverBgColor);
}
.vue-tree-node.vue-tree-not-droppable .vue-tree-not-droppable-sign[data-v-5cb0774a] {
  text-indent: 0;
  position: absolute;
  left: var(--mousex);
  top: calc(var(--mousey) + 0.5em);
  z-index: 10;
}
.vue-tree-node .vue-tree-drag-image[data-v-5cb0774a] {
  text-indent: 0;
  font-size: var(--fontSize);
  width: auto;
  height: 1.5em;
  line-height: 1.5em;
  padding: 0.3em 0.5em;
  border: 0;
  border-radius: 5px;
  background-color: #bae7ff;
}
.vue-tree-node .vue-tree-checkbox-wrapper[data-v-5cb0774a] {
  display: inline-block;
  text-indent: 0;
  margin-right: var(--checkboxMarginRight);
}
.vue-tree-node .vue-tree-checkbox-wrapper .vue-tree-checkbox[data-v-5cb0774a] {
  display: inline-block;
  width: 1em;
  height: 1em;
  border: 1px solid #dcdee2;
  border-radius: 2px;
  text-indent: 0;
  vertical-align: middle;
  position: relative;
}
.vue-tree-node .vue-tree-checkbox-wrapper .vue-tree-checkbox.vue-tree-checkbox-checked[data-v-5cb0774a]:after {
  content: "";
  background-color: transparent;
  position: absolute;
  left: 32%;
  top: 10%;
  width: 20%;
  border-bottom: 2px solid white;
  height: 50%;
  border-right: 2px solid white;
  transform: rotate(45deg);
    -o-transform: rotate(45deg);
    -ms-transform: rotate(45deg);
    -webkit-transform: rotate(45deg);
}
.vue-tree-node .vue-tree-checkbox-wrapper .vue-tree-checkbox.vue-tree-checkbox-checked[data-v-5cb0774a] {
  color: white;
  background-color: #2d8cf0;
  border-color: #2d8cf0;
}
.vue-tree-node .vue-tree-checkbox-wrapper .vue-tree-checkbox.vue-tree-checkbox-checked.vue-tree-checkbox-disabled[data-v-5cb0774a] {
  border-color: #dcdee2;
  background-color: #f5f5f5;
  cursor: not-allowed;
}
.vue-tree-node .vue-tree-checkbox-wrapper .vue-tree-checkbox.vue-tree-checkbox-checked.vue-tree-checkbox-disabled[data-v-5cb0774a]:after {
  border-color: #a6a6a6;
}
.vue-tree-node .vue-tree-checkbox-wrapper .vue-tree-checkbox.vue-tree-checkbox-unchecked[data-v-5cb0774a] {
  background-color: white;
}
.vue-tree-node .vue-tree-checkbox-wrapper .vue-tree-checkbox.vue-tree-checkbox-unchecked.vue-tree-checkbox-disabled[data-v-5cb0774a] {
  background-color: #f5f5f5;
}
.vue-tree-node .vue-tree-checkbox-wrapper .vue-tree-checkbox.vue-tree-checkbox-undetermined[data-v-5cb0774a]:after{
  content: '';
  border: 0;
  padding: 0;
  margin: 0;
  width: 70%;
  height: 2px;
  position: absolute;
  left: 15%;
  top: calc(50% - 1px);
  background-color: white;
}
.vue-tree-node .vue-tree-checkbox-wrapper .vue-tree-checkbox.vue-tree-checkbox-undetermined[data-v-5cb0774a]{
  color: white;
  background-color: #2d8cf0;
  border-color: #2d8cf0;
}
.vue-tree-node .vue-tree-checkbox-wrapper .vue-tree-checkbox.vue-tree-checkbox-undetermined.vue-tree-checkbox-disabled[data-v-5cb0774a]{
  border-color: #dcdee2;
  background-color: #f5f5f5;
}
.vue-tree-node .vue-tree-checkbox-wrapper .vue-tree-checkbox.vue-tree-checkbox-undetermined.vue-tree-checkbox-disabled[data-v-5cb0774a]:after{
  background-color: #a6a6a6;
}
.vue-tree-node .vue-tree-contextmenu-wrapper[data-v-5cb0774a] {
  position: fixed;
  display: block;
  left: var(--mousex);
  top: var(--mousey);
  z-index: 100;
  text-indent: 0;
}
.vue-tree-wrapper .vue-tree-drag-arrow[data-v-5cb0774a] {
  width: 1.7em;
  height: 2.6em;
  stroke: #5cb85c;
  fill: #5cb85c;
  overflow: visible;
}
`;xt(Do);ft.render=ko;ft.__scopeId="data-v-5cb0774a";ft.__file="src/VueTree.vue";var Co=(()=>{const e=ft;return e.install=n=>{n.component("VueTree",e)},e})();const To={class:"flex items-center gap-5 justify-between mb-2"},So={class:"example-wrapper"},Io={class:"panel"},Mo={key:1,class:"hidden"},No={key:0},Eo={key:1},$o={class:"-ml-1"},Oo=ae({__name:"DragAreaV2",setup(e){const{t:n}=De(),o=G(!1),{resetCustomFieldState:d}=Oe(),{editState:s}=Gt(),{selectedAccounts:a,handleExportAccounts:S,filters:D}=ct(),{groupData:c,createTable:p,tables:E,getTrees:k,createTree:P,selectedTable:_,updateTree:m,editTable:w,editGroup:h,stateGroup:x,exportTable:y,deleteAccount:A,tree:v,updateDataTree:$,keyword:V,search:q,selectFistTable:Q,canDeleteTable:J,canDeleteGroup:se,groupTableCount:U,tableCount:Te,updateTable:W,showFieldEditor:Be}=We(),ie=G(null);function Le(H){if(ie.value=H,H&&H.type==="group")return H.directoryState==="expanded"?v.value.collapse(H):v.value.expand(H),!1}const pe=async H=>{if(!H.hasChild){const{data:Y}=await En(H.id);Y.data&&(_.value=Y.data,D.value=[],d(),Be.value=!1,s.value={id:"",key:"",data:null}),a.value.length=0}};async function z(){await A(ie.value),await v.value.remove(ie.value),await $(),Q(),o.value=!1}function ye(H){var Y,F;return!(H.dragNode.type==="group"&&(H.overArea==="self"||((F=(Y=H.overNode.__)==null?void 0:Y.parent)==null?void 0:F.type)==="group")||H.overNode.type==="table"&&H.overArea==="self")}async function ve(H,Y,F,le,ee){(Y==null?void 0:Y.type)==="group"&&(Y.hasChild=!0,((Y==null?void 0:Y.children)===void 0||Y.children.length===0)&&(Y.directoryState="collapsed",Y.children=[])),(le==null?void 0:le.type)==="group"&&v.value.expand(le);const de=await v.value.getNestedTree();de.forEach(Ne=>{if(Ne.type==="group")return Ne.hasChild=!0}),de.length>0&&(await m(de),await k())}const Se=re(()=>[{label:n("Page.AccountManager.Button.Rename"),key:"rename",icon:je(Et)},{label:n("Page.AccountManager.Button.Export"),key:"export",icon:je(xn)},{label:n("Common.Button.Delete"),key:"delete",icon:je($t),disabled:!J.value}]),Ie=re(()=>{var H,Y;return[{label:n("Page.AccountManager.Button.Rename"),key:"rename",icon:je(Et)},{label:n("Common.Button.Delete"),key:"delete",icon:je($t),disabled:((Y=(H=ie.value)==null?void 0:H.children)==null?void 0:Y.length)===U.value&&Te.value===U.value}]}),Pe=async(H,Y)=>{if(ie.value=Y,Y.type==="table")switch(H){case"rename":v.value.edit(Y),await $();break;case"export":await S(_.value);break;case"delete":o.value=!0;break}else if(Y.type==="group")switch(H){case"rename":v.value.edit(Y),await $();break;case"delete":o.value=!0;break}},Me=async()=>{v.value.quitEdit(ie.value),$(),await W(ie.value.id,{name:ie.value.title})};return Je(async()=>{await k(),Q(),q()}),(H,Y)=>{const F=Re,le=_e;return r(),b(ne,null,[g("div",To,[l(F,{value:t(V),"onUpdate:value":Y[0]||(Y[0]=ee=>ge(V)?V.value=ee:null),"on-input":t(q),placeholder:t(n)("Common.Label.Search"),clearable:"",class:"mr-8px"},null,8,["value","on-input","placeholder"])]),g("div",So,[g("div",Io,[l(t(Co),{ref_key:"tree",ref:v,"default-attrs":{style:{extraFloatRight:!0,extraAlwaysVisible:!0,fontSize:"14px",indent:"20px",hoverBgColor:"#5671ff33",selectedBgColor:"#5671ff33",dragOverBgColor:"#5671ff33"}},"animation-duration":"0",tree:t(c).tree,class:"tree","fn-before-select":Le,"fn-is-droppable":ye,onSelect:pe,onMove:ve,onBlur:Me},{extra:u(({node:ee})=>[l(Ut,{trigger:"click",size:"medium","drop-down-actions":ee.type==="group"?t(Ie):t(Se),onSelect:de=>Pe(de,ee)},null,8,["drop-down-actions","onSelect"])]),icon:u(({node:ee})=>[ee.type==="table"?(r(),C(B,{key:0,size:"16",type:"dataTable",class:"-ml-4"})):(r(),b("span",Mo))]),title:u(({node:ee})=>[ee.type==="table"?(r(),b("div",No,[g("span",null,T(ee.title),1)])):ee.type==="group"?(r(),b("div",Eo,[g("span",$o,T(ee.title),1)])):N("",!0)]),_:1},8,["tree"])])]),l(Ke,{type:"delete",icon:"trash",header:t(n)("Page.AccountManager.Label.DeleteTable"),"is-show":t(o),"cancel-label":t(n)("Common.Button.Cancel"),"submit-label":t(n)("Common.Button.Confirm"),"action-submit":z,onClose:Y[1]||(Y[1]=ee=>o.value=!1)},{body:u(()=>[l(le,null,{default:u(()=>[M(T(t(n)("Page.AccountManager.Label.DeleteTableConfirm",{name:t(ie).title})),1)]),_:1})]),_:1},8,["header","is-show","cancel-label","submit-label"])],64)}}});const Ro={class:"flex flex-auto gap-x-2"},Bo=ae({__name:"ImportTableModal",props:{show:Boolean,appId:String},emits:["update:show","imported"],setup(e,{emit:n}){const o=e,{importTable:d}=We();Oe();const s=Qe({importing:!1,filePath:"",name:"New Table"}),a=G(null),S=async c=>{const p=c.target.files[0];p&&(s.filePath=p.path,s.name=p.name.replace(/\.[^/.]+$/,""))},D=async()=>{try{if(!s.filePath)return window.$message.warning("No file selected!");s.importing=!0,await d({filePath:s.filePath,name:s.name}),s.filePath="",n("update:show",!1),n("imported")}catch{}finally{s.importing=!1}};return(c,p)=>{const E=Re,k=fe,P=ut;return r(),C(Ae,{"is-show":o.show,icon:"download",header:"Import table","submit-label":"Import","action-submit":D,loading:t(s).importing,onClose:p[2]||(p[2]=_=>n("update:show",!1))},{body:u(()=>[l(P,{"show-feedback":!1,label:"File path"},{default:u(()=>[g("div",Ro,[l(E,{value:t(s).filePath,"onUpdate:value":p[0]||(p[0]=_=>t(s).filePath=_),placeholder:"Select your file (.csv, .xlsx)"},null,8,["value"]),l(k,{type:"primary",dashed:"",onClick:p[1]||(p[1]=_=>{var m;return(m=t(a))==null?void 0:m.click()})},{icon:u(()=>[l(B,{type:"selectFile"})]),_:1})])]),_:1}),g("input",{ref_key:"file",ref:a,type:"file",style:{display:"none"},accept:".csv,.xlsx",onChange:S},null,544)]),_:1},8,["is-show","loading"])}}}),Uo={class:"h-full flex flex-col justify-between"},Lo={class:"mb-16px"},Po={class:"flex items-center gap-8px"},Fo={class:"flex items-center gap-8px"},zo={class:"flex items-center gap-8px"},jo=ae({__name:"Sidebar",setup(e){const{t:n}=De(),{tables:o,selectedTable:d,getTables:s,createTable:a,groups:S,createGroup:D,importTable:c}=We(),{getAppAccounts:p}=ct(),E=G(!1),k=G([]);re(()=>route.params.id);const P=async()=>{k.value=[];const _=Ze.cloneDeep(o.value),m=Ze.cloneDeep(S.value),w=await _.filter(x=>x.table_group_id===null).map((x,y)=>{var A;return{title:x.name,id:x.id,type:"table",order_number:x.order_number,selected:((A=d.value)==null?void 0:A.id)===x.id,custom_fields_array:x.custom_fields_array}}),h=await m.map(x=>{const y=_.filter(A=>A.table_group_id===x.id).map(A=>{var v;return{title:A.name,id:A.id,type:"table",table_group_id:A.table_group_id,order_number:A.order_number,selected:((v=d.value)==null?void 0:v.id)===A.id,custom_fields_array:A.custom_fields_array}}).sort((A,v)=>{const $=A.order_number!==null?A.order_number:1/0,V=v.order_number!==null?v.order_number:1/0;return $-V});return y.length>0?{title:x.name,id:x.id,hasChild:!0,type:"group",order_number:x.order_number,children:y}:{title:x.name,id:x.id,hasChild:!0,type:"group",order_number:x.order_number,children:[]}});k.value=h.concat(w).sort((x,y)=>{const A=x.order_number!==null?x.order_number:1/0,v=y.order_number!==null?y.order_number:1/0;return A-v})};return Ce([o,S],async()=>{await P()}),Je(async()=>{await Promise.all([s()]),o.value.length===0&&a()}),(_,m)=>{const w=Bn,h=Un,x=Ln;return r(),b(ne,null,[g("div",Uo,[g("div",null,[l(Oo)]),g("div",Lo,[l(w),l(x,{"arrow-placement":"right"},{default:u(()=>[l(h,{title:t(n)("Page.AccountManager.Button.New"),name:"1"},{default:u(()=>[g("div",{class:"flex items-center justify-between hover:bg-[#5671ff33] rounded hover:text-[#5671FF] p-8px cursor-pointer item",onClick:m[0]||(m[0]=()=>t(a)())},[g("div",Po,[l(B,{type:"dataTable",size:"20"}),M(" "+T(t(n)("Page.AccountManager.Label.NewTable")),1)]),l(B,{class:"hidden",type:"plus"})]),g("div",{class:"mt-8px flex items-center justify-between hover:bg-[#5671ff33] rounded hover:text-[#5671FF] p-8px cursor-pointer item",onClick:m[1]||(m[1]=()=>t(D)())},[g("div",Fo,[l(B,{type:"folderTable",size:"20"}),M(" "+T(t(n)("Page.AccountManager.Label.NewGroup")),1)]),l(B,{class:"hidden",type:"plus"})]),g("div",{class:"mt-8px flex items-center justify-between hover:bg-[#5671ff33] rounded hover:text-[#5671FF] p-8px cursor-pointer item",onClick:m[2]||(m[2]=y=>E.value=!0)},[g("div",zo,[l(B,{type:"file",size:"20"}),M(" "+T(t(n)("Page.AccountManager.Label.ImportTable")),1)]),l(B,{class:"hidden",type:"fileImport"})])]),_:1},8,["title"])]),_:1})])]),l(Bo,{show:t(E),"onUpdate:show":m[3]||(m[3]=y=>ge(E)?E.value=y:null),onImported:m[4]||(m[4]=y=>t(p)(!0))},null,8,["show"])],64)}}});const Yo=$e(jo,[["__scopeId","data-v-97bd09bb"]]),Wo=e=>(Ot("data-v-e63b2cfc"),e=e(),Rt(),e),Vo={class:"flex gap-8px w-full mt-16px",style:{height:"calc(100vh - 350px)"}},Go={class:"flex items-center gap-24px mt-8px"},Ho=["src"],qo={class:"w-full"},Xo={class:"flex items-center justify-between"},Ko={class:"flex items-center gap-16px"},Qo={class:"font-black text-xl"},Zo={class:"flex item-centers gap-24px"},Jo={class:"flex items-center gap-12px"},es=["src"],ts={class:"config"},ns=Wo(()=>g("div",{class:"text-lg font-bold mb-24px"}," Config ",-1)),as=ae({__name:"ModuleDetail",setup(e){const{modulesSelectedId:n,isShowDetail:o}=tt(),{fromNow:d}=Lt(),{t:s}=De(),{selectedTable:a}=We(),{loading:S,appDetails:D,moduleTaskDetails:c,getModuleTaskDetails:p}=dt(),{variables:E}=Xt(),k={image:bt,author:{name:"GenFarmer",image:bt},tag:"Facebook"},P=()=>{o.value=!1},_=async()=>{const m=await Pt(c.value.appId),w=c.value.input.reduce((A,v)=>(A[v.id]=v,A),{}),h=Object.keys(w),x=m.data.data.input.map(A=>{const v=A.id;return h.includes(v)&&(A=it(w[v])),A}),y=Ze.uniqBy([...m.data.data.script.variables,...c.value.variables],"id");E.value=it(y),c.value.input=it(x),window.$message.success(s("Page.AccountManager.Noti.AppInputUpdated"))};return Je(async()=>{await p(n.value[0],a.value.id.toString())}),(m,w)=>{const h=_e,x=Ft,y=fe,A=An,v=zt;return r(),C(v,{show:t(S)},{default:u(()=>{var $,V;return[g("div",{class:"flex items-center gap-8px cursor-pointer",onClick:P},[l(B,{type:"goBack"}),l(h,null,{default:u(()=>[M("Back")]),_:1})]),g("div",Vo,[g("div",{style:ke({height:"calc(100vh - 350px)"}),class:"w-full task-input"},[g("div",Go,[g("img",{class:"avatar",src:((V=($=t(D))==null?void 0:$.metadata)==null?void 0:V.productIcon)||k.author.image,alt:""},null,8,Ho),g("div",qo,[g("div",Xo,[g("div",Ko,[g("div",Qo,[l(h,null,{default:u(()=>{var q,Q,J;return[M(T(((Q=(q=t(D))==null?void 0:q.metadata)==null?void 0:Q.productName)||((J=t(D))==null?void 0:J.name)),1)]}),_:1})]),l(x,{round:"",bordered:!1,size:"small"},{default:u(()=>{var q;return[M(T(((q=t(D))==null?void 0:q.type)||"Module"),1)]}),_:1})])]),g("div",Zo,[l(h,{class:"flex items-center gap-4px",depth:"3"},{default:u(()=>[l(B,{type:"clock"}),M(" Updated "+T(t(D)&&t(d)(t(D).updatedAt)),1)]),_:1})]),g("div",Jo,[l(h,{class:"flex items-center gap-4px",depth:"3"},{default:u(()=>[l(B,{type:"eye"}),l(h,{depth:"3"},{default:u(()=>[M(T(0))]),_:1})]),_:1}),l(h,{class:"flex items-center gap-4px",depth:"3"},{default:u(()=>[l(B,{type:"download"}),l(h,{depth:"3"},{default:u(()=>[M(T(0))]),_:1})]),_:1}),l(h,{class:"flex items-center gap-4px",depth:"3"},{default:u(()=>[l(B,{type:"layer"}),l(h,{depth:"3"},{default:u(()=>[M(" 1.0.0 ")]),_:1})]),_:1}),l(h,{class:"flex items-center gap-4px",depth:"3"},{default:u(()=>{var q,Q;return[g("img",{class:"logo w-20px h-20px rounded-md",src:((Q=(q=t(D))==null?void 0:q.metadata)==null?void 0:Q.productSellerIcon)||k.author.image,alt:""},null,8,es),l(h,{depth:"3"},{default:u(()=>{var J,se,U;return[M(T(((se=(J=t(D))==null?void 0:J.metadata)==null?void 0:se.productSellerName)||((U=k.author)==null?void 0:U.name)),1)]}),_:1})]}),_:1})])]),l(A,{"negative-text":t(s)("Common.Button.Cancel"),"positive-text":t(s)("Common.Button.Confirm"),onPositiveClick:w[0]||(w[0]=q=>_())},{trigger:u(()=>[l(y,{type:"primary"},{default:u(()=>[M(T(t(s)("Page.AccountManager.Button.UpdateAppInput")),1)]),_:1})]),default:u(()=>[M(" "+T(t(s)("Page.AccountManager.Label.ConfirmUpdateAppInput")),1)]),_:1},8,["negative-text","positive-text"])]),l(h,{class:"block my-16px"},{default:u(()=>{var q;return[M(T((q=t(D))==null?void 0:q.script.description),1)]}),_:1}),l(Pn,{class:"w-full overflow-y-auto","task-input-width":"100%",style:{height:"calc(100vh - 480px)"}})],4),g("div",ts,[ns,t(c)?(r(),C(Fn,{key:0,config:t(c).config,"onUpdate:config":w[1]||(w[1]=q=>t(c).config=q)},null,8,["config"])):N("",!0)])])]}),_:1},8,["show"])}}});const os=$e(as,[["__scopeId","data-v-e63b2cfc"]]),ss=ae({__name:"ListModuleRun",setup(e){const{t:n}=De(),{defaultParams:o,listModules:d,modulesSelectedId:s,loading:a,fetchApps:S,onPageUpdate:D,onSortChange:c,onPageSizeUpdate:p,pagination:E,columns:k,rowProps:P,debounceFetchApps:_}=tt();return Je(async()=>{await S()}),(m,w)=>{const h=xe;return r(),C(h,{vertical:""},{default:u(()=>[l(jn,{value:t(o).name,"onUpdate:value":w[0]||(w[0]=x=>t(o).name=x),class:"!w-auto",placeholder:t(n)("Common.Label.Search"),clearable:"","on-input":t(_)},null,8,["value","placeholder","on-input"]),l(t(zn),{"checked-row-keys":t(s),"onUpdate:checkedRowKeys":w[1]||(w[1]=x=>ge(s)?s.value=x:null),class:"mt-2",loading:t(a),data:t(d),columns:t(k),pagination:t(E),"row-key":x=>x.id,"row-props":t(P),"on-page-update":t(D),"on-page-size-update":t(p),size:"small",onUpdateSorter:t(c)},null,8,["checked-row-keys","loading","data","columns","pagination","row-key","row-props","on-page-update","on-page-size-update","onUpdateSorter"])]),_:1})}}}),ls=ae({__name:"AutomationModal",props:{show:Boolean},emits:["update:show"],setup(e,{emit:n}){const o=e,{t:d}=De(),{listModules:s,isShowDetail:a,modulesSelectedId:S}=tt(),{updateTableModuleTask:D}=dt(),{updateTask:c}=Xt(),p=()=>{if(S.value.length>0){const P=s.value.find(_=>_.id===S.value[0]);D(P),n("update:show",!1)}else window.$message.warning(d("Page.AccountManager.Noti.SelectAutomationApp"))},E=()=>{n("update:show",!1),a.value=!1},k=async()=>{await c(),p(),E()};return(P,_)=>(r(),C(Ae,{"is-show":o.show,icon:"settings",width:"75%",header:t(d)("Page.AccountManager.Label.SetupAutomation"),"cancel-label":t(d)("Common.Button.Cancel"),"submit-label":t(a)?t(d)("Common.Button.Save"):t(d)("Common.Label.Select"),"action-submit":t(a)?k:p,onClose:E},{body:u(()=>[t(a)?(r(),C(os,{key:0})):(r(),C(ss,{key:1}))]),_:1},8,["is-show","header","cancel-label","submit-label","action-submit"]))}}),rs={class:"flex items-center"},is={class:"flex items-center gap-8px"},cs={key:3,class:"flex items-center gap-24px"},ds={class:"flex items-center gap-16px"},us={class:"cursor-pointer hover:bg-[#5671ff33] rounded hover:text-[#5671FF] p-8px",onClick:()=>{}},ps={class:"flex items-center justify-between context-item"},hs={class:"flex items-center gap-8px context-item"},fs=["onClick"],gs={class:"flex items-center justify-between"},vs={class:"flex items-center gap-8px context-item"},ms=["onClick"],_s={class:"flex items-center gap-8px context-item"},ys=["onClick"],bs=["onClick"],ws={class:"flex items-center gap-8px"},xs={key:0,class:"flex items-center mx-16px mt-8px gap-8px"},As={class:"flex flex-col"},ks={class:"font-bold"},Ds={class:"text-xs"},Cs={key:1,class:"font-bold mx-16px mt-8px"},Ts={class:"flex items-center justify-between mx-16px my-8px"},Ss={class:"flex flex-col gap-8px"},Is={class:"font-bold"},Ms={class:"flex flex-col gap-8px"},Ns={class:"font-bold"},Es={class:"flex flex-col gap-8px"},$s={class:"font-bold"},Os={key:1},Rs={class:"flex flex-col gap-8px"},Bs={class:"font-bold"},Us={key:1},Ls={class:"p-8px"},Ps=ae({__name:"TaskRun",setup(e){const{t:n}=De(),{isDarkMode:o}=jt(Yt()),{duration:d,formatDateTime:s}=Lt(),{currentModuleTask:a,totalProfiles:S,finishedDevices:D,failedDevices:c,totalOutputData:p,getTaskRun:E,getModuleTaskDetails:k,onClickMenu:P}=dt(),{moduleTaskContextMenu:_}=Oe(),{isShowDetail:m,modulesSelectedId:w,showModalAutomation:h}=tt(),{taskRun:x,loading:y,stopTaskRun:A}=Vt(),v=G(!1),$=Qe({showStopModal:!1}),V=re(()=>[{label:n("Page.AccountManager.Label.ShowLogs"),key:"log",icon:je(oa)}]),q=()=>{w.value=[a.value.module.id],h.value=!0,m.value=!0},Q=async se=>{switch(se){case"log":v.value=!v.value,x.value=a.value.taskRun;break;case"setup":w.value=[a.value.module.id],h.value=!0,m.value=!0;break}},J=async()=>{var se;a.value.taskRun&&await A((se=a.value.taskRun)==null?void 0:se.id),$.showStopModal=!1};return(se,U)=>{const Te=zt,W=Ft,Be=fe,ie=Ye,Le=Bt,pe=_e,z=Wt,ye=qt;return r(),b("div",rs,[l(z,{class:"rounded-lg h-180px"},{default:u(()=>{var ve,Se,Ie,Pe,Me,H,Y,F,le,ee,de,Ne,nt,at,ot,st,He;return[g("div",{class:"header flex items-center justify-between",style:ke({"--bg-color":t(o)?"#3C3C3C":"#F8F9FF"})},[((ve=t(a).taskRun)==null?void 0:ve.status)===t(he).RUNNING?(r(),C(W,{key:0,bordered:!1,type:"info",size:"large"},{default:u(()=>[g("div",is,[l(Te,{size:"small"},{icon:u(()=>[l(B,{type:"loading",color:"primary"})]),_:1}),M(" "+T(t(n)("Common.Status.Running")),1)])]),_:1})):((Se=t(a).taskRun)==null?void 0:Se.status)===t(he).FINISHED?(r(),C(W,{key:1,bordered:!1,type:"success",size:"large"},{default:u(()=>[M(T(t(n)("Common.Status.Finished")),1)]),_:1})):((Ie=t(a).taskRun)==null?void 0:Ie.status)===t(he).ABORTED?(r(),C(W,{key:2,bordered:!1,type:"error",size:"large"},{default:u(()=>[M(T(t(n)("Common.Status.Aborted")),1)]),_:1})):(r(),b("div",cs,[l(W,{bordered:!1,type:"warning",size:"small"},{default:u(()=>[M(T(t(n)("Common.Status.Pending")),1)]),_:1})])),g("div",ds,[!t(a).taskRun||![t(he).RUNNING,t(he).PENDING].includes((Pe=t(a).taskRun)==null?void 0:Pe.status)?(r(),C(ie,{key:0,trigger:t(_).children?"hover":"manual",disabled:t(a).taskRun?((Me=t(a).taskRun)==null?void 0:Me.status)===t(he).RUNNING:!1,style:ke([{width:"200px",padding:"4px","margin-left":"16px","border-radius":"var(--4, 4px)","box-shadow":"0px 4px 4px 0px rgba(0, 0, 0, 0.05)"},{width:t(_).children.length?"200px":0}]),placement:"bottom","show-arrow":!1},{trigger:u(()=>[l(Be,{type:"primary","icon-placement":"left",onClick:U[0]||(U[0]=()=>!t(_).children.length&&t(P)(null))},{icon:u(()=>[l(B,{type:"play"})]),default:u(()=>[M(" "+T(t(n)("Common.Button.Run")),1)]),_:1})]),default:u(()=>[(r(!0),b(ne,null,ce(t(_).children,(j,gt)=>{var Fe;return r(),b("div",{key:gt},[g("div",us,[(Fe=j.children)!=null&&Fe.length?(r(),C(ie,{key:0,trigger:"hover",style:{width:"200px",padding:"4px","margin-top":"16px","border-radius":"var(--4, 4px)","box-shadow":"0px 4px 4px 0px rgba(0, 0, 0, 0.05)"},placement:"bottom","show-arrow":!1},{trigger:u(()=>[g("div",ps,[g("div",hs,[j.color?(r(),b("div",{key:0,class:Z([j.color,"color"])},null,2)):N("",!0),j.icon?(r(),C(B,{key:1,type:j.icon,size:"16"},null,8,["type"])):N("",!0),M(T(j.name),1)]),l(B,{type:"down",size:"16",color:"#828282"})])]),default:u(()=>[(r(!0),b(ne,null,ce(j.children,(oe,vt)=>{var qe;return r(),b("div",{key:vt,class:"cursor-pointer hover:bg-[#5671ff33] rounded hover:text-[#5671FF] p-8px",onClick:be=>oe.children.length===0&&t(P)(oe,j)},[(qe=oe.children)!=null&&qe.length?(r(),C(ie,{key:0,trigger:"hover",style:{width:"200px",padding:"4px","margin-left":"16px","border-radius":"var(--4, 4px)","box-shadow":"0px 4px 4px 0px rgba(0, 0, 0, 0.05)"},placement:"right-start","show-arrow":!1},{trigger:u(()=>[g("div",gs,[g("div",vs,[oe.color?(r(),b("div",{key:0,class:Z([oe.color,"color"])},null,2)):N("",!0),oe.icon?(r(),C(B,{key:1,type:oe.icon,size:"16"},null,8,["type"])):N("",!0),M(" "+T(oe.name),1)]),l(B,{type:"next",size:"16",color:"#828282"})])]),default:u(()=>[(r(!0),b(ne,null,ce(oe.children,(be,me)=>(r(),b("div",{key:me,class:"cursor-pointer hover:bg-[#5671ff33] rounded hover:text-[#5671FF] p-8px",onClick:At=>t(P)(be,j)},[g("div",_s,[be.color?(r(),b("div",{key:0,class:Z([be.color,"color"])},null,2)):N("",!0),be.icon?(r(),C(B,{key:1,type:be.icon,size:"16"},null,8,["type"])):N("",!0),M(" "+T(be.name),1)])],8,ms))),128))]),_:2},1024)):(r(),b("div",{key:1,class:"flex items-center gap-8px context-item",onClick:be=>t(P)(oe)},[oe.color?(r(),b("div",{key:0,class:Z([oe.color,"color"])},null,2)):N("",!0),oe.icon?(r(),C(B,{key:1,type:oe.icon,size:"16"},null,8,["type"])):N("",!0),M(" "+T(oe.name),1)],8,ys))],8,fs)}),128))]),_:2},1024)):(r(),b("div",{key:1,class:"flex items-center gap-8px context-item",onClick:oe=>t(P)(j)},[j.color?(r(),b("div",{key:0,class:Z([j.color,"color"])},null,2)):N("",!0),j.icon?(r(),C(B,{key:1,type:j.icon,size:"16"},null,8,["type"])):N("",!0),M(T(j.name),1)],8,bs))])])}),128))]),_:1},8,["trigger","disabled","style"])):((H=t(a).taskRun)==null?void 0:H.status)===t(he).RUNNING?(r(),C(Be,{key:1,type:"error",style:{color:"white !important"},onClick:U[1]||(U[1]=j=>t($).showStopModal=!0)},{default:u(()=>[g("div",ws,[l(B,{type:"square"}),M(" "+T(t(n)("Common.Button.Stop")),1)])]),_:1})):N("",!0),!t(a).taskRun||![t(he).RUNNING,t(he).PENDING].includes((Y=t(a).taskRun)==null?void 0:Y.status)?(r(),C(Be,{key:2,type:"success",ghost:"",onClick:q},{icon:u(()=>[l(B,{type:"settings"})]),default:u(()=>[M(" "+T(t(n)("Page.AccountManager.Label.SetupAutomation")),1)]),_:1})):N("",!0),l(Ut,{trigger:"click",size:"huge","drop-down-actions":t(V),onSelect:Q},null,8,["drop-down-actions"])])],4),(le=(F=t(a).module)==null?void 0:F.metadata)!=null&&le.productId?(r(),b("div",xs,[l(Le,{class:"w-35px h-35px rounded-md",src:((de=(ee=t(a).module)==null?void 0:ee.metadata)==null?void 0:de.productIcon)||t(bt)},null,8,["src"]),g("div",As,[g("div",ks,T(((nt=(Ne=t(a).module)==null?void 0:Ne.metadata)==null?void 0:nt.productName)||t(a).module.name),1),g("div",Ds,T(((ot=(at=t(a).module)==null?void 0:at.metadata)==null?void 0:ot.productSeller)||"Store"),1)])])):(r(),b("div",Cs,T((He=(st=t(a))==null?void 0:st.module)==null?void 0:He.name),1)),g("div",Ts,[g("div",Ss,[g("div",null,[l(pe,{depth:"2"},{default:u(()=>[M(T(t(n)("Common.Label.Results")),1)]),_:1})]),g("div",Is,[l(pe,null,{default:u(()=>[M(T(t(p)),1)]),_:1})])]),g("div",Ms,[g("div",null,[l(pe,{depth:"2"},{default:u(()=>[M(T(t(n)("Common.Label.Profile")),1)]),_:1})]),g("div",Ns,[l(pe,null,{default:u(()=>[M(T(t(n)("Page.AutomationRuns.Label.TaskRunProfileStats",{handled:t(D)+t(c),total:t(S)})),1)]),_:1})])]),g("div",Es,[g("div",null,[l(pe,{depth:"2"},{default:u(()=>[M(T(t(n)("Common.Label.StartedAt")),1)]),_:1})]),g("div",$s,[t(a).taskRun?(r(),C(pe,{key:0},{default:u(()=>[M(T(t(s)(t(a).taskRun.createdAt)),1)]),_:1})):(r(),b("span",Os,"-"))])]),g("div",Rs,[g("div",null,[l(pe,{depth:"2"},{default:u(()=>[M(T(t(n)("Common.Label.Duration")),1)]),_:1})]),g("div",Bs,[t(a).taskRun?(r(),C(pe,{key:0},{default:u(()=>[M(T(t(d)(t(a).taskRun.createdAt,t(a).taskRun.finishedAt)),1)]),_:1})):(r(),b("span",Us,"-"))])])])]}),_:1}),t(v)?(r(),C(z,{key:0,class:"h-180px w-[60%]"},{default:u(()=>[g("div",{class:"header flex items-center justify-between font-bold",style:ke({"--bg-color":t(o)?"#3C3C3C":"#F8F9FF"})},[M(" Logs "),l(B,{type:"next",class:"cursor-pointer",onClick:U[2]||(U[2]=ve=>v.value=!1)})],4),g("div",Ls,[l(ye,{style:{"max-height":"120px"}},{default:u(()=>[l(Yn)]),_:1})])]),_:1})):N("",!0),l(Ke,{"is-show":t($).showStopModal,"onUpdate:isShow":U[3]||(U[3]=ve=>t($).showStopModal=ve),type:"delete",icon:"trash",header:"Stop running task","cancel-label":t(n)("Common.Button.Cancel"),"submit-label":t(n)("Common.Button.Confirm"),"action-submit":J,loading:t(y),onClose:U[4]||(U[4]=ve=>t($).showStopModal=!1)},{body:u(()=>[l(pe,null,{default:u(()=>[M(T(t(n)("Page.AccountManager.Noti.StopTask")),1)]),_:1})]),_:1},8,["is-show","cancel-label","submit-label","loading"])])}}});const Fs=$e(Ps,[["__scopeId","data-v-2772a7e6"]]),zs={key:0,class:"filter-tag"},js={class:"flex items-center gap-16px"},Ys={class:"text-white"},Ws={class:"flex items-center gap-16px mt-16px"},Vs=ae({__name:"AccountTable",setup(e){const{t:n}=De(),{selectedTable:o}=We(),{renderCustomFieldTypeIcon:d,renderAccountTaskingStatus:s,renderDate:a,renderNumber:S,renderPassword:D,renderTag:c,renderText:p,editState:E}=Gt(),{customFields:k,contextMenu:P,resetCustomFieldState:_,selectedColumns:m,selectedRows:w}=Oe(),{accounts:h,assignedDevices:x,loading:y,filteredAccounts:A,selectedAccounts:v,filters:$,getAppAccounts:V,handleDeleteAccounts:q,handleUpdateAccount:Q,handleExportAccounts:J}=ct(),{showModalAutomation:se,modulesSelected:U}=tt(),{tableModuleTasks:Te,currentModuleTask:W,getTaskRun:Be,getModuleTaskDetails:ie,onClickMenu:Le}=dt(),{taskRun:pe}=Vt(),z=Qe({showImportFileModal:!1,showInsertAccountModal:!1,showInputAccountModal:!1,showDeleteAccountModal:!1,showUpdateAccountModal:!1,showCustomCopyModal:!1,showConfirmPasteDataModal:!1,showDeleteColumnDataModal:!1,showModalAssignProfiles:!1,ids:[]}),ye=G(""),ve=G(!1),Se=G(!1),Ie=G(!1),Pe=G(!1),Me=G(),{isDarkMode:H}=jt(Yt()),Y=re(()=>h.value.filter(f=>f.status===Mt.RUNNING)),F=Qe({show:!1,accountId:null,profileId:null,showEditAccount:!1,account:null}),le=G(!1);let ee=null;const de=G(new Set),Ne=G(null);Ce(()=>H.value,()=>{const f=document.getElementsByTagName("head")[0],i=document.createElement("style");i.innerHTML=`
:root {
    --selected-row:${H.value?"#2D334D":"#DCE1FF"};
}
`,f.appendChild(i)},{immediate:!0});const nt=re(()=>W.value?window.innerHeight-450:window.innerHeight-250),at=re(()=>k.value.filter(f=>f.show).length*200+1e3||2500),ot=(f,i)=>{if(f.ctrlKey||(v.value=[]),w.value.clear(),m.value.clear(),!f.target.classList.contains("n-input__input-el")){const O=f.target.closest("td");O&&(w.value.add(i),Me.value=O.getAttribute("data-col-key"),m.value.clear(),m.value.add(Me.value)),le.value=!0,ee=i,f.preventDefault()}},st=(f,i)=>{if(le.value){const I=Math.min(ee,i),O=Math.max(ee,i);w.value.clear();for(let X=I;X<=O;X++)w.value.add(X),document.querySelectorAll(`tr:nth-child(${X+1}) td`).forEach(Ee=>{const lt=Ee.getAttribute("data-col-key");lt===Me.value&&m.value.add(lt)})}},He=()=>{le.value&&(de.value=w.value,m.value.has("rowIndex")&&w.value.forEach(f=>{const i=v.value.findIndex(I=>I===h.value[f].id);i===-1?v.value.push(h.value[f].id):(v.value.splice(i,1),w.value.delete(f))}),le.value=!1)},j=G([]),gt=(f,i)=>({class:{selectedRow:(w.value.has(i)||v.value.includes(f.id))&&m.value.has("rowIndex")},style:{cursor:"cell"},onMousedown:async I=>{if([...I.target.classList].includes("n-checkbox-box__border"))return!0;if(I.which!==2&&I.which!==3){if(E.id&&Ze.isEmpty(Ze.intersection(["n-base-selection-label","n-input__input-el","n-base-selection-tags","v-overflow","n-base-selection-input__content",""],I.target.classList))&&I.target.classList.length){const O=h.value.find(X=>X.id===E.id);E.data!==O.data[E.key]&&(O.data[E.key]=E.data,await Nt(O)),Object.assign(E,{id:"",key:"",data:null})}ot(I,i)}},onMouseenter:I=>st(I,i),onMouseup:I=>{I.which!==2&&I.which!==3&&He()}}),Fe=(f,i)=>{m.value.clear(),w.value.clear(),f&&(m.value.add(i),h.value.forEach((I,O)=>{w.value.add(O)}),i==="rowIndex"&&(v.value=$.value.length?A.value.map(I=>I.id):h.value.map(I=>I.id)))},oe=re(()=>[{type:"selection",fixed:"left",align:"center"},{width:60,fixed:"left",key:"rowIndex",title:()=>K("div",{class:"cursor-pointer",onClick:()=>Fe(!0,"rowIndex")},{default:()=>"#"}),render:(f,i)=>`${i+1}`},{title:"ID",width:200,key:"id",align:"center",render(f){return K("span",{class:"cursor-pointer",onClick:async()=>{await navigator.clipboard.writeText(f.id),window.$message.success(n("Common.Noti.Copied"))}},f.id)}},{fixed:"left",key:"status",width:160,title:()=>K("div",{class:"cursor-pointer"},{default:()=>n("Common.Label.Status")}),render(f){return f.status===Mt.ABORTED?K(Ye,{style:"max-height: 200px",scrollable:!0,trigger:"hover",placement:"left"},{trigger:()=>s(f.status),default:()=>f.log||"unknown"}):s(f.status)}},{fixed:"left",key:"profileId",width:250,cellProps:(f,i)=>({class:{selectedColumn:w.value.has(i)&&m.value.has("profileId")},onMousedown:I=>{j.value=[],j.value.push("profileId")},onMouseenter:I=>{le.value&&(j.value.includes("profileId")||(m.value.add("profileId"),j.value.push("profileId")),j.value.includes("profileId")&&j.value[j.value.length-1]!=="profileId"&&(m.value.delete(j.value[j.value.length-1]),j.value.pop()))}}),title(f){return K("div",{class:"flex items-center justify-between cursor-pointer",onClick:i=>{Fe(!0,"profileId")}},{default:()=>[K("div",{class:"flex items-center gap-8px"},{default:()=>[K(B,{type:"file",size:"16",color:"#828282"}),K(_e,{depth:3},{default:()=>n("Common.Label.Profile")})]}),K("div",{class:"flex items-center gap-8px"},[K(et,{trigger:"hover"},{trigger:()=>K(B,{onClick:()=>{z.ids=$.value.length?A.value.map(i=>i.id):h.value.map(i=>i.id),z.showModalAssignProfiles=!0},type:"random",size:"16",color:"#828282"}),default:()=>K(_e,{depth:3},{default:()=>"Assign profiles"})}),K(B,{type:"lock",size:"16",color:"#828282"})])]})},render(f){return K("div",{class:"flex items-center justify-between"},{default:()=>[f.profileId?f.profileName:"-",K(B,{type:"edit",size:"22",color:"#828282",class:"cursor-pointer",onClick:()=>{F.show=!0,F.accountId=f.id,F.profileId=f.profileId}})]})}},...k.value.filter(f=>f.show).map(f=>({width:200,key:f.key,fixed:f.key==="profile"?"left":void 0,cellProps:(i,I)=>({class:{selectedColumn:w.value.has(I)&&m.value.has(f.key)},onMousedown:()=>{j.value=[],j.value.push(f.key)},onMouseenter:O=>{le.value&&(j.value.includes(f.key)||(m.value.add(f.key),j.value.push(f.key)),j.value.includes(f.key)&&j.value[j.value.length-1]!==f.key&&(m.value.delete(j.value[j.value.length-1]),j.value.pop()))}}),title(){return K("div",{class:"flex items-center justify-between w-full cursor-pointer",onClick:()=>Fe(!0,f.key)},{default:()=>[K("div",{class:"flex items-center gap-8px"},{default:()=>[K(B,{type:d(f),size:"16",color:"#828282"}),K(_e,{depth:3},{default:()=>f.title})]}),K("div",{class:"flex items-center gap-8px"},[f.deletable?null:K(B,{type:"lock",size:"12",color:"#828282"})])]})},render(i){switch(f.type){case ue.PASSWORD:return D(i,f);case ue.NUMBER:return S(i,f);case ue.MULTI_SELECT:return c(i,f);case ue.SELECT:return c(i,f);case ue.DATE:return a(i,f);case ue.STATUS:return c(i,f);default:return p(i,f)}}})),{key:"action",title:"Actions",width:100,render(f){function i(I){const O=new Date(I);return!isNaN(O.getTime())}return K(fe,{size:"small",type:"primary",onClick:()=>{const I=k.value.filter(O=>O.type==="date");F.account=it(f),I.length>0&&I.forEach(O=>{const X=F.account.data[O.key];F.account.data[O.key]=i(X)?X:null}),F.showEditAccount=!0}},{default:()=>n("Common.Button.Edit")})}}]),vt=f=>{const i=$.value.length?A.value:h.value;f.length===i.length&&(m.value.clear(),setTimeout(()=>{m.value.add("rowIndex")},50))};Ce(o,f=>{f&&(m.value.clear(),w.value.clear(),V(!0),U.value&&ie(U.value.id,o.value.id.toString()),W.value&&(pe.value=W.value.taskRun))});const qe=G(0),be=G(0),me=G(!1),At=async f=>{if(f.preventDefault(),W.value){const{data:{data:i}}=await Pt(W.value.module.id);W.value.module=i}me.value?me.value=!1:(me.value=!0,qe.value=f.clientX,be.value=f.clientY)},kt=(f,i)=>f.map(I=>i.map(O=>I.data[O]?I.data[O]:"").join("|")).join(`
`),mt=re(()=>v.value.map(f=>h.value.find(i=>i.id===f))),Kt=async f=>{try{await navigator.clipboard.writeText(kt(mt.value,f)),window.$message.success(n("Common.Noti.Copied"))}catch(i){window.$message.error(i)}},Dt=async()=>{if(!ye.value.length)return window.$message.warning("Please enter profile id and name!");const f=ye.value.trim().split(`
`).filter(O=>O);f.map(O=>O.split("|")[0]);const i=$.length?A.value:h.value,I=Array.from(w.value).map(O=>i[O].id);await Promise.all(I.map(async(O,X)=>{if(f[X]){const[Ue,Ee]=f[X].trim().split("|");await yt({accountId:O,profileId:Ue,profileName:Ee})}})),await V(!0),z.showModalAssignProfiles=!1,ye.value=""},Qt=async()=>{await Promise.all(Array.from(de.value).map(async(f,i)=>(h.value[f].profileId&&v.value.findIndex(O=>O===h.value[f].id)===-1&&await yt({accountId:h.value[f].id,profileId:null}),null))),await V(!0)},Zt=async f=>{const{item:i,parent:I}=f;if(i.type==="module")await Le(null);else if(I)I.type==="module"&&await Le(i);else if(i.type==="Copy")if(!mt.value.length)window.$message.warning(n("Common.Noti.NoAccountSelected"));else if(i.id==="custom")z.showCustomCopyModal=!0;else try{await navigator.clipboard.writeText(kt(mt.value,i.fields)),window.$message.success(n("Common.Noti.Copied"))}catch(O){window.$message.error(O)}else switch(i.id){case"selectAll":m.value.add("rowIndex"),v.value=$.value.length?A.value.map(O=>O.id):h.value.map(O=>O.id);break;case"unselectAll":m.value.clear(),w.value.clear(),v.value=[];break;case"updateData":v.value.length&&(z.showUpdateAccountModal=!0);break;case"addProfiles":z.ids=Array.from(de.value).map((O,X)=>h.value[O].id),z.showModalAssignProfiles=!0;break;case"deleteProfiles":Qt();break;case"deleteData":v.value.length&&(z.showDeleteAccountModal=!0);break;case"refresh":await V(!0);break;case"selectHighlighted":w.value.forEach(O=>{v.value.includes(h.value[O].id)||v.value.push(h.value[O].id)});break}me.value=!1},Jt=async()=>{let f;if(window.$message.success(n("Page.AccountManager.Noti.ProfileAssigned")),F.profileId){const{data:{data:i}}=await Tn(F.profileId);f=i.profile_data}await yt({accountId:F.accountId,profileId:F.profileId,profileName:(f==null?void 0:f.name)||null}),await V(!0),F.show=!1},en=async()=>{await Q(F.account),F.showEditAccount=!1,F.account=null},tn=G(null),ze=G([]),nn=async()=>{try{const i=(await navigator.clipboard.readText()).split(/\r?\n/).filter(I=>I.trim()!=="").map(I=>I.split("|"));ze.value=i}catch(f){console.error(f)}},Ct=async(f,i,I=null)=>{const O=h.value[f];await i.forEach((X,Ue)=>{i.length>1&&I&&typeof I=="object"?O.data[X]=I[Ue]:O.data[X]=I}),Nt(O)},an=async()=>{const f=Array.from(de.value),i=Array.from(m.value);if(i.sort((I,O)=>k.value.findIndex(X=>X.key===I)-k.value.findIndex(X=>X.key===O)),ze.value.length>0&&f.length>0&&i.length>0)try{f.forEach(async(I,O)=>{if(ze.value[O]){const X=i.length===1?ze.value[O][0]:ze.value[O];Ct(I,i,X)}})}catch(I){console.error(I)}z.showConfirmPasteDataModal=!1},on=async()=>{const f=Array.from(de.value),i=Array.from(m.value);i.sort((I,O)=>k.value.findIndex(X=>X.key===I)-k.value.findIndex(X=>X.key===O)),f.length>0&&i.length>0&&await Promise.all(f.map(async I=>{await Ct(I,i)})),z.showDeleteColumnDataModal=!1},Xe=async f=>{const i=Array.from(w.value),I=Array.from(m.value);!I.includes("rowIndex")&&!I.includes("profileId")&&!I.includes("status")&&!f.target.classList.contains("n-input__input-el")&&!f.target.classList.contains("n-input__textarea-el")&&(f.ctrlKey&&f.key==="v"?(f.preventDefault(),await nn(),i.length>0&&I.length>0&&ze.value.length>0&&(z.showConfirmPasteDataModal=!0)):(f.key==="Delete"||f.key==="Backspace")&&(f.preventDefault(),i.length>0&&I.length>0&&(z.showDeleteColumnDataModal=!0)))};kn(Ne,async f=>{window.removeEventListener("keydown",Xe)});const Tt=()=>{window.addEventListener("keydown",Xe)};return Sn().on(Dn.ACCOUNT_MANAGER_UPDATED,Cn(async()=>{await V(!0)},200)),Je(async()=>{window.addEventListener("keydown",Xe),await Promise.all([V(!0)]),_(),Pe.value=!1,tn.value=setInterval(()=>{const f=Object.values(Te.value).filter(i=>i.taskRun&&![he.ABORTED,he.FINISHED,he.STOPPED].includes(i.taskRun.status));f.length&&Promise.all(f.map(i=>i.taskRun&&Be(i.taskRun.id,i.tableId)))},1e3)}),vn(async()=>{window.removeEventListener("keydown",Xe)}),mn(()=>{window.removeEventListener("keydown",Xe)}),(f,i)=>{const I=Wn,O=Gn,X=Hn,Ue=ut,Ee=Re,lt=Ve,sn=wt,ln=Wt,rn=Vn,cn=qn;return r(),C(cn,{"has-sider":"",class:"account-sidebar"},{default:u(()=>[l(I,{"collapse-mode":"width","collapsed-width":0,width:320,"show-collapsed-content":!1,"show-trigger":"arrow-circle",bordered:!1,style:{height:"calc(100vh - 65px)",padding:"16px 8px","margin-left":"8px"}},{default:u(()=>[l(Yo)]),_:1}),l(rn,{class:Z(t(H)?"bg-[#141414]":"bg-[#f0f2f5]"),"content-style":"padding: 24px 24px 0  24px; border-radius: 8px"},{default:u(()=>[l(ln,{class:"h-full",style:{"border-radius":"16px"},bordered:!1,onClick:i[31]||(i[31]=R=>me.value=!1)},{default:u(()=>[t(W)?(r(),C(Fs,{key:0})):N("",!0),t(o)?(r(),C(t(xe),{key:1,justify:"space-between",align:"center",class:"mt-16px"},{default:u(()=>{var R,rt;return[l(t(fe),{disabled:((rt=(R=t(W))==null?void 0:R.taskRun)==null?void 0:rt.status)===t(he).RUNNING,class:"text-white",type:"primary","icon-placement":"left",onClick:i[0]||(i[0]=te=>se.value=!0)},{icon:u(()=>[l(B,{type:"plus"})]),default:u(()=>[M(" "+T(t(n)("Page.AccountManager.Label.SetupAutomation")),1)]),_:1},8,["disabled"]),t($).length>0?(r(),b("div",zs,[l(t(xe),null,{default:u(()=>[g("div",null,T(t(n)("Page.AccountManager.Label.Filtering"))+" "+T(t($).length),1),g("div",{class:"text-[#6280FD] cursor-pointer",onClick:i[1]||(i[1]=te=>$.value=[])},T(t(n)("Common.Button.Delete")),1)]),_:1})])):N("",!0),g("div",js,[l(t(Ye),{style:{width:"600px",padding:"12px"},trigger:"click","display-directive":"show",placement:"bottom-end","show-arrow":!1,"onUpdate:show":i[3]||(i[3]=te=>Ie.value=te)},{trigger:u(()=>[l(t(fe),{class:Z([{active:t(Ie)},"w-24px h-24px p-0"]),quaternary:"",type:"primary"},{default:u(()=>[l(O,{value:t($).length},{default:u(()=>[l(B,{class:"cursor-pointer",type:"filter",size:"16",color:t(Ie)?"#5671FF":"#828282"},null,8,["color"])]),_:1},8,["value"])]),_:1},8,["class"])]),default:u(()=>[l(Ea,{filters:t($),"onUpdate:filters":i[2]||(i[2]=te=>ge($)?$.value=te:null),"field-list":t(k)},null,8,["filters","field-list"])]),_:1}),l(t(Ye),{style:{width:"260px",padding:"16px"},trigger:"click","display-directive":"show",placement:"bottom-end","show-arrow":!1,"onUpdate:show":i[4]||(i[4]=te=>ve.value=te)},{trigger:u(()=>[l(t(fe),{class:Z([{active:t(ve)},"w-24px h-24px p-0"]),quaternary:"",type:"primary"},{default:u(()=>[l(B,{class:"cursor-pointer",type:"settings",size:"16",color:t(ve)?"#5671FF":"#828282"},null,8,["color"])]),_:1},8,["class"])]),default:u(()=>[l(In)]),_:1}),l(t(fe),{ghost:"",type:"primary","icon-placement":"left",onClick:i[5]||(i[5]=te=>t(z).showInputAccountModal=!0)},{default:u(()=>[M(T(t(n)("Page.AccountManager.Button.AddAccounts")),1)]),_:1}),l(t(fe),{ghost:"",type:"primary","icon-placement":"left",onClick:i[6]||(i[6]=te=>t(J)(t(o)))},{icon:u(()=>[l(B,{type:"upload"})]),default:u(()=>[M(" "+T(t(n)("Page.AccountManager.Button.Export")),1)]),_:1}),l(t(fe),{type:"primary","icon-placement":"left",onClick:i[7]||(i[7]=te=>t(z).showImportFileModal=!0)},{icon:u(()=>[l(B,{type:"download",color:"white"})]),default:u(()=>[g("div",Ys,T(t(n)("Page.AccountManager.Button.ImportFile")),1)]),_:1})])]}),_:1})):N("",!0),g("div",Ws,[l(t(_e),null,{default:u(()=>[M(T(t(n)("Page.AccountManager.Label.All"))+" "+T(t(h).length),1)]),_:1}),l(t(_e),{type:"info"},{default:u(()=>[M(T(t(n)("Page.AccountManager.Label.Selected"))+" "+T(t(v).length),1)]),_:1}),l(t(_e),{type:"success"},{default:u(()=>[M(T(t(n)("Page.AccountManager.Label.Running"))+" "+T(t(Y).length),1)]),_:1})]),l(X,{ref_key:"target",ref:Ne,"checked-row-keys":t(v),"onUpdate:checkedRowKeys":[i[8]||(i[8]=R=>ge(v)?v.value=R:null),vt],class:"mt-16px prevent-select",size:"small",columns:t(oe),loading:t(y),data:t($).length?t(A):t(h),"single-line":!1,"row-key":R=>R.id,"row-props":gt,"max-height":t(nt),"scroll-x":t(at),"virtual-scroll-x":"","virtual-scroll-header":"",onContextmenu:At,onClick:Tt,onMouseenter:Tt,onMouseleave:He},null,8,["checked-row-keys","columns","loading","data","row-key","max-height","scroll-x"]),t(P).length?(r(),C(t(Ye),{key:2,show:t(me),"onUpdate:show":i[9]||(i[9]=R=>ge(me)?me.value=R:null),to:"body",style:{width:"200px",padding:"4px"},x:t(qe),y:t(be),trigger:"manual",placement:"right-start","show-arrow":!1,onOnClickoutside:i[10]||(i[10]=R=>me.value=!t(me))},{default:u(()=>[l(Ca,{"context-menu":t(P),onSelect:Zt},null,8,["context-menu"])]),_:1},8,["show","x","y"])):N("",!0),l(Ae,{"is-show":t(F).show,header:t(n)("Page.AccountManager.Label.AssignProfileToAccount"),icon:"devices","submit-label":t(n)("Common.Button.Assign"),"cancel-label":t(n)("Common.Button.Cancel"),"action-submit":Jt,loading:t(y),onClose:i[12]||(i[12]=R=>t(F).show=!1)},{body:u(()=>[l(t(xe),{vertical:""},{default:u(()=>[l(Ue,{label:t(n)("Common.Label.Profile"),"show-feedback":!1},{default:u(()=>[l(Mn,{"model-value":t(F).profileId,"onUpdate:modelValue":i[11]||(i[11]=R=>t(F).profileId=R),automation:!1,filterable:"",clearable:""},null,8,["model-value"])]),_:1},8,["label"])]),_:1})]),_:1},8,["is-show","header","submit-label","cancel-label","loading"]),l(Ae,{"is-show":t(F).showEditAccount,header:t(n)("Page.AccountManager.Label.EditAccount"),icon:"devices","submit-label":t(n)("Common.Button.Update"),"action-submit":en,loading:t(y),onClose:i[13]||(i[13]=R=>t(F).showEditAccount=!1)},{body:u(()=>[t(F).account?(r(),C(t(xe),{key:0,vertical:""},{default:u(()=>[(r(!0),b(ne,null,ce(Object.values(t(k)),(R,rt)=>(r(),C(Ue,{key:rt,label:R.title,"show-feedback":!1},{default:u(()=>[R.type==="password"?(r(),C(Ee,{key:0,value:t(F).account.data[R.key],"onUpdate:value":te=>t(F).account.data[R.key]=te,type:"password","show-password-on":"mousedown"},null,8,["value","onUpdate:value"])):R.type==="email"?(r(),C(Ee,{key:1,value:t(F).account.data[R.key],"onUpdate:value":te=>t(F).account.data[R.key]=te},null,8,["value","onUpdate:value"])):["multiSelect","select","status"].includes(R.type)?(r(),C(lt,{key:2,value:t(F).account.data[R.key],"onUpdate:value":te=>t(F).account.data[R.key]=te,options:R.options,multiple:R.type==="multiSelect","max-tag-count":"responsive","label-field":"value"},null,8,["value","onUpdate:value","options","multiple"])):R.type==="date"?(r(),C(sn,{key:3,value:t(F).account.data[R.key],"onUpdate:value":te=>t(F).account.data[R.key]=te,type:"datetime"},null,8,["value","onUpdate:value"])):(r(),C(Ee,{key:4,value:t(F).account.data[R.key],"onUpdate:value":te=>t(F).account.data[R.key]=te},null,8,["value","onUpdate:value"]))]),_:2},1032,["label"]))),128))]),_:1})):N("",!0)]),_:1},8,["is-show","header","submit-label","loading"]),l(Oa,{show:t(z).showImportFileModal,"onUpdate:show":i[14]||(i[14]=R=>t(z).showImportFileModal=R),onImported:i[15]||(i[15]=R=>t(V)(!0))},null,8,["show"]),t(z).showInputAccountModal?(r(),C(La,{key:3,show:t(z).showInputAccountModal,"onUpdate:show":i[16]||(i[16]=R=>t(z).showInputAccountModal=R),onImported:i[17]||(i[17]=R=>t(V)(!0))},null,8,["show"])):N("",!0),l(za,{show:t(z).showUpdateAccountModal,"onUpdate:show":i[18]||(i[18]=R=>t(z).showUpdateAccountModal=R),accounts:t(h),"data-update":t(v),onImported:i[19]||(i[19]=()=>{t(V)(!0),v.value=[]})},null,8,["show","accounts","data-update"]),l(Wa,{show:t(z).showCustomCopyModal,"onUpdate:show":i[20]||(i[20]=R=>t(z).showCustomCopyModal=R),onChange:Kt},null,8,["show"]),l(Ra,{show:t(z).showInsertAccountModal,"onUpdate:show":i[21]||(i[21]=R=>t(z).showInsertAccountModal=R),onImported:i[22]||(i[22]=R=>t(V)(!0))},null,8,["show"]),l(qa,{show:t(Se),"onUpdate:show":i[23]||(i[23]=R=>ge(Se)?Se.value=R:null)},null,8,["show"]),l(ls,{show:t(se),"onUpdate:show":i[24]||(i[24]=R=>ge(se)?se.value=R:null)},null,8,["show"]),l(Ke,{type:"delete",icon:"trash",header:t(n)("Page.AccountManager.Label.DeleteAccounts"),"is-show":t(z).showDeleteAccountModal,"cancel-label":t(n)("Common.Button.Cancel"),"submit-label":t(n)("Common.Button.Confirm"),"action-submit":()=>{t(q)(),t(z).showDeleteAccountModal=!1},onClose:i[25]||(i[25]=R=>t(z).showDeleteAccountModal=!1)},{body:u(()=>[l(t(_e),null,{default:u(()=>[M(T(t(n)("Page.AccountManager.Label.DeleteAccountsConfirm",{number:t(v).length})),1)]),_:1})]),_:1},8,["header","is-show","cancel-label","submit-label","action-submit"]),l(Ke,{type:"warning",icon:"copy",header:"Paste Data","is-show":t(z).showConfirmPasteDataModal,"cancel-label":t(n)("Common.Button.Cancel"),"submit-label":t(n)("Common.Button.Confirm"),"action-submit":an,onClose:i[26]||(i[26]=R=>t(z).showConfirmPasteDataModal=!1)},{body:u(()=>[l(t(_e),null,{default:u(()=>[M("Do you want to paste data?")]),_:1})]),_:1},8,["is-show","cancel-label","submit-label"]),l(Ke,{type:"delete",icon:"trash",header:"Delete Data","is-show":t(z).showDeleteColumnDataModal,"cancel-label":t(n)("Common.Button.Cancel"),"submit-label":t(n)("Common.Button.Confirm"),"action-submit":on,onClose:i[27]||(i[27]=R=>t(z).showDeleteColumnDataModal=!1)},{body:u(()=>[l(t(_e),null,{default:u(()=>[M("Do you want to delete data?")]),_:1})]),_:1},8,["is-show","cancel-label","submit-label"]),l(Ae,{"is-show":t(z).showModalAssignProfiles,header:t(n)("Page.AccountManager.Label.AssignProfilesHeader",{number:t(z).ids.length}),icon:"doc","submit-label":t(n)("Common.Button.Assign"),"cancel-label":t(n)("Common.Button.Cancel"),"action-submit":Dt,loading:t(y),onClose:i[30]||(i[30]=R=>t(z).showModalAssignProfiles=!1)},{body:u(()=>[l(t(xe),{vertical:""},{default:u(()=>[M(T(t(n)("Common.Label.Total"))+" "+T(t(ye).trim().split(`
`).length)+" ",1),l(Ee,{value:t(ye),"onUpdate:value":i[28]||(i[28]=R=>ge(ye)?ye.value=R:null),placeholder:"Enter profile Id and name. Format: <id>|<name> ",type:"textarea",clearable:"",class:"w-full",onKeyup:i[29]||(i[29]=_n(R=>Dt(),["enter"]))},null,8,["value"])]),_:1})]),_:1},8,["is-show","header","submit-label","cancel-label","loading"])]),_:1})]),_:1},8,["class"])]),_:1})}}});const zl=$e(Vs,[["__scopeId","data-v-495c5831"]]);export{zl as default};
