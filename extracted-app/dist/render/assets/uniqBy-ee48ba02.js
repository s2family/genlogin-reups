import{bV as x,a2 as B,bd as G,b1 as C,am as L,aj as D,bE as U,aL as $,bZ as q,b_ as I,dn as T,dp as j,be as N}from"./main-8b08e1d6.js";import{u as z,_ as E,c as O}from"./_baseUniq-35fed69a.js";import{b as i,c as A,h as v,w as F}from"./_plugin-vue_export-helper-b059e461.js";import{g as K}from"./lodash-6114c6d4.js";const M=i(!1),b=i(null),V=i(null),ee=()=>{const l=x(),{t}=B(),d=z(),a=i([]),o=i(!1),r=e=>({style:"cursor: pointer;",onClick:async n=>{[...n.target.classList].includes("n-data-table-td")&&(b.value=e)}}),m=i({limit:25,offset:0,order:"desc",sort_by:"id",search:""}),u=G("profile-groups-pagination",{page:1,limit:25,current_offset:0,next_offset:0,total_items:0}),p=async(e={offset:0,limit:m.value.limit})=>{if(!o.value)try{o.value=!0;const{limit:n,offset:w}=e,S=await q(Object.assign(m.value,{offset:w,limit:n})),{data:h}=S.data;a.value=h.items,u.value=h.pagination}catch{a.value=[]}finally{o.value=!1}},y=C(async()=>{await p()},500),s=async e=>{await I(e),await l.getTotalProfiles()},c=async(e,n)=>await T(e,n),f=async e=>{await j([e])},_=async e=>{u.value.page=e;const n=u.value.limit*(e-1),w=u.value.limit;await p({offset:n,limit:w})},g=async e=>{u.value.page=1,await p({offset:0,limit:e})},P=e=>{d.error({title:t("Common.Label.Confirm"),content:t("Page.Profiles.Label.ConfirmDeleteGroup"),positiveText:t("Common.Button.NotSure"),negativeText:t("Common.Button.Sure"),onNegativeClick:async()=>{try{await f(e),await p(),await l.getTotalProfiles(),window.$message.success(t("Page.Profiles.Label.GroupDeleted"))}catch{}finally{b.value=null}}})},k=A(()=>[{title:t("Page.Profiles.Label.GroupName"),key:"name"},{title:t("Common.Label.Actions"),key:"action",ellipsis:!0,fixed:"right",width:"200",render:e=>v($,null,{default:()=>[v(L,{ghost:!0,type:"error",size:"small",onClick:()=>P(e.id)},{default:()=>t("Common.Button.Delete"),icon:()=>v(D,null,{default:()=>v(U)})})]})}]);return{showModal:M,selectedGroup:b,groupBulkId:V,loading:o,groups:a,rowProps:r,groupColumns:k,defaultParams:m,pagination:u,getGroups:p,debounceSearchGroups:y,addGroup:s,updateGroup:c,deleteGroup:f,onPageUpdate:_,onPageSizeUpdate:g,handleDelete:P}},te=l=>{const t=i(!1),d=i([]),a=i({limit:25,offset:0,order:"desc",search:"",sort_by:"id"}),o=G("profiles-pagination",{page:1,limit:25,current_offset:0,next_offset:0,total_items:0}),r=async(s={offset:0,limit:o.value.limit})=>{if(!t.value)try{t.value=!0;const{limit:c,offset:f}=s,_=await N(Object.assign(a.value,{offset:f,limit:c}),[l]),{data:g}=_.data;d.value=g.items,o.value=g.pagination,a.value.limit=g.pagination.limit}catch{d.value=[]}finally{t.value=!1}},m=C(async()=>{await r()},500),u=async s=>{o.value.page=s;const c=o.value.limit*(s-1),f=o.value.limit;await r({offset:c,limit:f})},p=async s=>{o.value.page=1,await r({offset:0,limit:s})},y=async s=>{const{order:c,columnKey:f}=s;switch(f){case"name":a.value.sort_by="profile_name";break;case"created_at":a.value.sort_by="created_at";break;case"updated_at":a.value.sort_by="updated_at";break;default:a.value.sort_by="id";break}a.value.order==="desc"&&c!=="descend"?a.value.order="asc":a.value.order="desc",o.value.page=1,await r({offset:0,limit:a.value.limit})};return F(b,async s=>{s?await r():d.value=[]}),{loading:t,profiles:d,defaultParams:a,pagination:o,getProfiles:r,debounceSearch:m,onPageUpdate:u,onPageSizeUpdate:p,onSortChange:y}};var Z=E,H=O;function J(l,t){return l&&l.length?H(l,Z(t)):[]}var Q=J;const ae=K(Q);export{ae as a,te as b,ee as u};
