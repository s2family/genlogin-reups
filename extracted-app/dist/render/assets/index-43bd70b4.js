import{I as B,H as V,au as D,a2 as j,ah as O,aJ as v,ae as P,eM as q,am as F}from"./main-8b08e1d6.js";import{M as x}from"./Modal-0f4a5102.js";import{_ as H}from"./InputSearch.vue_vue_type_script_setup_true_lang-d786940a.js";import{d as J,b as Y,c as z,f as G,S as M,U as y,V as U,D as t,u as e,Y as s,E as i,$ as d,a2 as A,F as K}from"./_plugin-vue_export-helper-b059e461.js";import{_ as Q}from"./DataTable-e5054828.js";import{_ as W}from"./Input-96fa4693.js";import{_ as X}from"./FormItem-52ed65a1.js";import{_ as Z}from"./Checkbox-ce86da58.js";import{_ as ee}from"./Form-e484375f.js";import"./lodash-6114c6d4.js";import"./axios-1e30d922.js";import"./xlsx-f5126985.js";import"./Divider-65f3d898.js";import"./RadioGroup-69a7fbba.js";import"./Radio-c980589e.js";import"./Suffix-fc59bb7a.js";import"./Select-f7c79767.js";import"./Pagination-ce77c3f3.js";const ae={class:"flex items-center justify-between"},oe={class:"flex items-center gap-8px"},le={key:0,class:"flex items-center justify-between w-full"},te={key:0,class:"flex items-center justify-between w-full"},ye=J({__name:"TeamMembers",setup(ne){const{user:h}=B(V()),{showModal:p,subAccount:o,columns:S,subAccounts:C,loading:u,getSubAccounts:E,upsertSubAccount:L}=D(),{t:l}=j(),_=Y(),$=z(()=>_.value?C.value.filter(c=>c.email.toLowerCase().includes(_.value.toLowerCase())):C.value),b=()=>{o.email="",o.password="",p.createNew=!1,p.edit=!1},R=async()=>{var c,a;try{if(o.email){if(!o.password)return window.$message.warning(l("Page.TeamMembers.Msg.PasswordRequired"))}else return window.$message.warning(l("Page.TeamMembers.Msg.EmailRequired"));if(((a=(c=h.value)==null?void 0:c.plan)==null?void 0:a.id)===P.AIRDROP&&!q(o.email))return window.$message.warning(l("Common.Msg.EmailInvalid"));u.value=!0,await L(o,!0)&&(window.$message.success(l("Page.TeamMembers.Msg.Created")),b())}catch{}finally{u.value=!1}},I=async()=>{try{u.value=!0,await L(o,!0)&&(window.$message.success(l("Page.TeamMembers.Msg.Updated")),b())}catch{}finally{u.value=!1}};return G(async()=>{await E()}),(c,a)=>{const k=F,N=Q,w=W,g=X,m=Z,T=ee;return M(),y(K,null,[U("div",ae,[t(H,{class:"!w-auto",value:e(_),placeholder:e(l)("Common.Label.Search"),onChange:a[0]||(a[0]=r=>_.value=r),onInput:a[1]||(a[1]=r=>_.value=r)},null,8,["value","placeholder"]),t(k,{style:{color:"white"},type:"primary",onClick:a[2]||(a[2]=r=>e(p).createNew=!0)},{default:s(()=>[U("div",oe,[t(O,{type:"addBold"}),i(" "+d(e(l)("Page.TeamMembers.Button.AddMember")),1)])]),_:1})]),t(N,{class:"mt-16px",columns:e(S),data:e($),"row-key":r=>r.id,"max-height":"70vh",loading:e(u)},null,8,["columns","data","row-key","loading"]),t(x,{"is-show":e(p).createNew,header:e(l)("Page.TeamMembers.Label.AddMemberTitle"),icon:"users","submit-label":e(l)("Common.Button.Add"),loading:e(u),"action-submit":R,onClose:b},{body:s(()=>[t(T,null,{default:s(()=>{var r,f;return[t(g,{label:e(l)("Common.Label.Email")},{default:s(()=>[t(w,{value:e(o).email,"onUpdate:value":a[3]||(a[3]=n=>e(o).email=n),placeholder:e(l)("Common.Label.Email"),"allow-input":e(v)},null,8,["value","placeholder","allow-input"])]),_:1},8,["label"]),t(g,{label:e(l)("Common.Label.Password")},{default:s(()=>[t(w,{value:e(o).password,"onUpdate:value":a[4]||(a[4]=n=>e(o).password=n),type:"password",placeholder:e(l)("Common.Label.Password"),"allow-input":e(v)},null,8,["value","placeholder","allow-input"])]),_:1},8,["label"]),((f=(r=e(h))==null?void 0:r.plan)==null?void 0:f.id)!==e(P).AIRDROP?(M(),y("div",le,[t(m,{checked:e(o).can_create_profile,"onUpdate:checked":a[5]||(a[5]=n=>e(o).can_create_profile=n)},{default:s(()=>[i(d(e(l)("Page.TeamMembers.Label.CreateProfile")),1)]),_:1},8,["checked"]),t(m,{checked:e(o).can_view_profile,"onUpdate:checked":a[6]||(a[6]=n=>e(o).can_view_profile=n)},{default:s(()=>[i(d(e(l)("Page.TeamMembers.Label.ViewProfile")),1)]),_:1},8,["checked"]),t(m,{checked:e(o).can_share_profile,"onUpdate:checked":a[7]||(a[7]=n=>e(o).can_share_profile=n)},{default:s(()=>[i(d(e(l)("Page.TeamMembers.Label.ShareProfile")),1)]),_:1},8,["checked"]),t(m,{checked:e(o).can_edit_proxy,"onUpdate:checked":a[8]||(a[8]=n=>e(o).can_edit_proxy=n)},{default:s(()=>[i(d(e(l)("Page.TeamMembers.Label.EditProxy")),1)]),_:1},8,["checked"])])):A("",!0)]}),_:1})]),_:1},8,["is-show","header","submit-label","loading"]),t(x,{"is-show":e(p).edit,header:e(l)("Page.TeamMembers.Label.EditMemberTitle"),icon:"users","submit-label":e(l)("Common.Button.Update"),loading:e(u),"action-submit":I,onClose:b},{body:s(()=>[t(T,null,{default:s(()=>{var r,f;return[t(g,{label:e(l)("Common.Label.Email")},{default:s(()=>[t(w,{value:e(o).email,"onUpdate:value":a[9]||(a[9]=n=>e(o).email=n),disabled:"",placeholder:e(l)("Common.Label.Email"),"allow-input":e(v)},null,8,["value","placeholder","allow-input"])]),_:1},8,["label"]),t(g,{label:e(l)("Common.Label.Password")},{default:s(()=>[t(w,{value:e(o).password,"onUpdate:value":a[10]||(a[10]=n=>e(o).password=n),type:"password",placeholder:e(l)("Common.Label.Password"),"allow-input":e(v)},null,8,["value","placeholder","allow-input"])]),_:1},8,["label"]),((f=(r=e(h))==null?void 0:r.plan)==null?void 0:f.id)!==e(P).AIRDROP?(M(),y("div",te,[t(m,{checked:e(o).can_create_profile,"onUpdate:checked":a[11]||(a[11]=n=>e(o).can_create_profile=n)},{default:s(()=>[i(d(e(l)("Page.TeamMembers.Label.CreateProfile")),1)]),_:1},8,["checked"]),t(m,{checked:e(o).can_view_profile,"onUpdate:checked":a[12]||(a[12]=n=>e(o).can_view_profile=n)},{default:s(()=>[i(d(e(l)("Page.TeamMembers.Label.ViewProfile")),1)]),_:1},8,["checked"]),t(m,{checked:e(o).can_share_profile,"onUpdate:checked":a[13]||(a[13]=n=>e(o).can_share_profile=n)},{default:s(()=>[i(d(e(l)("Page.TeamMembers.Label.ShareProfile")),1)]),_:1},8,["checked"]),t(m,{checked:e(o).can_edit_proxy,"onUpdate:checked":a[14]||(a[14]=n=>e(o).can_edit_proxy=n)},{default:s(()=>[i(d(e(l)("Page.TeamMembers.Label.EditProxy")),1)]),_:1},8,["checked"])])):A("",!0)]}),_:1})]),_:1},8,["is-show","header","submit-label","loading"])],64)}}});export{ye as default};
