import{M as ue}from"./Modal-0f4a5102.js";import{bf as _e,a2 as pe,eO as R,bg as _,bs as re,bA as fe,ah as P,br as ye,aL as ve,fL as H,fM as J,eN as me,a7 as xe,ao as be,a8 as he,am as ke,a9 as ge,eP as we}from"./main-8b08e1d6.js";import{d as Ne,b as x,c as O,w as W,S as r,U as f,D as t,Y as a,u as e,V as s,E as o,$ as i,q as j,X as Pe,a2 as I,F as Z,ad as Te,ae as Ce,h as ee,ab as Se,ac as De,a1 as Ae}from"./_plugin-vue_export-helper-b059e461.js";import{_ as Ie}from"./InputNumber-c85d5887.js";import{_ as Ve}from"./Divider-65f3d898.js";import{_ as Ee}from"./Select-f7c79767.js";import"./lodash-6114c6d4.js";import"./axios-1e30d922.js";import"./xlsx-f5126985.js";import"./Input-96fa4693.js";import"./Suffix-fc59bb7a.js";import"./Remove-be3cc84a.js";const B=V=>(Se("data-v-a7291aaf"),V=V(),De(),V),Re={key:0},Oe={key:0,class:"flex gap-16px"},Be={class:"w-full"},Ye={class:"w-full bg-gray-500 bg-opacity-5 p-16px"},Me=B(()=>s("div",{class:"mb-12px font-semibold"}," Order detail ",-1)),Ue={class:"flex items-center my-16px gap-8px"},je={class:"w-full"},$e={class:"flex flex-col gap-4px"},Le={class:"flex items-center justify-between"},Xe={class:"flex items-center justify-between"},Fe={class:"my-16px"},Ke={class:"flex justify-between items-center"},ze={class:"my-16px flex justify-between items-center"},Ge={key:1,class:"flex gap-16px"},qe={class:"w-full"},Qe={class:"w-full bg-gray-500 bg-opacity-5 p-16px"},He=B(()=>s("div",{class:"mb-12px font-semibold"}," Order detail ",-1)),Je={key:0},We={class:"flex items-center my-16px gap-8px"},Ze={class:"w-full"},et={class:"flex flex-col gap-4px"},tt={class:"flex items-center justify-between"},st={class:"my-16px"},lt={class:"flex justify-between items-center"},at={class:"mt-8px flex justify-between items-center"},ot={class:"my-16px flex justify-between items-center"},nt={key:1},it={class:"flex items-center my-16px gap-8px"},ct={class:"w-full"},dt={class:"flex flex-col gap-4px"},ut={class:"flex items-center justify-between"},_t={class:"my-16px"},pt={class:"flex justify-between items-center"},rt={class:"my-16px flex justify-between items-center"},ft={key:2,class:"flex gap-16px"},yt={class:"w-full"},vt={class:"w-full bg-gray-500 bg-opacity-5 p-16px"},mt=B(()=>s("div",{class:"mb-12px font-semibold"}," Order detail ",-1)),xt={key:0},bt={class:"flex items-center my-16px gap-8px"},ht={class:"w-full"},kt={class:"flex flex-col gap-4px"},gt={class:"flex items-center justify-between"},wt={class:"my-16px"},Nt={class:"flex justify-between items-center"},Pt={class:"mt-8px flex justify-between items-center"},Tt={class:"my-16px flex justify-between items-center"},Ct={key:1},St={class:"flex items-center my-16px gap-8px"},Dt={class:"w-full"},At={class:"flex flex-col gap-4px"},It={class:"flex items-center justify-between"},Vt={class:"my-16px"},Et={class:"flex justify-between items-center"},Rt={class:"my-16px flex justify-between items-center"},Ot={key:1},Bt={class:"mb-16px payment"},Yt={class:"flex gap-8px mt-16px"},Mt={key:0},Ut={class:"mt-16px"},jt={key:1},$t={class:"flex mt-16px items-center justify-between"},Lt={key:2},Xt={class:"mt-16px"},Ft={key:3},Kt={class:"mt-16px"},zt={class:"flex gap-24px"},Gt={class:"qr-code w-full"},qt=["src"],Qt={class:"flex flex-col justify-between"},Ht={class:"flex flex-col gap-16px"},Jt={class:"flex gap-8px"},Wt={class:"font-semibold"},Zt={class:"flex gap-8px"},es={class:"font-semibold"},ts={class:"flex gap-8px"},ss={class:"font-semibold"},ls={class:"flex gap-8px"},as={class:"font-semibold"},os={class:"flex gap-8px"},ns={class:"font-semibold"},is=B(()=>s("div",{class:"font-semibold"}," Lưu ý nhập đúng cú pháp hệ thống sẽ nạp tự động hoặc bạn có thể quét mã QR. Vui lòng đợi từ 3 - 5 phút để hệ thống ghi nhận sau khi chuyển khoản. ",-1)),cs={class:"w-full mt-16px flex justify-end"},ds=Ne({__name:"BuyProxyModal",emits:["close"],setup(V,{emit:$}){const{unitPrice:L,showModal:T,selectedBuyProxy:n,extendProxy:h,renderProxyProvider:C}=_e(),{t:Y}=pe(),v=x(1e3),k=x(1),g=x(0),b=x(),w=x(!1),d=x({ip:1,day:R[0].value,country:"USA"}),te=O(()=>n.value?n.value.type===_.STATIC_V4?re:n.value.type===_.STATIC_ISP?fe:[]:[]),se=p=>{const{label:c,flag:l}=p;return ee(ve,{align:"center"},{default:()=>[l&&ee(ye,{country:l}),c]})},le=O(()=>v.value/1e3),S=x("VIETTEL"),ae=x([{label:"VIETTEL",value:"VIETTEL"},{label:"FPT",value:"FPT"},{label:"VNPT",value:"VNPT"}]),X=async()=>{var p,c;if(n.value.type===_.VINA_PROXY_V4){g.value=d.value.ip*L.value;return}else if(n.value.type===_.VINA_PROXY_DATA_CENTER){g.value=d.value.ip*L.value;return}else if(n.value.type===_.KENT_PROXY){try{if(!((p=n.value)!=null&&p.id))return;w.value=!0;const l={extras:{day:30,ip:d.value.ip,country:"VIETNAM",proxy_type:S.value},proxy_id:n.value.id},{data:N}=await H(l),m=await J({amount:N.data,from_currency:"VND",to_currency:"USD"});g.value=m.data.data}catch{}finally{w.value=!1}return}try{if(!((c=n.value)!=null&&c.id))return;w.value=!0;const l={extras:{ip:d.value.ip,country:d.value.country,day:d.value.day},proxy_id:n.value.id},{data:N}=await H(l),m=await J({amount:N.data,from_currency:"VND",to_currency:"USD"});g.value=m.data.data}catch{}finally{w.value=!1}};W(()=>d.value,()=>{d.value.ip&&d.value.day&&d.value.country&&X()},{deep:!0}),W(()=>n.value,async p=>{p&&[_.VINA_PROXY_V4,_.VINA_PROXY_DATA_CENTER,_.STATIC_V4,_.STATIC_ISP,_.KENT_PROXY].includes(n.value.type)&&await X()});const F=x([{label:"Bank",value:"BANK",icon:"bank"},{label:"Coin",value:"COIN",icon:"coin"},{label:"Crypto",value:"CRYPTO",icon:"bitcoin"},{label:"Card/Paypal",value:"CARD",icon:"creditCard"}]),y=x(F.value[0].value),oe=x(!1),D=x(!1),A=x(null),M=async()=>{try{let p;n.value.type===_.DYNAMIC?p={extras:{capacity:v.value},proxy_id:n.value.id,method:y.value}:[_.VINA_PROXY_V4,_.VINA_PROXY_DATA_CENTER].includes(n.value.type)?p={extras:{day:30,...h.value?{id_list:[h.value.id]}:{ip:d.value.ip,country:"VIETNAM"}},proxy_id:n.value.id,method:y.value}:n.value.type===_.KENT_PROXY?p={extras:{day:30,...h.value?{id_list:[h.value.id]}:{ip:d.value.ip,country:"VIETNAM",proxy_type:S.value}},proxy_id:n.value.id,method:y.value}:p={extras:{day:d.value.day,...h.value?{id_list:[h.value.id]}:{ip:d.value.ip,country:d.value.country}},proxy_id:n.value.id,method:y.value};const{data:c}=await we(p);b.value=c.data,window.$message.success(Y("Page.Proxy.Modal.BuyProxy.Success"))}catch{}},U=O(()=>v.value/1e3*1.5),K=async()=>{try{A.value&&clearInterval(A.value);const p=window.$message.create("Loading",{type:"loading"});T.buyProxy=!1,y.value==="BANK"&&(await M(),b.value.extras.method.bank_id&&(T.buyProxy=!1,D.value=!0,A.value=setInterval(async()=>{const{data:{data:c}}=await me();c.data[0].update_status==="DONE"&&(window.$message.success("Payment success!"),clearInterval(A.value),D.value=!1)},5e3))),y.value==="CRYPTO"&&(await M(),b.value.extras.method.url&&(T.buyProxy=!1,y.value="BANK",window.open(b.value.extras.method.url,"_blank"))),y.value==="CARD"&&(await M(),b.value.extras.method.url&&(T.buyProxy=!1,y.value="BANK",window.open(b.value.extras.method.url,"_blank"))),p.destroy()}catch{}finally{k.value=1,v.value=1e3}},ne=O(()=>n.value?k.value===1?n.value.type===_.DYNAMIC?!v.value:!(d.value.ip&&d.value.day&&d.value.country):!1:!0),z=()=>{d.value={ip:1,day:R[0].value,country:"USA"},S.value="VIETTEL",n.value={}},ie=()=>{D.value=!1,A.value&&clearInterval(A.value),z(),$("close")},ce=()=>{T.buyProxy=!1,k.value=1,h.value=null,z(),$("close")};return(p,c)=>{const l=xe,N=Ie,m=Ve,E=Ee,G=be,q=he,Q=ke,de=ge;return r(),f(Z,null,[t(ue,{"is-show":e(T).buyProxy,header:e(h)?"Extend Proxy":"Add Proxy",icon:"proxy","is-button-back":e(k)===2,"submit-label":e(k)===2?" Buy Proxy":"Next",width:"1000px","is-disable":e(ne),onActionSubmit:c[8]||(c[8]=u=>e(k)===1?k.value=2:K),onClose:ce,onClickSubmit:c[9]||(c[9]=()=>{e(k)===1?k.value=2:K()}),onBack:c[10]||(c[10]=u=>k.value=1)},{body:a(()=>[e(k)===1?(r(),f("div",Re,[e(n).type===e(_).DYNAMIC?(r(),f("div",Oe,[s("div",Be,[t(l,null,{default:a(()=>[o("Please note that buying capacity only for "+i(e(C)(e(n).type)),1)]),_:1}),t(l,{class:"block mt-16px font-semibold text-lg"},{default:a(()=>[o(" Buy capacity ")]),_:1}),t(l,{class:"mt-8px block text"},{default:a(()=>[o(" Capacity: ")]),_:1}),t(N,{value:e(v),"onUpdate:value":c[0]||(c[0]=u=>j(v)?v.value=u:null),min:1e3,step:1e3,class:"mt-8px w-full",placeholder:"Min: 1000MB",validator:u=>u%1e3===0},null,8,["value","validator"])]),s("div",Ye,[Me,s("div",Ue,[t(P,{type:"proxy",class:"icon",size:24,color:"#5671FF"}),s("div",je,[s("div",$e,[s("div",Le,[t(l,{class:"block font-semibold"},{default:a(()=>[o(i(e(C)(e(n).type)),1)]),_:1}),t(l,{class:"block font-semibold"},{default:a(()=>[o(" $"+i(e(U))+" USD ",1)]),_:1})]),s("div",Xe,[t(l,{depth:"3",class:"block text-xs"},{default:a(()=>[o(" Quantity ")]),_:1}),t(l,{depth:"3",class:"block text-xs"},{default:a(()=>[o(i(e(le))+" GB ",1)]),_:1})])])])]),t(m),s("div",Fe,[s("div",Ke,[t(l,{class:"block"},{default:a(()=>[o(" Subtotal ")]),_:1}),t(l,{class:"block font-semibold"},{default:a(()=>[o(" $"+i(e(U))+" USD ",1)]),_:1})])]),t(m),s("div",ze,[t(l,{class:"block font-semibold"},{default:a(()=>[o(" Total ")]),_:1}),t(l,{class:"block font-semibold"},{default:a(()=>[o(" $"+i(e(U))+" USD ",1)]),_:1})])])])):[e(_).VINA_PROXY_V4,e(_).VINA_PROXY_DATA_CENTER,e(_).KENT_PROXY].includes(e(n).type)?(r(),f("div",Ge,[s("div",qe,[t(l,null,{default:a(()=>[o("Please note that buying capacity only for "+i(e(C)(e(n).type)),1)]),_:1}),t(l,{class:"block mt-16px font-semibold text-lg"},{default:a(()=>[o(" Buy capacity ")]),_:1}),t(l,{class:"mt-8px block text"},{default:a(()=>[o(" Quantity: ")]),_:1}),t(N,{value:e(d).ip,"onUpdate:value":c[1]||(c[1]=u=>e(d).ip=u),disabled:!!e(h)||e(w),class:"mt-8px w-full"},null,8,["value","disabled"]),e(n).type===e(_).KENT_PROXY?(r(),Pe(E,{key:0,value:e(S),"onUpdate:value":c[2]||(c[2]=u=>j(S)?S.value=u:null),class:"mt-8px",options:e(ae)},null,8,["value","options"])):I("",!0),t(l,{class:"mt-16px block text"},{default:a(()=>[o(" Day: ")]),_:1}),t(E,{value:e(d).day,"onUpdate:value":c[3]||(c[3]=u=>e(d).day=u),disabled:"",class:"mt-8px",options:e(R)},null,8,["value","options"])]),s("div",Qe,[t(G,{show:e(w)},{default:a(()=>[He,e(n).type===e(_).DYNAMIC?(r(),f("div",Je,[s("div",We,[t(P,{type:"proxy",class:"icon",size:24,color:"#5671FF"}),s("div",Ze,[s("div",et,[s("div",tt,[t(l,{class:"block font-semibold"},{default:a(()=>[o(i(e(n).type),1)]),_:1}),t(l,{class:"block font-semibold"},{default:a(()=>[o(i(e(n).unit_price*Number(e(v)))+" VND ",1)]),_:1})])])])]),t(m),s("div",st,[s("div",lt,[t(l,{class:"block"},{default:a(()=>[o(" Subtotal ")]),_:1}),t(l,{class:"block font-semibold"},{default:a(()=>[o(i(e(n).unit_price*Number(e(v)))+" VND ",1)]),_:1})]),s("div",at,[t(l,{class:"block"},{default:a(()=>[o(" Discount ")]),_:1}),t(l,{class:"block font-semibold"},{default:a(()=>[o(" 0 VND ")]),_:1})])]),t(m),s("div",ot,[t(l,{class:"block font-semibold"},{default:a(()=>[o(" Total ")]),_:1}),t(l,{class:"block font-semibold"},{default:a(()=>[o(i(e(n).unit_price*Number(e(v)))+" VND ",1)]),_:1})])])):(r(),f("div",nt,[s("div",it,[t(P,{type:"proxy",class:"icon",size:24,color:"#5671FF"}),s("div",ct,[s("div",dt,[s("div",ut,[t(l,{class:"block font-semibold"},{default:a(()=>[o(i(e(C)(e(n).type)),1)]),_:1}),t(l,{class:"block font-semibold"},{default:a(()=>[o(" $"+i(e(g))+" USD ",1)]),_:1})])])])]),t(m),s("div",_t,[s("div",pt,[t(l,{class:"block"},{default:a(()=>[o(" Subtotal ")]),_:1}),t(l,{class:"block font-semibold"},{default:a(()=>[o(" $"+i(e(g))+" USD ",1)]),_:1})])]),t(m),s("div",rt,[t(l,{class:"block font-semibold"},{default:a(()=>[o(" Total ")]),_:1}),t(l,{class:"block font-semibold"},{default:a(()=>[o(" $"+i(e(g))+" USD ",1)]),_:1})])]))]),_:1},8,["show"])])])):(r(),f("div",ft,[s("div",yt,[t(l,null,{default:a(()=>[o("Please note that buying capacity only for "+i(e(C)(e(n).type)),1)]),_:1}),t(l,{class:"block mt-16px font-semibold text-lg"},{default:a(()=>[o(" Buy capacity ")]),_:1}),t(l,{class:"mt-8px block text"},{default:a(()=>[o(" Quantity: ")]),_:1}),t(N,{value:e(d).ip,"onUpdate:value":c[4]||(c[4]=u=>e(d).ip=u),disabled:!!e(h)||e(w),class:"mt-8px w-full"},null,8,["value","disabled"]),t(l,{class:"mt-16px block text"},{default:a(()=>[o(" Country: ")]),_:1}),t(E,{value:e(d).country,"onUpdate:value":c[5]||(c[5]=u=>e(d).country=u),class:"mt-8px",disabled:!!e(h)||e(w),options:e(te),"render-label":se},null,8,["value","disabled","options"]),t(l,{class:"mt-16px block text"},{default:a(()=>[o(" Day: ")]),_:1}),t(E,{value:e(d).day,"onUpdate:value":c[6]||(c[6]=u=>e(d).day=u),disabled:e(w),class:"mt-8px",options:e(R)},null,8,["value","disabled","options"])]),s("div",vt,[t(G,{show:e(w)},{default:a(()=>[mt,e(n).type===e(_).DYNAMIC?(r(),f("div",xt,[s("div",bt,[t(P,{type:"proxy",class:"icon",size:24,color:"#5671FF"}),s("div",ht,[s("div",kt,[s("div",gt,[t(l,{class:"block font-semibold"},{default:a(()=>[o(i(e(n).type),1)]),_:1}),t(l,{class:"block font-semibold"},{default:a(()=>[o(i(e(n).unit_price*Number(e(v)))+" VND ",1)]),_:1})])])])]),t(m),s("div",wt,[s("div",Nt,[t(l,{class:"block"},{default:a(()=>[o(" Subtotal ")]),_:1}),t(l,{class:"block font-semibold"},{default:a(()=>[o(i(e(n).unit_price*Number(e(v)))+" VND ",1)]),_:1})]),s("div",Pt,[t(l,{class:"block"},{default:a(()=>[o(" Discount ")]),_:1}),t(l,{class:"block font-semibold"},{default:a(()=>[o(" 0 VND ")]),_:1})])]),t(m),s("div",Tt,[t(l,{class:"block font-semibold"},{default:a(()=>[o(" Total ")]),_:1}),t(l,{class:"block font-semibold"},{default:a(()=>[o(i(e(n).unit_price*Number(e(v)))+" VND ",1)]),_:1})])])):(r(),f("div",Ct,[s("div",St,[t(P,{type:"proxy",class:"icon",size:24,color:"#5671FF"}),s("div",Dt,[s("div",At,[s("div",It,[t(l,{class:"block font-semibold"},{default:a(()=>[o(i(e(C)(e(n).type)),1)]),_:1}),t(l,{class:"block font-semibold"},{default:a(()=>[o(" $"+i(e(g))+" USD ",1)]),_:1})])])])]),t(m),s("div",Vt,[s("div",Et,[t(l,{class:"block"},{default:a(()=>[o(" Subtotal ")]),_:1}),t(l,{class:"block font-semibold"},{default:a(()=>[o(" $"+i(e(g))+" USD ",1)]),_:1})])]),t(m),s("div",Rt,[t(l,{class:"block font-semibold"},{default:a(()=>[o(" Total ")]),_:1}),t(l,{class:"block font-semibold"},{default:a(()=>[o(" $"+i(e(g))+" USD ",1)]),_:1})])]))]),_:1},8,["show"])])]))])):(r(),f("div",Ot,[s("div",Bt,[t(l,{class:"font-semibold"},{default:a(()=>[o(i(e(Y)("Page.Billing.Label.PaymentMethod")),1)]),_:1}),s("div",Yt,[(r(!0),f(Z,null,Te(e(F),u=>(r(),f("div",{key:u.value,class:Ce(["w-full cursor-pointer pointer-events",{active:e(y)===u.value,disabled:u.value==="COIN"||u.value==="CARD"}])},[t(q,{onClick:us=>y.value=u.value},{default:a(()=>[t(P,{type:u.icon},null,8,["type"]),s("div",null,i(u.label),1)]),_:2},1032,["onClick"])],2))),128))]),e(y)==="BANK"?(r(),f("div",Mt,[s("div",Ut,[t(l,null,{default:a(()=>[o(i(e(Y)("Page.Billing.Label.PaymentDesc")),1)]),_:1})])])):I("",!0),e(y)==="COIN"?(r(),f("div",jt,[t(Q,{type:"primary",class:"pl-0 mt-16px",quaternary:"",onClick:c[7]||(c[7]=u=>oe.value=!0)},{default:a(()=>[t(P,{type:"topup",class:"mr-8px"}),o(" Top up ")]),_:1}),s("div",$t,[t(l,null,{default:a(()=>[o("Balance")]),_:1}),t(l,null,{default:a(()=>[o("300 Coin")]),_:1}),o(" Coming soon ")])])):I("",!0),e(y)==="CRYPTO"?(r(),f("div",Lt,[s("div",Xt,[t(l,null,{default:a(()=>[o(i(),1)]),_:1})])])):I("",!0),e(y)==="CARD"?(r(),f("div",Ft,[s("div",Kt,[t(l,null,{default:a(()=>[o(i(),1)]),_:1})])])):I("",!0)])]))]),_:1},8,["is-show","header","is-button-back","submit-label","is-disable"]),t(de,{show:e(D),"onUpdate:show":c[11]||(c[11]=u=>j(D)?D.value=u:null),"mask-closable":!1},{default:a(()=>[t(q,{class:"min-h-380px",style:{width:"700px"},bordered:!1,size:"huge"},{default:a(()=>[s("div",zt,[s("div",Gt,[s("img",{src:e(b).extras.method.url},null,8,qt)]),s("div",Qt,[s("div",Ht,[s("div",Jt,[o(" Ngân hàng: "),s("div",Wt,i(e(b).extras.method.bank_id),1)]),s("div",Zt,[o(" Số tài khoản: "),s("div",es,i(e(b).extras.method.account_no),1)]),s("div",ts,[o(" Chủ tài khoản: "),s("div",ss,i(e(b).extras.method.account_name),1)]),s("div",ls,[o(" Số tiền: "),s("div",as,i(e(b).extras.method.amount)+" VND ",1)]),s("div",os,[o(" Nội dung chuyển tiền: "),s("div",ns,i(e(b).extras.method.description),1)]),is]),s("div",cs,[t(Q,{class:"w-1/3",secondary:"",onClick:ie},{default:a(()=>[o(" Close ")]),_:1})])])])]),_:1})]),_:1},8,["show"])],64)}}});const ws=Ae(ds,[["__scopeId","data-v-a7291aaf"]]);export{ws as default};
