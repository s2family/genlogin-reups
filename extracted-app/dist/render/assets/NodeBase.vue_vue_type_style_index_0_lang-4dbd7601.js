import{d as w,B as $,c as v,S as p,U as y,V as d,D as r,Y as u,af as c,u as e,ae as h,L as C,$ as k,X as T,a2 as b}from"./_plugin-vue_export-helper-b059e461.js";import{a as E,A as s}from"./useScriptEditor-4173e447.js";import{ah as _,am as A,bu as O,aA as I}from"./main-8b08e1d6.js";const P={class:"node-base relative w-30"},z={class:"top-0 left-0 w-full absolute node-menu-container hidden",style:{transform:"translateY(-100%)"}},R={class:"flex gap-1 items-center dark:text-gray-300 node-menu mb-1"},V={class:"mt-5 top-0 left-0 w-full absolute node-menu-container",style:{transform:"translateY(150%)"}},j={class:"flex justify-between"},D={key:2,class:"font-semibold text-xs stop-loop"},M=w({__name:"NodeBase",props:{id:{type:String,required:!1},type:{type:String,required:!1},selected:{type:Boolean,required:!1},dragging:{type:Boolean,required:!1},connectable:{type:Boolean,required:!1},zIndex:{type:Number,required:!1},position:{type:Object,required:!1},dimensions:{type:Object,required:!1},data:{type:Object,required:!1},events:{type:Object,required:!1},label:{type:String,default:""},isValidTargetPos:{type:Boolean,required:!1},isValidSourcePos:{type:Boolean,required:!1},parentNode:{type:String,required:!1},dragHandle:{type:String,required:!1},sourcePosition:{type:String,required:!1},targetPosition:{type:String,required:!1}},emits:["updateNodeInternals","delete","run","edit","update"],setup(f,{emit:n}){const o=f,{data:t}=$(o),{automationSettings:S}=E(),m=v(()=>{switch(t.value.action){case s.LOOPV2:case s.BREAK:return t.value.options.loopId;case s.SPREADSHEET:return t.value.options.spreadSheetRefKey;default:return""}}),N=async()=>{await navigator.clipboard.writeText(m.value),window.$message.success("Id copied")};o.data.options.disabled===void 0&&n("update",{disabled:!1}),o.data.options.nodeSleep===void 0&&n("update",{nodeSleep:"0"}),o.data.options.nodeTimeout===void 0&&(o.data.action===s.PAUSE?n("update",{nodeTimeout:"0"}):n("update",{nodeTimeout:"30"})),o.data.options.timeoutNextNode===void 0&&n("update",{timeoutNextNode:"successNode"}),o.data.options.breakpoint===void 0&&n("update",{breakpoint:!1});const q=v(()=>o.data.action===s.CONTEXT_MENU);return(i,a)=>{const g=A,x=O,B=I;return p(),y("div",P,[d("div",z,[d("div",R,[r(g,{class:"node-toolbar-button",tertiary:"",strong:"",size:"tiny",title:"Delete node",onClick:a[0]||(a[0]=c(l=>i.$emit("delete",f.id),["stop"]))},{icon:u(()=>[r(_,{color:"red",type:"trash"})]),_:1}),r(g,{class:"node-toolbar-button",type:"primary",tertiary:"",strong:"",size:"tiny",title:"Run from this node",onClick:a[1]||(a[1]=c(l=>i.$emit("run",f.id),["stop"]))},{icon:u(()=>[r(_,{type:"play"})]),_:1}),r(x,{title:"Enable/Disable",class:"ml-auto node-toolbar-button",size:"small",value:!e(t).options.disabled,"on-update:value":l=>i.$emit("update",{disabled:!l})},null,8,["value","on-update:value"])])]),r(B,{trigger:"hover",style:{"max-width":"400px","max-height":"200px"},scrollable:"",delay:500,disabled:!e(t).options.description},{trigger:u(()=>[d("div",{class:h([{"inactive-node-card":e(t).options.disabled,"active-node-card":!e(t).options.disabled,"context-menu-node-card":e(q),"script-node-card":e(t).action===e(s).SCRIPT},"z-10 relative rounded"]),style:{padding:"10px"},onClick:a[2]||(a[2]=c(l=>i.$emit("edit"),["stop"]))},[C(i.$slots,"default")],2)]),default:u(()=>[d("span",null,k(e(t).options.description),1)]),_:3},8,["disabled"]),d("div",V,[d("div",j,[e(S).debug?(p(),T(_,{key:0,type:"breakpoint",class:"-left-15px cursor-pointer",color:e(t).options.breakpoint?"red":"gray",title:"Breakpoint",size:"12",onClick:a[3]||(a[3]=c(l=>i.$emit("update",{breakpoint:!e(t).options.breakpoint}),["stop"]))},null,8,["color"])):b("",!0),e(m)?(p(),y("span",{key:1,class:"cursor-pointer text-xs node-id",onClick:N},k(e(m)),1)):b("",!0),e(t).action===e(s).BREAK&&e(t).options.stopLoop?(p(),y("span",D," Stop ")):b("",!0)])])])}}});export{M as _};
