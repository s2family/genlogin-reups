import{bU as P,M as n,b1 as w,ah as S,aL as C,be as E}from"./main-8b08e1d6.js";import{c as O,f as H}from"./firefox-icon-2ab5a045.js";import{b as c,c as R,h as m}from"./_plugin-vue_export-helper-b059e461.js";const B=(g=!1)=>{const i=c([]),u=c(!1),b=c([]),o=c({limit:25,offset:0,order:"desc",sort_by:"id",is_reduction:!0,search:"",type:P.ALL}),s=c({page:1,limit:25,current_offset:0,next_offset:0,total_items:0}),v=R(()=>[...g?[{label:"Empty Chrome",value:n.CHROME,browser:n.CHROME}]:[],...i.value.map(e=>{const{id:a,profile_data:t,filename:r}=e;return{label:t.name,value:a,browser:n.CHROME,cloud:!!r}})]),_=e=>{const{label:a,cloud:t,browser:r,value:f}=e;return m(C,{align:"center"},{default:()=>[...f!==""?[m("img",{src:r===n.CHROME?O:H,width:"16"})]:[],a,...t?[m(S,{type:"cloud",size:20,color:"#55b3e6"})]:[]]})},l=async(e={offset:0,limit:25})=>{if(!u.value)try{u.value=!0;const{limit:a,offset:t}=e,r=await E(Object.assign(o.value,{offset:t,limit:a})),{data:f}=r.data,h=f.items.filter(d=>{var p;return((p=d==null?void 0:d.profile_data)==null?void 0:p.browser)===n.CHROME});i.value=[...h],s.value=f.pagination}catch{i.value=[]}finally{u.value=!1}},y=w(async()=>{await l()},500);return{selectedProfiles:b,defaultParams:o,profiles:i,profileOptions:v,loading:u,pagination:s,renderLabel:_,getProfiles:l,debounceSearch:y,onPageUpdate:async e=>{s.value.page=e;const a=s.value.limit*(e-1),t=s.value.limit;await l({offset:a,limit:t})},onPageSizeUpdate:async e=>{s.value.page=1,await l({offset:0,limit:e})},onSortChange:async e=>{console.log("ðŸš€ ~ onSortChange ~ sorter:",e);const{order:a,columnKey:t}=e;switch(t){case"name":o.value.sort_by="profile_name";break;case"created_at":o.value.sort_by="created_at";break;case"updated_at":o.value.sort_by="updated_at";break;default:o.value.sort_by="id";break}o.value.order==="desc"&&a!=="descend"?o.value.order="asc":o.value.order="desc",s.value.page=1,await l({offset:0,limit:s.value.limit})},handleScroll:async e=>{const{limit:a,next_offset:t}=s.value,r=e.currentTarget;r.scrollTop+r.offsetHeight>=r.scrollHeight-20&&t!==null&&await l({limit:a,offset:t})}}};export{B as u};
