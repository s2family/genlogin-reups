import{i as bt,v as ki,w as we,p as _t,d as _e,bn as Va,o as Di,S as ve,U as ye,D as We,Y as Fn,L as ut,k as $i,l as nn,b as ae,n as Ye,c as fe,C as Ha,r as co,m as Mt,M as Do,u as ie,ae as Et,V as xt,$ as Xn,a2 as ze,F as ct,z as be,g as Ii,aA as Ri,q as fo,B as Ga,j as pn,ax as Li,X as St,a8 as Ze,I as Bi,ad as ho,h as pe,a4 as zi,x as at,bi as Oa,a9 as Fa,E as Xa,P as Wa,s as Ya}from"./_plugin-vue_export-helper-b059e461.js";import{bd as Za,M as Ua,I as Ka,H as qa,ap as Ja,G as Qa,ca as Ke,a3 as Mn,fz as ja,cd as er,cz as $o,fA as tr,fB as nr,fC as or,fD as ir}from"./main-8b08e1d6.js";function Xt(e){return $i()?(nn(e),!0):!1}function de(e){return typeof e=="function"?e():ie(e)}const Ai=typeof window<"u"&&typeof document<"u",ar=e=>typeof e<"u",rr=Object.prototype.toString,lr=e=>rr.call(e)==="[object Object]",Ti=()=>{};function sr(e,t){function n(...o){return new Promise((i,a)=>{Promise.resolve(e(()=>t.apply(this,o),{fn:t,thisArg:this,args:o})).then(i).catch(a)})}return n}const Vi=e=>e();function ur(e=Vi){const t=ae(!0);function n(){t.value=!1}function o(){t.value=!0}const i=(...a)=>{t.value&&e(...a)};return{isActive:Ii(t),pause:n,resume:o,eventFilter:i}}function Io(e,t=!1,n="Timeout"){return new Promise((o,i)=>{setTimeout(t?()=>i(n):o,e)})}function Re(...e){if(e.length!==1)return be(...e);const t=e[0];return typeof t=="function"?Ii(Ri(()=>({get:t,set:Ti}))):ae(t)}function cr(e,t,n={}){const{eventFilter:o=Vi,...i}=n;return we(e,sr(o,t),i)}function gt(e,t,n={}){const{eventFilter:o,...i}=n,{eventFilter:a,pause:r,resume:l,isActive:u}=ur(o);return{stop:cr(e,t,{...i,eventFilter:a}),pause:r,resume:l,isActive:u}}function dr(e,t={}){if(!fo(e))return Ga(e);const n=Array.isArray(e.value)?Array.from({length:e.value.length}):{};for(const o in e.value)n[o]=Ri(()=>({get(){return e.value[o]},set(i){var a;if((a=de(t.replaceRef))!=null?a:!0)if(Array.isArray(e.value)){const l=[...e.value];l[o]=i,e.value=l}else{const l={...e.value,[o]:i};Object.setPrototypeOf(l,Object.getPrototypeOf(e.value)),e.value=l}else e.value[o]=i}}));return n}function Wn(e,t=!1){function n(f,{flush:h="sync",deep:m=!1,timeout:P,throwOnTimeout:E}={}){let d=null;const v=[new Promise(_=>{d=we(e,b=>{f(b)!==t&&(d==null||d(),_(b))},{flush:h,deep:m,immediate:!0})})];return P!=null&&v.push(Io(P,E).then(()=>de(e)).finally(()=>d==null?void 0:d())),Promise.race(v)}function o(f,h){if(!fo(f))return n(b=>b===f,h);const{flush:m="sync",deep:P=!1,timeout:E,throwOnTimeout:d}=h??{};let w=null;const _=[new Promise(b=>{w=we([e,f],([k,H])=>{t!==(k===H)&&(w==null||w(),b(k))},{flush:m,deep:P,immediate:!0})})];return E!=null&&_.push(Io(E,d).then(()=>de(e)).finally(()=>(w==null||w(),de(e)))),Promise.race(_)}function i(f){return n(h=>!!h,f)}function a(f){return o(null,f)}function r(f){return o(void 0,f)}function l(f){return n(Number.isNaN,f)}function u(f,h){return n(m=>{const P=Array.from(m);return P.includes(f)||P.includes(de(f))},h)}function s(f){return c(1,f)}function c(f=1,h){let m=-1;return n(()=>(m+=1,m>=f),h)}return Array.isArray(de(e))?{toMatch:n,toContains:u,changed:s,changedTimes:c,get not(){return Wn(e,!t)}}:{toMatch:n,toBe:o,toBeTruthy:i,toBeNull:a,toBeNaN:l,toBeUndefined:r,changed:s,changedTimes:c,get not(){return Wn(e,!t)}}}function Qe(e){return Wn(e)}function Yn(e){var t;const n=de(e);return(t=n==null?void 0:n.$el)!=null?t:n}const go=Ai?window:void 0;function vo(...e){let t,n,o,i;if(typeof e[0]=="string"||Array.isArray(e[0])?([n,o,i]=e,t=go):[t,n,o,i]=e,!t)return Ti;Array.isArray(n)||(n=[n]),Array.isArray(o)||(o=[o]);const a=[],r=()=>{a.forEach(c=>c()),a.length=0},l=(c,f,h,m)=>(c.addEventListener(f,h,m),()=>c.removeEventListener(f,h,m)),u=we(()=>[Yn(t),de(i)],([c,f])=>{if(r(),!c)return;const h=lr(f)?{...f}:f;a.push(...n.flatMap(m=>o.map(P=>l(c,m,P,h))))},{immediate:!0,flush:"post"}),s=()=>{u(),r()};return Xt(s),s}function fr(e){return typeof e=="function"?e:typeof e=="string"?t=>t.key===e:Array.isArray(e)?t=>e.includes(t.key):()=>!0}function Ro(...e){let t,n,o={};e.length===3?(t=e[0],n=e[1],o=e[2]):e.length===2?typeof e[1]=="object"?(t=!0,n=e[0],o=e[1]):(t=e[0],n=e[1]):(t=!0,n=e[0]);const{target:i=go,eventName:a="keydown",passive:r=!1,dedupe:l=!1}=o,u=fr(t);return vo(i,a,c=>{c.repeat&&de(l)||u(c)&&n(c)},r)}function hr(){const e=ae(!1);return pn()&&Mt(()=>{e.value=!0}),e}function gr(e){const t=hr();return fe(()=>(t.value,!!e()))}function vr(e){return JSON.parse(JSON.stringify(e))}function pr(e,t,n={}){const{window:o=go,...i}=n;let a;const r=gr(()=>o&&"ResizeObserver"in o),l=()=>{a&&(a.disconnect(),a=void 0)},u=fe(()=>Array.isArray(e)?e.map(f=>Yn(f)):[Yn(e)]),s=we(u,f=>{if(l(),r.value&&o){a=new ResizeObserver(t);for(const h of f)h&&a.observe(h,i)}},{immediate:!0,flush:"post",deep:!0}),c=()=>{l(),s()};return Xt(c),{isSupported:r,stop:c}}function zt(e,t,n,o={}){var i,a,r;const{clone:l=!1,passive:u=!1,eventName:s,deep:c=!1,defaultValue:f,shouldEmit:h}=o,m=pn(),P=n||(m==null?void 0:m.emit)||((i=m==null?void 0:m.$emit)==null?void 0:i.bind(m))||((r=(a=m==null?void 0:m.proxy)==null?void 0:a.$emit)==null?void 0:r.bind(m==null?void 0:m.proxy));let E=s;t||(t="modelValue"),E=E||`update:${t.toString()}`;const d=_=>l?typeof l=="function"?l(_):vr(_):_,w=()=>ar(e[t])?d(e[t]):f,v=_=>{h?h(_)&&P(E,_):P(E,_)};if(u){const _=w(),b=ae(_);let k=!1;return we(()=>e[t],H=>{k||(k=!0,b.value=d(H),Ye(()=>k=!1))}),we(b,H=>{!k&&(H!==e[t]||c)&&v(H)},{deep:c}),b}else return fe({get(){return w()},set(_){v(_)}})}var mr={value:()=>{}};function mn(){for(var e=0,t=arguments.length,n={},o;e<t;++e){if(!(o=arguments[e]+"")||o in n||/[\s.]/.test(o))throw new Error("illegal type: "+o);n[o]=[]}return new on(n)}function on(e){this._=e}function yr(e,t){return e.trim().split(/^|\s+/).map(function(n){var o="",i=n.indexOf(".");if(i>=0&&(o=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:o}})}on.prototype=mn.prototype={constructor:on,on:function(e,t){var n=this._,o=yr(e+"",n),i,a=-1,r=o.length;if(arguments.length<2){for(;++a<r;)if((i=(e=o[a]).type)&&(i=wr(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<r;)if(i=(e=o[a]).type)n[i]=Lo(n[i],e.name,t);else if(t==null)for(i in n)n[i]=Lo(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new on(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),o=0,i,a;o<i;++o)n[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],o=0,i=a.length;o<i;++o)a[o].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],i=0,a=o.length;i<a;++i)o[i].value.apply(t,n)}};function wr(e,t){for(var n=0,o=e.length,i;n<o;++n)if((i=e[n]).name===t)return i.value}function Lo(e,t,n){for(var o=0,i=e.length;o<i;++o)if(e[o].name===t){e[o]=mr,e=e.slice(0,o).concat(e.slice(o+1));break}return n!=null&&e.push({name:t,value:n}),e}var Zn="http://www.w3.org/1999/xhtml";const Bo={svg:"http://www.w3.org/2000/svg",xhtml:Zn,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function yn(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Bo.hasOwnProperty(t)?{space:Bo[t],local:e}:e}function br(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Zn&&t.documentElement.namespaceURI===Zn?t.createElement(e):t.createElementNS(n,e)}}function _r(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Hi(e){var t=yn(e);return(t.local?_r:br)(t)}function Er(){}function po(e){return e==null?Er:function(){return this.querySelector(e)}}function xr(e){typeof e!="function"&&(e=po(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var a=t[i],r=a.length,l=o[i]=new Array(r),u,s,c=0;c<r;++c)(u=a[c])&&(s=e.call(u,u.__data__,c,a))&&("__data__"in u&&(s.__data__=u.__data__),l[c]=s);return new Ie(o,this._parents)}function Sr(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Nr(){return[]}function Gi(e){return e==null?Nr:function(){return this.querySelectorAll(e)}}function Cr(e){return function(){return Sr(e.apply(this,arguments))}}function Pr(e){typeof e=="function"?e=Cr(e):e=Gi(e);for(var t=this._groups,n=t.length,o=[],i=[],a=0;a<n;++a)for(var r=t[a],l=r.length,u,s=0;s<l;++s)(u=r[s])&&(o.push(e.call(u,u.__data__,s,r)),i.push(u));return new Ie(o,i)}function Oi(e){return function(){return this.matches(e)}}function Fi(e){return function(t){return t.matches(e)}}var Mr=Array.prototype.find;function kr(e){return function(){return Mr.call(this.children,e)}}function Dr(){return this.firstElementChild}function $r(e){return this.select(e==null?Dr:kr(typeof e=="function"?e:Fi(e)))}var Ir=Array.prototype.filter;function Rr(){return Array.from(this.children)}function Lr(e){return function(){return Ir.call(this.children,e)}}function Br(e){return this.selectAll(e==null?Rr:Lr(typeof e=="function"?e:Fi(e)))}function zr(e){typeof e!="function"&&(e=Oi(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var a=t[i],r=a.length,l=o[i]=[],u,s=0;s<r;++s)(u=a[s])&&e.call(u,u.__data__,s,a)&&l.push(u);return new Ie(o,this._parents)}function Xi(e){return new Array(e.length)}function Ar(){return new Ie(this._enter||this._groups.map(Xi),this._parents)}function sn(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}sn.prototype={constructor:sn,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Tr(e){return function(){return e}}function Vr(e,t,n,o,i,a){for(var r=0,l,u=t.length,s=a.length;r<s;++r)(l=t[r])?(l.__data__=a[r],o[r]=l):n[r]=new sn(e,a[r]);for(;r<u;++r)(l=t[r])&&(i[r]=l)}function Hr(e,t,n,o,i,a,r){var l,u,s=new Map,c=t.length,f=a.length,h=new Array(c),m;for(l=0;l<c;++l)(u=t[l])&&(h[l]=m=r.call(u,u.__data__,l,t)+"",s.has(m)?i[l]=u:s.set(m,u));for(l=0;l<f;++l)m=r.call(e,a[l],l,a)+"",(u=s.get(m))?(o[l]=u,u.__data__=a[l],s.delete(m)):n[l]=new sn(e,a[l]);for(l=0;l<c;++l)(u=t[l])&&s.get(h[l])===u&&(i[l]=u)}function Gr(e){return e.__data__}function Or(e,t){if(!arguments.length)return Array.from(this,Gr);var n=t?Hr:Vr,o=this._parents,i=this._groups;typeof e!="function"&&(e=Tr(e));for(var a=i.length,r=new Array(a),l=new Array(a),u=new Array(a),s=0;s<a;++s){var c=o[s],f=i[s],h=f.length,m=Fr(e.call(c,c&&c.__data__,s,o)),P=m.length,E=l[s]=new Array(P),d=r[s]=new Array(P),w=u[s]=new Array(h);n(c,f,E,d,w,m,t);for(var v=0,_=0,b,k;v<P;++v)if(b=E[v]){for(v>=_&&(_=v+1);!(k=d[_])&&++_<P;);b._next=k||null}}return r=new Ie(r,o),r._enter=l,r._exit=u,r}function Fr(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Xr(){return new Ie(this._exit||this._groups.map(Xi),this._parents)}function Wr(e,t,n){var o=this.enter(),i=this,a=this.exit();return typeof e=="function"?(o=e(o),o&&(o=o.selection())):o=o.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?a.remove():n(a),o&&i?o.merge(i).order():i}function Yr(e){for(var t=e.selection?e.selection():e,n=this._groups,o=t._groups,i=n.length,a=o.length,r=Math.min(i,a),l=new Array(i),u=0;u<r;++u)for(var s=n[u],c=o[u],f=s.length,h=l[u]=new Array(f),m,P=0;P<f;++P)(m=s[P]||c[P])&&(h[P]=m);for(;u<i;++u)l[u]=n[u];return new Ie(l,this._parents)}function Zr(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var o=e[t],i=o.length-1,a=o[i],r;--i>=0;)(r=o[i])&&(a&&r.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(r,a),a=r);return this}function Ur(e){e||(e=Kr);function t(f,h){return f&&h?e(f.__data__,h.__data__):!f-!h}for(var n=this._groups,o=n.length,i=new Array(o),a=0;a<o;++a){for(var r=n[a],l=r.length,u=i[a]=new Array(l),s,c=0;c<l;++c)(s=r[c])&&(u[c]=s);u.sort(t)}return new Ie(i,this._parents).order()}function Kr(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function qr(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Jr(){return Array.from(this)}function Qr(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],i=0,a=o.length;i<a;++i){var r=o[i];if(r)return r}return null}function jr(){let e=0;for(const t of this)++e;return e}function el(){return!this.node()}function tl(e){for(var t=this._groups,n=0,o=t.length;n<o;++n)for(var i=t[n],a=0,r=i.length,l;a<r;++a)(l=i[a])&&e.call(l,l.__data__,a,i);return this}function nl(e){return function(){this.removeAttribute(e)}}function ol(e){return function(){this.removeAttributeNS(e.space,e.local)}}function il(e,t){return function(){this.setAttribute(e,t)}}function al(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function rl(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function ll(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function sl(e,t){var n=yn(e);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((t==null?n.local?ol:nl:typeof t=="function"?n.local?ll:rl:n.local?al:il)(n,t))}function Wi(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function ul(e){return function(){this.style.removeProperty(e)}}function cl(e,t,n){return function(){this.style.setProperty(e,t,n)}}function dl(e,t,n){return function(){var o=t.apply(this,arguments);o==null?this.style.removeProperty(e):this.style.setProperty(e,o,n)}}function fl(e,t,n){return arguments.length>1?this.each((t==null?ul:typeof t=="function"?dl:cl)(e,t,n??"")):Nt(this.node(),e)}function Nt(e,t){return e.style.getPropertyValue(t)||Wi(e).getComputedStyle(e,null).getPropertyValue(t)}function hl(e){return function(){delete this[e]}}function gl(e,t){return function(){this[e]=t}}function vl(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function pl(e,t){return arguments.length>1?this.each((t==null?hl:typeof t=="function"?vl:gl)(e,t)):this.node()[e]}function Yi(e){return e.trim().split(/^|\s+/)}function mo(e){return e.classList||new Zi(e)}function Zi(e){this._node=e,this._names=Yi(e.getAttribute("class")||"")}Zi.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Ui(e,t){for(var n=mo(e),o=-1,i=t.length;++o<i;)n.add(t[o])}function Ki(e,t){for(var n=mo(e),o=-1,i=t.length;++o<i;)n.remove(t[o])}function ml(e){return function(){Ui(this,e)}}function yl(e){return function(){Ki(this,e)}}function wl(e,t){return function(){(t.apply(this,arguments)?Ui:Ki)(this,e)}}function bl(e,t){var n=Yi(e+"");if(arguments.length<2){for(var o=mo(this.node()),i=-1,a=n.length;++i<a;)if(!o.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?wl:t?ml:yl)(n,t))}function _l(){this.textContent=""}function El(e){return function(){this.textContent=e}}function xl(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Sl(e){return arguments.length?this.each(e==null?_l:(typeof e=="function"?xl:El)(e)):this.node().textContent}function Nl(){this.innerHTML=""}function Cl(e){return function(){this.innerHTML=e}}function Pl(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Ml(e){return arguments.length?this.each(e==null?Nl:(typeof e=="function"?Pl:Cl)(e)):this.node().innerHTML}function kl(){this.nextSibling&&this.parentNode.appendChild(this)}function Dl(){return this.each(kl)}function $l(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Il(){return this.each($l)}function Rl(e){var t=typeof e=="function"?e:Hi(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Ll(){return null}function Bl(e,t){var n=typeof e=="function"?e:Hi(e),o=t==null?Ll:typeof t=="function"?t:po(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)})}function zl(){var e=this.parentNode;e&&e.removeChild(this)}function Al(){return this.each(zl)}function Tl(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Vl(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Hl(e){return this.select(e?Vl:Tl)}function Gl(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Ol(e){return function(t){e.call(this,t,this.__data__)}}function Fl(e){return e.trim().split(/^|\s+/).map(function(t){var n="",o=t.indexOf(".");return o>=0&&(n=t.slice(o+1),t=t.slice(0,o)),{type:t,name:n}})}function Xl(e){return function(){var t=this.__on;if(t){for(var n=0,o=-1,i=t.length,a;n<i;++n)a=t[n],(!e.type||a.type===e.type)&&a.name===e.name?this.removeEventListener(a.type,a.listener,a.options):t[++o]=a;++o?t.length=o:delete this.__on}}}function Wl(e,t,n){return function(){var o=this.__on,i,a=Ol(t);if(o){for(var r=0,l=o.length;r<l;++r)if((i=o[r]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=n),i.value=t;return}}this.addEventListener(e.type,a,n),i={type:e.type,name:e.name,value:t,listener:a,options:n},o?o.push(i):this.__on=[i]}}function Yl(e,t,n){var o=Fl(e+""),i,a=o.length,r;if(arguments.length<2){var l=this.node().__on;if(l){for(var u=0,s=l.length,c;u<s;++u)for(i=0,c=l[u];i<a;++i)if((r=o[i]).type===c.type&&r.name===c.name)return c.value}return}for(l=t?Wl:Xl,i=0;i<a;++i)this.each(l(o[i],t,n));return this}function qi(e,t,n){var o=Wi(e),i=o.CustomEvent;typeof i=="function"?i=new i(t,n):(i=o.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function Zl(e,t){return function(){return qi(this,e,t)}}function Ul(e,t){return function(){return qi(this,e,t.apply(this,arguments))}}function Kl(e,t){return this.each((typeof t=="function"?Ul:Zl)(e,t))}function*ql(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],i=0,a=o.length,r;i<a;++i)(r=o[i])&&(yield r)}var Ji=[null];function Ie(e,t){this._groups=e,this._parents=t}function Wt(){return new Ie([[document.documentElement]],Ji)}function Jl(){return this}Ie.prototype=Wt.prototype={constructor:Ie,select:xr,selectAll:Pr,selectChild:$r,selectChildren:Br,filter:zr,data:Or,enter:Ar,exit:Xr,join:Wr,merge:Yr,selection:Jl,order:Zr,sort:Ur,call:qr,nodes:Jr,node:Qr,size:jr,empty:el,each:tl,attr:sl,style:fl,property:pl,classed:bl,text:Sl,html:Ml,raise:Dl,lower:Il,append:Rl,insert:Bl,remove:Al,clone:Hl,datum:Gl,on:Yl,dispatch:Kl,[Symbol.iterator]:ql};function Le(e){return typeof e=="string"?new Ie([[document.querySelector(e)]],[document.documentElement]):new Ie([[e]],Ji)}function Ql(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Te(e,t){if(e=Ql(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,o=o.matrixTransform(t.getScreenCTM().inverse()),[o.x,o.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const jl={passive:!1},Vt={capture:!0,passive:!1};function kn(e){e.stopImmediatePropagation()}function mt(e){e.preventDefault(),e.stopImmediatePropagation()}function Qi(e){var t=e.document.documentElement,n=Le(e).on("dragstart.drag",mt,Vt);"onselectstart"in t?n.on("selectstart.drag",mt,Vt):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function ji(e,t){var n=e.document.documentElement,o=Le(e).on("dragstart.drag",null);t&&(o.on("click.drag",mt,Vt),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Zt=e=>()=>e;function Un(e,{sourceEvent:t,subject:n,target:o,identifier:i,active:a,x:r,y:l,dx:u,dy:s,dispatch:c}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:r,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:s,enumerable:!0,configurable:!0},_:{value:c}})}Un.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function es(e){return!e.ctrlKey&&!e.button}function ts(){return this.parentNode}function ns(e,t){return t??{x:e.x,y:e.y}}function os(){return navigator.maxTouchPoints||"ontouchstart"in this}function is(){var e=es,t=ts,n=ns,o=os,i={},a=mn("start","drag","end"),r=0,l,u,s,c,f=0;function h(b){b.on("mousedown.drag",m).filter(o).on("touchstart.drag",d).on("touchmove.drag",w,jl).on("touchend.drag touchcancel.drag",v).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function m(b,k){if(!(c||!e.call(this,b,k))){var H=_(this,t.call(this,b,k),b,k,"mouse");H&&(Le(b.view).on("mousemove.drag",P,Vt).on("mouseup.drag",E,Vt),Qi(b.view),kn(b),s=!1,l=b.clientX,u=b.clientY,H("start",b))}}function P(b){if(mt(b),!s){var k=b.clientX-l,H=b.clientY-u;s=k*k+H*H>f}i.mouse("drag",b)}function E(b){Le(b.view).on("mousemove.drag mouseup.drag",null),ji(b.view,s),mt(b),i.mouse("end",b)}function d(b,k){if(e.call(this,b,k)){var H=b.changedTouches,p=t.call(this,b,k),q=H.length,J,z;for(J=0;J<q;++J)(z=_(this,p,b,k,H[J].identifier,H[J]))&&(kn(b),z("start",b,H[J]))}}function w(b){var k=b.changedTouches,H=k.length,p,q;for(p=0;p<H;++p)(q=i[k[p].identifier])&&(mt(b),q("drag",b,k[p]))}function v(b){var k=b.changedTouches,H=k.length,p,q;for(c&&clearTimeout(c),c=setTimeout(function(){c=null},500),p=0;p<H;++p)(q=i[k[p].identifier])&&(kn(b),q("end",b,k[p]))}function _(b,k,H,p,q,J){var z=a.copy(),X=Te(J||H,k),ue,ne,g;if((g=n.call(b,new Un("beforestart",{sourceEvent:H,target:h,identifier:q,active:r,x:X[0],y:X[1],dx:0,dy:0,dispatch:z}),p))!=null)return ue=g.x-X[0]||0,ne=g.y-X[1]||0,function I(C,A,G){var Y=X,L;switch(C){case"start":i[q]=I,L=r++;break;case"end":delete i[q],--r;case"drag":X=Te(G||A,k),L=r;break}z.call(C,b,new Un(C,{sourceEvent:A,subject:g,target:h,identifier:q,active:L,x:X[0]+ue,y:X[1]+ne,dx:X[0]-Y[0],dy:X[1]-Y[1],dispatch:z}),p)}}return h.filter=function(b){return arguments.length?(e=typeof b=="function"?b:Zt(!!b),h):e},h.container=function(b){return arguments.length?(t=typeof b=="function"?b:Zt(b),h):t},h.subject=function(b){return arguments.length?(n=typeof b=="function"?b:Zt(b),h):n},h.touchable=function(b){return arguments.length?(o=typeof b=="function"?b:Zt(!!b),h):o},h.on=function(){var b=a.on.apply(a,arguments);return b===a?h:b},h.clickDistance=function(b){return arguments.length?(f=(b=+b)*b,h):Math.sqrt(f)},h}function yo(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function ea(e,t){var n=Object.create(e.prototype);for(var o in t)n[o]=t[o];return n}function Yt(){}var Ht=.7,un=1/Ht,yt="\\s*([+-]?\\d+)\\s*",Gt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ve="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",as=/^#([0-9a-f]{3,8})$/,rs=new RegExp(`^rgb\\(${yt},${yt},${yt}\\)$`),ls=new RegExp(`^rgb\\(${Ve},${Ve},${Ve}\\)$`),ss=new RegExp(`^rgba\\(${yt},${yt},${yt},${Gt}\\)$`),us=new RegExp(`^rgba\\(${Ve},${Ve},${Ve},${Gt}\\)$`),cs=new RegExp(`^hsl\\(${Gt},${Ve},${Ve}\\)$`),ds=new RegExp(`^hsla\\(${Gt},${Ve},${Ve},${Gt}\\)$`),zo={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};yo(Yt,Ot,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Ao,formatHex:Ao,formatHex8:fs,formatHsl:hs,formatRgb:To,toString:To});function Ao(){return this.rgb().formatHex()}function fs(){return this.rgb().formatHex8()}function hs(){return ta(this).formatHsl()}function To(){return this.rgb().formatRgb()}function Ot(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=as.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Vo(t):n===3?new De(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Ut(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Ut(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=rs.exec(e))?new De(t[1],t[2],t[3],1):(t=ls.exec(e))?new De(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=ss.exec(e))?Ut(t[1],t[2],t[3],t[4]):(t=us.exec(e))?Ut(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=cs.exec(e))?Oo(t[1],t[2]/100,t[3]/100,1):(t=ds.exec(e))?Oo(t[1],t[2]/100,t[3]/100,t[4]):zo.hasOwnProperty(e)?Vo(zo[e]):e==="transparent"?new De(NaN,NaN,NaN,0):null}function Vo(e){return new De(e>>16&255,e>>8&255,e&255,1)}function Ut(e,t,n,o){return o<=0&&(e=t=n=NaN),new De(e,t,n,o)}function gs(e){return e instanceof Yt||(e=Ot(e)),e?(e=e.rgb(),new De(e.r,e.g,e.b,e.opacity)):new De}function Kn(e,t,n,o){return arguments.length===1?gs(e):new De(e,t,n,o??1)}function De(e,t,n,o){this.r=+e,this.g=+t,this.b=+n,this.opacity=+o}yo(De,Kn,ea(Yt,{brighter(e){return e=e==null?un:Math.pow(un,e),new De(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Ht:Math.pow(Ht,e),new De(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new De(rt(this.r),rt(this.g),rt(this.b),cn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ho,formatHex:Ho,formatHex8:vs,formatRgb:Go,toString:Go}));function Ho(){return`#${nt(this.r)}${nt(this.g)}${nt(this.b)}`}function vs(){return`#${nt(this.r)}${nt(this.g)}${nt(this.b)}${nt((isNaN(this.opacity)?1:this.opacity)*255)}`}function Go(){const e=cn(this.opacity);return`${e===1?"rgb(":"rgba("}${rt(this.r)}, ${rt(this.g)}, ${rt(this.b)}${e===1?")":`, ${e})`}`}function cn(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function rt(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function nt(e){return e=rt(e),(e<16?"0":"")+e.toString(16)}function Oo(e,t,n,o){return o<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Be(e,t,n,o)}function ta(e){if(e instanceof Be)return new Be(e.h,e.s,e.l,e.opacity);if(e instanceof Yt||(e=Ot(e)),!e)return new Be;if(e instanceof Be)return e;e=e.rgb();var t=e.r/255,n=e.g/255,o=e.b/255,i=Math.min(t,n,o),a=Math.max(t,n,o),r=NaN,l=a-i,u=(a+i)/2;return l?(t===a?r=(n-o)/l+(n<o)*6:n===a?r=(o-t)/l+2:r=(t-n)/l+4,l/=u<.5?a+i:2-a-i,r*=60):l=u>0&&u<1?0:r,new Be(r,l,u,e.opacity)}function ps(e,t,n,o){return arguments.length===1?ta(e):new Be(e,t,n,o??1)}function Be(e,t,n,o){this.h=+e,this.s=+t,this.l=+n,this.opacity=+o}yo(Be,ps,ea(Yt,{brighter(e){return e=e==null?un:Math.pow(un,e),new Be(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Ht:Math.pow(Ht,e),new Be(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*t,i=2*n-o;return new De(Dn(e>=240?e-240:e+120,i,o),Dn(e,i,o),Dn(e<120?e+240:e-120,i,o),this.opacity)},clamp(){return new Be(Fo(this.h),Kt(this.s),Kt(this.l),cn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=cn(this.opacity);return`${e===1?"hsl(":"hsla("}${Fo(this.h)}, ${Kt(this.s)*100}%, ${Kt(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Fo(e){return e=(e||0)%360,e<0?e+360:e}function Kt(e){return Math.max(0,Math.min(1,e||0))}function Dn(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const na=e=>()=>e;function ms(e,t){return function(n){return e+n*t}}function ys(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(o){return Math.pow(e+o*t,n)}}function ws(e){return(e=+e)==1?oa:function(t,n){return n-t?ys(t,n,e):na(isNaN(t)?n:t)}}function oa(e,t){var n=t-e;return n?ms(e,n):na(isNaN(e)?t:e)}const Xo=function e(t){var n=ws(t);function o(i,a){var r=n((i=Kn(i)).r,(a=Kn(a)).r),l=n(i.g,a.g),u=n(i.b,a.b),s=oa(i.opacity,a.opacity);return function(c){return i.r=r(c),i.g=l(c),i.b=u(c),i.opacity=s(c),i+""}}return o.gamma=e,o}(1);function Je(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var qn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,$n=new RegExp(qn.source,"g");function bs(e){return function(){return e}}function _s(e){return function(t){return e(t)+""}}function Es(e,t){var n=qn.lastIndex=$n.lastIndex=0,o,i,a,r=-1,l=[],u=[];for(e=e+"",t=t+"";(o=qn.exec(e))&&(i=$n.exec(t));)(a=i.index)>n&&(a=t.slice(n,a),l[r]?l[r]+=a:l[++r]=a),(o=o[0])===(i=i[0])?l[r]?l[r]+=i:l[++r]=i:(l[++r]=null,u.push({i:r,x:Je(o,i)})),n=$n.lastIndex;return n<t.length&&(a=t.slice(n),l[r]?l[r]+=a:l[++r]=a),l.length<2?u[0]?_s(u[0].x):bs(t):(t=u.length,function(s){for(var c=0,f;c<t;++c)l[(f=u[c]).i]=f.x(s);return l.join("")})}var Wo=180/Math.PI,Jn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function ia(e,t,n,o,i,a){var r,l,u;return(r=Math.sqrt(e*e+t*t))&&(e/=r,t/=r),(u=e*n+t*o)&&(n-=e*u,o-=t*u),(l=Math.sqrt(n*n+o*o))&&(n/=l,o/=l,u/=l),e*o<t*n&&(e=-e,t=-t,u=-u,r=-r),{translateX:i,translateY:a,rotate:Math.atan2(t,e)*Wo,skewX:Math.atan(u)*Wo,scaleX:r,scaleY:l}}var qt;function xs(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Jn:ia(t.a,t.b,t.c,t.d,t.e,t.f)}function Ss(e){return e==null||(qt||(qt=document.createElementNS("http://www.w3.org/2000/svg","g")),qt.setAttribute("transform",e),!(e=qt.transform.baseVal.consolidate()))?Jn:(e=e.matrix,ia(e.a,e.b,e.c,e.d,e.e,e.f))}function aa(e,t,n,o){function i(s){return s.length?s.pop()+" ":""}function a(s,c,f,h,m,P){if(s!==f||c!==h){var E=m.push("translate(",null,t,null,n);P.push({i:E-4,x:Je(s,f)},{i:E-2,x:Je(c,h)})}else(f||h)&&m.push("translate("+f+t+h+n)}function r(s,c,f,h){s!==c?(s-c>180?c+=360:c-s>180&&(s+=360),h.push({i:f.push(i(f)+"rotate(",null,o)-2,x:Je(s,c)})):c&&f.push(i(f)+"rotate("+c+o)}function l(s,c,f,h){s!==c?h.push({i:f.push(i(f)+"skewX(",null,o)-2,x:Je(s,c)}):c&&f.push(i(f)+"skewX("+c+o)}function u(s,c,f,h,m,P){if(s!==f||c!==h){var E=m.push(i(m)+"scale(",null,",",null,")");P.push({i:E-4,x:Je(s,f)},{i:E-2,x:Je(c,h)})}else(f!==1||h!==1)&&m.push(i(m)+"scale("+f+","+h+")")}return function(s,c){var f=[],h=[];return s=e(s),c=e(c),a(s.translateX,s.translateY,c.translateX,c.translateY,f,h),r(s.rotate,c.rotate,f,h),l(s.skewX,c.skewX,f,h),u(s.scaleX,s.scaleY,c.scaleX,c.scaleY,f,h),s=c=null,function(m){for(var P=-1,E=h.length,d;++P<E;)f[(d=h[P]).i]=d.x(m);return f.join("")}}}var Ns=aa(xs,"px, ","px)","deg)"),Cs=aa(Ss,", ",")",")"),Ps=1e-12;function Yo(e){return((e=Math.exp(e))+1/e)/2}function Ms(e){return((e=Math.exp(e))-1/e)/2}function ks(e){return((e=Math.exp(2*e))-1)/(e+1)}const Ds=function e(t,n,o){function i(a,r){var l=a[0],u=a[1],s=a[2],c=r[0],f=r[1],h=r[2],m=c-l,P=f-u,E=m*m+P*P,d,w;if(E<Ps)w=Math.log(h/s)/t,d=function(p){return[l+p*m,u+p*P,s*Math.exp(t*p*w)]};else{var v=Math.sqrt(E),_=(h*h-s*s+o*E)/(2*s*n*v),b=(h*h-s*s-o*E)/(2*h*n*v),k=Math.log(Math.sqrt(_*_+1)-_),H=Math.log(Math.sqrt(b*b+1)-b);w=(H-k)/t,d=function(p){var q=p*w,J=Yo(k),z=s/(n*v)*(J*ks(t*q+k)-Ms(k));return[l+z*m,u+z*P,s*J/Yo(t*q+k)]}}return d.duration=w*1e3*t/Math.SQRT2,d}return i.rho=function(a){var r=Math.max(.001,+a),l=r*r,u=l*l;return e(r,l,u)},i}(Math.SQRT2,2,4);var Ct=0,Rt=0,kt=0,ra=1e3,dn,Lt,fn=0,dt=0,wn=0,Ft=typeof performance=="object"&&performance.now?performance:Date,la=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function wo(){return dt||(la($s),dt=Ft.now()+wn)}function $s(){dt=0}function hn(){this._call=this._time=this._next=null}hn.prototype=sa.prototype={constructor:hn,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?wo():+n)+(t==null?0:+t),!this._next&&Lt!==this&&(Lt?Lt._next=this:dn=this,Lt=this),this._call=e,this._time=n,Qn()},stop:function(){this._call&&(this._call=null,this._time=1/0,Qn())}};function sa(e,t,n){var o=new hn;return o.restart(e,t,n),o}function Is(){wo(),++Ct;for(var e=dn,t;e;)(t=dt-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Ct}function Zo(){dt=(fn=Ft.now())+wn,Ct=Rt=0;try{Is()}finally{Ct=0,Ls(),dt=0}}function Rs(){var e=Ft.now(),t=e-fn;t>ra&&(wn-=t,fn=e)}function Ls(){for(var e,t=dn,n,o=1/0;t;)t._call?(o>t._time&&(o=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:dn=n);Lt=e,Qn(o)}function Qn(e){if(!Ct){Rt&&(Rt=clearTimeout(Rt));var t=e-dt;t>24?(e<1/0&&(Rt=setTimeout(Zo,e-Ft.now()-wn)),kt&&(kt=clearInterval(kt))):(kt||(fn=Ft.now(),kt=setInterval(Rs,ra)),Ct=1,la(Zo))}}function Uo(e,t,n){var o=new hn;return t=t==null?0:+t,o.restart(i=>{o.stop(),e(i+t)},t,n),o}var Bs=mn("start","end","cancel","interrupt"),zs=[],ua=0,Ko=1,jn=2,an=3,qo=4,eo=5,rn=6;function bn(e,t,n,o,i,a){var r=e.__transition;if(!r)e.__transition={};else if(n in r)return;As(e,n,{name:t,index:o,group:i,on:Bs,tween:zs,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:ua})}function bo(e,t){var n=Ae(e,t);if(n.state>ua)throw new Error("too late; already scheduled");return n}function He(e,t){var n=Ae(e,t);if(n.state>an)throw new Error("too late; already running");return n}function Ae(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function As(e,t,n){var o=e.__transition,i;o[t]=n,n.timer=sa(a,0,n.time);function a(s){n.state=Ko,n.timer.restart(r,n.delay,n.time),n.delay<=s&&r(s-n.delay)}function r(s){var c,f,h,m;if(n.state!==Ko)return u();for(c in o)if(m=o[c],m.name===n.name){if(m.state===an)return Uo(r);m.state===qo?(m.state=rn,m.timer.stop(),m.on.call("interrupt",e,e.__data__,m.index,m.group),delete o[c]):+c<t&&(m.state=rn,m.timer.stop(),m.on.call("cancel",e,e.__data__,m.index,m.group),delete o[c])}if(Uo(function(){n.state===an&&(n.state=qo,n.timer.restart(l,n.delay,n.time),l(s))}),n.state=jn,n.on.call("start",e,e.__data__,n.index,n.group),n.state===jn){for(n.state=an,i=new Array(h=n.tween.length),c=0,f=-1;c<h;++c)(m=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++f]=m);i.length=f+1}}function l(s){for(var c=s<n.duration?n.ease.call(null,s/n.duration):(n.timer.restart(u),n.state=eo,1),f=-1,h=i.length;++f<h;)i[f].call(e,c);n.state===eo&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=rn,n.timer.stop(),delete o[t];for(var s in o)return;delete e.__transition}}function ln(e,t){var n=e.__transition,o,i,a=!0,r;if(n){t=t==null?null:t+"";for(r in n){if((o=n[r]).name!==t){a=!1;continue}i=o.state>jn&&o.state<eo,o.state=rn,o.timer.stop(),o.on.call(i?"interrupt":"cancel",e,e.__data__,o.index,o.group),delete n[r]}a&&delete e.__transition}}function Ts(e){return this.each(function(){ln(this,e)})}function Vs(e,t){var n,o;return function(){var i=He(this,e),a=i.tween;if(a!==n){o=n=a;for(var r=0,l=o.length;r<l;++r)if(o[r].name===t){o=o.slice(),o.splice(r,1);break}}i.tween=o}}function Hs(e,t,n){var o,i;if(typeof n!="function")throw new Error;return function(){var a=He(this,e),r=a.tween;if(r!==o){i=(o=r).slice();for(var l={name:t,value:n},u=0,s=i.length;u<s;++u)if(i[u].name===t){i[u]=l;break}u===s&&i.push(l)}a.tween=i}}function Gs(e,t){var n=this._id;if(e+="",arguments.length<2){for(var o=Ae(this.node(),n).tween,i=0,a=o.length,r;i<a;++i)if((r=o[i]).name===e)return r.value;return null}return this.each((t==null?Vs:Hs)(n,e,t))}function _o(e,t,n){var o=e._id;return e.each(function(){var i=He(this,o);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return Ae(i,o).value[t]}}function ca(e,t){var n;return(typeof t=="number"?Je:t instanceof Ot?Xo:(n=Ot(t))?(t=n,Xo):Es)(e,t)}function Os(e){return function(){this.removeAttribute(e)}}function Fs(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Xs(e,t,n){var o,i=n+"",a;return function(){var r=this.getAttribute(e);return r===i?null:r===o?a:a=t(o=r,n)}}function Ws(e,t,n){var o,i=n+"",a;return function(){var r=this.getAttributeNS(e.space,e.local);return r===i?null:r===o?a:a=t(o=r,n)}}function Ys(e,t,n){var o,i,a;return function(){var r,l=n(this),u;return l==null?void this.removeAttribute(e):(r=this.getAttribute(e),u=l+"",r===u?null:r===o&&u===i?a:(i=u,a=t(o=r,l)))}}function Zs(e,t,n){var o,i,a;return function(){var r,l=n(this),u;return l==null?void this.removeAttributeNS(e.space,e.local):(r=this.getAttributeNS(e.space,e.local),u=l+"",r===u?null:r===o&&u===i?a:(i=u,a=t(o=r,l)))}}function Us(e,t){var n=yn(e),o=n==="transform"?Cs:ca;return this.attrTween(e,typeof t=="function"?(n.local?Zs:Ys)(n,o,_o(this,"attr."+e,t)):t==null?(n.local?Fs:Os)(n):(n.local?Ws:Xs)(n,o,t))}function Ks(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function qs(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Js(e,t){var n,o;function i(){var a=t.apply(this,arguments);return a!==o&&(n=(o=a)&&qs(e,a)),n}return i._value=t,i}function Qs(e,t){var n,o;function i(){var a=t.apply(this,arguments);return a!==o&&(n=(o=a)&&Ks(e,a)),n}return i._value=t,i}function js(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var o=yn(e);return this.tween(n,(o.local?Js:Qs)(o,t))}function eu(e,t){return function(){bo(this,e).delay=+t.apply(this,arguments)}}function tu(e,t){return t=+t,function(){bo(this,e).delay=t}}function nu(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?eu:tu)(t,e)):Ae(this.node(),t).delay}function ou(e,t){return function(){He(this,e).duration=+t.apply(this,arguments)}}function iu(e,t){return t=+t,function(){He(this,e).duration=t}}function au(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?ou:iu)(t,e)):Ae(this.node(),t).duration}function ru(e,t){if(typeof t!="function")throw new Error;return function(){He(this,e).ease=t}}function lu(e){var t=this._id;return arguments.length?this.each(ru(t,e)):Ae(this.node(),t).ease}function su(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;He(this,e).ease=n}}function uu(e){if(typeof e!="function")throw new Error;return this.each(su(this._id,e))}function cu(e){typeof e!="function"&&(e=Oi(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var a=t[i],r=a.length,l=o[i]=[],u,s=0;s<r;++s)(u=a[s])&&e.call(u,u.__data__,s,a)&&l.push(u);return new Ue(o,this._parents,this._name,this._id)}function du(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,o=t.length,i=n.length,a=Math.min(o,i),r=new Array(o),l=0;l<a;++l)for(var u=t[l],s=n[l],c=u.length,f=r[l]=new Array(c),h,m=0;m<c;++m)(h=u[m]||s[m])&&(f[m]=h);for(;l<o;++l)r[l]=t[l];return new Ue(r,this._parents,this._name,this._id)}function fu(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function hu(e,t,n){var o,i,a=fu(t)?bo:He;return function(){var r=a(this,e),l=r.on;l!==o&&(i=(o=l).copy()).on(t,n),r.on=i}}function gu(e,t){var n=this._id;return arguments.length<2?Ae(this.node(),n).on.on(e):this.each(hu(n,e,t))}function vu(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function pu(){return this.on("end.remove",vu(this._id))}function mu(e){var t=this._name,n=this._id;typeof e!="function"&&(e=po(e));for(var o=this._groups,i=o.length,a=new Array(i),r=0;r<i;++r)for(var l=o[r],u=l.length,s=a[r]=new Array(u),c,f,h=0;h<u;++h)(c=l[h])&&(f=e.call(c,c.__data__,h,l))&&("__data__"in c&&(f.__data__=c.__data__),s[h]=f,bn(s[h],t,n,h,s,Ae(c,n)));return new Ue(a,this._parents,t,n)}function yu(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Gi(e));for(var o=this._groups,i=o.length,a=[],r=[],l=0;l<i;++l)for(var u=o[l],s=u.length,c,f=0;f<s;++f)if(c=u[f]){for(var h=e.call(c,c.__data__,f,u),m,P=Ae(c,n),E=0,d=h.length;E<d;++E)(m=h[E])&&bn(m,t,n,E,h,P);a.push(h),r.push(c)}return new Ue(a,r,t,n)}var wu=Wt.prototype.constructor;function bu(){return new wu(this._groups,this._parents)}function _u(e,t){var n,o,i;return function(){var a=Nt(this,e),r=(this.style.removeProperty(e),Nt(this,e));return a===r?null:a===n&&r===o?i:i=t(n=a,o=r)}}function da(e){return function(){this.style.removeProperty(e)}}function Eu(e,t,n){var o,i=n+"",a;return function(){var r=Nt(this,e);return r===i?null:r===o?a:a=t(o=r,n)}}function xu(e,t,n){var o,i,a;return function(){var r=Nt(this,e),l=n(this),u=l+"";return l==null&&(u=l=(this.style.removeProperty(e),Nt(this,e))),r===u?null:r===o&&u===i?a:(i=u,a=t(o=r,l))}}function Su(e,t){var n,o,i,a="style."+t,r="end."+a,l;return function(){var u=He(this,e),s=u.on,c=u.value[a]==null?l||(l=da(t)):void 0;(s!==n||i!==c)&&(o=(n=s).copy()).on(r,i=c),u.on=o}}function Nu(e,t,n){var o=(e+="")=="transform"?Ns:ca;return t==null?this.styleTween(e,_u(e,o)).on("end.style."+e,da(e)):typeof t=="function"?this.styleTween(e,xu(e,o,_o(this,"style."+e,t))).each(Su(this._id,e)):this.styleTween(e,Eu(e,o,t),n).on("end.style."+e,null)}function Cu(e,t,n){return function(o){this.style.setProperty(e,t.call(this,o),n)}}function Pu(e,t,n){var o,i;function a(){var r=t.apply(this,arguments);return r!==i&&(o=(i=r)&&Cu(e,r,n)),o}return a._value=t,a}function Mu(e,t,n){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(t==null)return this.tween(o,null);if(typeof t!="function")throw new Error;return this.tween(o,Pu(e,t,n??""))}function ku(e){return function(){this.textContent=e}}function Du(e){return function(){var t=e(this);this.textContent=t??""}}function $u(e){return this.tween("text",typeof e=="function"?Du(_o(this,"text",e)):ku(e==null?"":e+""))}function Iu(e){return function(t){this.textContent=e.call(this,t)}}function Ru(e){var t,n;function o(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&Iu(i)),t}return o._value=e,o}function Lu(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Ru(e))}function Bu(){for(var e=this._name,t=this._id,n=fa(),o=this._groups,i=o.length,a=0;a<i;++a)for(var r=o[a],l=r.length,u,s=0;s<l;++s)if(u=r[s]){var c=Ae(u,t);bn(u,e,n,s,r,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Ue(o,this._parents,e,n)}function zu(){var e,t,n=this,o=n._id,i=n.size();return new Promise(function(a,r){var l={value:r},u={value:function(){--i===0&&a()}};n.each(function(){var s=He(this,o),c=s.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(l),t._.interrupt.push(l),t._.end.push(u)),s.on=t}),i===0&&a()})}var Au=0;function Ue(e,t,n,o){this._groups=e,this._parents=t,this._name=n,this._id=o}function fa(){return++Au}var Ge=Wt.prototype;Ue.prototype={constructor:Ue,select:mu,selectAll:yu,selectChild:Ge.selectChild,selectChildren:Ge.selectChildren,filter:cu,merge:du,selection:bu,transition:Bu,call:Ge.call,nodes:Ge.nodes,node:Ge.node,size:Ge.size,empty:Ge.empty,each:Ge.each,on:gu,attr:Us,attrTween:js,style:Nu,styleTween:Mu,text:$u,textTween:Lu,remove:pu,tween:Gs,delay:nu,duration:au,ease:lu,easeVarying:uu,end:zu,[Symbol.iterator]:Ge[Symbol.iterator]};function Tu(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Vu={time:null,delay:0,duration:250,ease:Tu};function Hu(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Gu(e){var t,n;e instanceof Ue?(t=e._id,e=e._name):(t=fa(),(n=Vu).time=wo(),e=e==null?null:e+"");for(var o=this._groups,i=o.length,a=0;a<i;++a)for(var r=o[a],l=r.length,u,s=0;s<l;++s)(u=r[s])&&bn(u,e,t,s,r,n||Hu(u,t));return new Ue(o,this._parents,e,t)}Wt.prototype.interrupt=Ts;Wt.prototype.transition=Gu;const Jt=e=>()=>e;function Ou(e,{sourceEvent:t,target:n,transform:o,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:i}})}function Xe(e,t,n){this.k=e,this.x=t,this.y=n}Xe.prototype={constructor:Xe,scale:function(e){return e===1?this:new Xe(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Xe(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Pt=new Xe(1,0,0);Xe.prototype;function In(e){e.stopImmediatePropagation()}function Dt(e){e.preventDefault(),e.stopImmediatePropagation()}function Fu(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function Xu(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Jo(){return this.__zoom||Pt}function Wu(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Yu(){return navigator.maxTouchPoints||"ontouchstart"in this}function Zu(e,t,n){var o=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],a=e.invertY(t[0][1])-n[0][1],r=e.invertY(t[1][1])-n[1][1];return e.translate(i>o?(o+i)/2:Math.min(0,o)||Math.max(0,i),r>a?(a+r)/2:Math.min(0,a)||Math.max(0,r))}function Uu(){var e=Fu,t=Xu,n=Zu,o=Wu,i=Yu,a=[0,1/0],r=[[-1/0,-1/0],[1/0,1/0]],l=250,u=Ds,s=mn("start","zoom","end"),c,f,h,m=500,P=150,E=0,d=10;function w(g){g.property("__zoom",Jo).on("wheel.zoom",q,{passive:!1}).on("mousedown.zoom",J).on("dblclick.zoom",z).filter(i).on("touchstart.zoom",X).on("touchmove.zoom",ue).on("touchend.zoom touchcancel.zoom",ne).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}w.transform=function(g,I,C,A){var G=g.selection?g.selection():g;G.property("__zoom",Jo),g!==G?k(g,I,C,A):G.interrupt().each(function(){H(this,arguments).event(A).start().zoom(null,typeof I=="function"?I.apply(this,arguments):I).end()})},w.scaleBy=function(g,I,C,A){w.scaleTo(g,function(){var G=this.__zoom.k,Y=typeof I=="function"?I.apply(this,arguments):I;return G*Y},C,A)},w.scaleTo=function(g,I,C,A){w.transform(g,function(){var G=t.apply(this,arguments),Y=this.__zoom,L=C==null?b(G):typeof C=="function"?C.apply(this,arguments):C,M=Y.invert(L),O=typeof I=="function"?I.apply(this,arguments):I;return n(_(v(Y,O),L,M),G,r)},C,A)},w.translateBy=function(g,I,C,A){w.transform(g,function(){return n(this.__zoom.translate(typeof I=="function"?I.apply(this,arguments):I,typeof C=="function"?C.apply(this,arguments):C),t.apply(this,arguments),r)},null,A)},w.translateTo=function(g,I,C,A,G){w.transform(g,function(){var Y=t.apply(this,arguments),L=this.__zoom,M=A==null?b(Y):typeof A=="function"?A.apply(this,arguments):A;return n(Pt.translate(M[0],M[1]).scale(L.k).translate(typeof I=="function"?-I.apply(this,arguments):-I,typeof C=="function"?-C.apply(this,arguments):-C),Y,r)},A,G)};function v(g,I){return I=Math.max(a[0],Math.min(a[1],I)),I===g.k?g:new Xe(I,g.x,g.y)}function _(g,I,C){var A=I[0]-C[0]*g.k,G=I[1]-C[1]*g.k;return A===g.x&&G===g.y?g:new Xe(g.k,A,G)}function b(g){return[(+g[0][0]+ +g[1][0])/2,(+g[0][1]+ +g[1][1])/2]}function k(g,I,C,A){g.on("start.zoom",function(){H(this,arguments).event(A).start()}).on("interrupt.zoom end.zoom",function(){H(this,arguments).event(A).end()}).tween("zoom",function(){var G=this,Y=arguments,L=H(G,Y).event(A),M=t.apply(G,Y),O=C==null?b(M):typeof C=="function"?C.apply(G,Y):C,$=Math.max(M[1][0]-M[0][0],M[1][1]-M[0][1]),B=G.__zoom,T=typeof I=="function"?I.apply(G,Y):I,N=u(B.invert(O).concat($/B.k),T.invert(O).concat($/T.k));return function(D){if(D===1)D=T;else{var V=N(D),Z=$/V[2];D=new Xe(Z,O[0]-V[0]*Z,O[1]-V[1]*Z)}L.zoom(null,D)}})}function H(g,I,C){return!C&&g.__zooming||new p(g,I)}function p(g,I){this.that=g,this.args=I,this.active=0,this.sourceEvent=null,this.extent=t.apply(g,I),this.taps=0}p.prototype={event:function(g){return g&&(this.sourceEvent=g),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(g,I){return this.mouse&&g!=="mouse"&&(this.mouse[1]=I.invert(this.mouse[0])),this.touch0&&g!=="touch"&&(this.touch0[1]=I.invert(this.touch0[0])),this.touch1&&g!=="touch"&&(this.touch1[1]=I.invert(this.touch1[0])),this.that.__zoom=I,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(g){var I=Le(this.that).datum();s.call(g,this.that,new Ou(g,{sourceEvent:this.sourceEvent,target:w,type:g,transform:this.that.__zoom,dispatch:s}),I)}};function q(g,...I){if(!e.apply(this,arguments))return;var C=H(this,I).event(g),A=this.__zoom,G=Math.max(a[0],Math.min(a[1],A.k*Math.pow(2,o.apply(this,arguments)))),Y=Te(g);if(C.wheel)(C.mouse[0][0]!==Y[0]||C.mouse[0][1]!==Y[1])&&(C.mouse[1]=A.invert(C.mouse[0]=Y)),clearTimeout(C.wheel);else{if(A.k===G)return;C.mouse=[Y,A.invert(Y)],ln(this),C.start()}Dt(g),C.wheel=setTimeout(L,P),C.zoom("mouse",n(_(v(A,G),C.mouse[0],C.mouse[1]),C.extent,r));function L(){C.wheel=null,C.end()}}function J(g,...I){if(h||!e.apply(this,arguments))return;var C=g.currentTarget,A=H(this,I,!0).event(g),G=Le(g.view).on("mousemove.zoom",O,!0).on("mouseup.zoom",$,!0),Y=Te(g,C),L=g.clientX,M=g.clientY;Qi(g.view),In(g),A.mouse=[Y,this.__zoom.invert(Y)],ln(this),A.start();function O(B){if(Dt(B),!A.moved){var T=B.clientX-L,N=B.clientY-M;A.moved=T*T+N*N>E}A.event(B).zoom("mouse",n(_(A.that.__zoom,A.mouse[0]=Te(B,C),A.mouse[1]),A.extent,r))}function $(B){G.on("mousemove.zoom mouseup.zoom",null),ji(B.view,A.moved),Dt(B),A.event(B).end()}}function z(g,...I){if(e.apply(this,arguments)){var C=this.__zoom,A=Te(g.changedTouches?g.changedTouches[0]:g,this),G=C.invert(A),Y=C.k*(g.shiftKey?.5:2),L=n(_(v(C,Y),A,G),t.apply(this,I),r);Dt(g),l>0?Le(this).transition().duration(l).call(k,L,A,g):Le(this).call(w.transform,L,A,g)}}function X(g,...I){if(e.apply(this,arguments)){var C=g.touches,A=C.length,G=H(this,I,g.changedTouches.length===A).event(g),Y,L,M,O;for(In(g),L=0;L<A;++L)M=C[L],O=Te(M,this),O=[O,this.__zoom.invert(O),M.identifier],G.touch0?!G.touch1&&G.touch0[2]!==O[2]&&(G.touch1=O,G.taps=0):(G.touch0=O,Y=!0,G.taps=1+!!c);c&&(c=clearTimeout(c)),Y&&(G.taps<2&&(f=O[0],c=setTimeout(function(){c=null},m)),ln(this),G.start())}}function ue(g,...I){if(this.__zooming){var C=H(this,I).event(g),A=g.changedTouches,G=A.length,Y,L,M,O;for(Dt(g),Y=0;Y<G;++Y)L=A[Y],M=Te(L,this),C.touch0&&C.touch0[2]===L.identifier?C.touch0[0]=M:C.touch1&&C.touch1[2]===L.identifier&&(C.touch1[0]=M);if(L=C.that.__zoom,C.touch1){var $=C.touch0[0],B=C.touch0[1],T=C.touch1[0],N=C.touch1[1],D=(D=T[0]-$[0])*D+(D=T[1]-$[1])*D,V=(V=N[0]-B[0])*V+(V=N[1]-B[1])*V;L=v(L,Math.sqrt(D/V)),M=[($[0]+T[0])/2,($[1]+T[1])/2],O=[(B[0]+N[0])/2,(B[1]+N[1])/2]}else if(C.touch0)M=C.touch0[0],O=C.touch0[1];else return;C.zoom("touch",n(_(L,M,O),C.extent,r))}}function ne(g,...I){if(this.__zooming){var C=H(this,I).event(g),A=g.changedTouches,G=A.length,Y,L;for(In(g),h&&clearTimeout(h),h=setTimeout(function(){h=null},m),Y=0;Y<G;++Y)L=A[Y],C.touch0&&C.touch0[2]===L.identifier?delete C.touch0:C.touch1&&C.touch1[2]===L.identifier&&delete C.touch1;if(C.touch1&&!C.touch0&&(C.touch0=C.touch1,delete C.touch1),C.touch0)C.touch0[1]=this.__zoom.invert(C.touch0[0]);else if(C.end(),C.taps===2&&(L=Te(L,this),Math.hypot(f[0]-L[0],f[1]-L[1])<d)){var M=Le(this).on("dblclick.zoom");M&&M.apply(this,arguments)}}}return w.wheelDelta=function(g){return arguments.length?(o=typeof g=="function"?g:Jt(+g),w):o},w.filter=function(g){return arguments.length?(e=typeof g=="function"?g:Jt(!!g),w):e},w.touchable=function(g){return arguments.length?(i=typeof g=="function"?g:Jt(!!g),w):i},w.extent=function(g){return arguments.length?(t=typeof g=="function"?g:Jt([[+g[0][0],+g[0][1]],[+g[1][0],+g[1][1]]]),w):t},w.scaleExtent=function(g){return arguments.length?(a[0]=+g[0],a[1]=+g[1],w):[a[0],a[1]]},w.translateExtent=function(g){return arguments.length?(r[0][0]=+g[0][0],r[1][0]=+g[1][0],r[0][1]=+g[0][1],r[1][1]=+g[1][1],w):[[r[0][0],r[0][1]],[r[1][0],r[1][1]]]},w.constrain=function(g){return arguments.length?(n=g,w):n},w.duration=function(g){return arguments.length?(l=+g,w):l},w.interpolate=function(g){return arguments.length?(u=g,w):u},w.on=function(){var g=s.on.apply(s,arguments);return g===s?w:g},w.clickDistance=function(g){return arguments.length?(E=(g=+g)*g,w):Math.sqrt(E)},w.tapDistance=function(g){return arguments.length?(d=+g,w):d},w}var te=(e=>(e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom",e))(te||{}),Eo=(e=>(e.Partial="partial",e.Full="full",e))(Eo||{}),vt=(e=>(e.Bezier="default",e.SimpleBezier="simple-bezier",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e))(vt||{}),ft=(e=>(e.Strict="strict",e.Loose="loose",e))(ft||{}),to=(e=>(e.Arrow="arrow",e.ArrowClosed="arrowclosed",e))(to||{}),At=(e=>(e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal",e))(At||{});const ha="vue-flow__node-desc",ga="vue-flow__edge-desc",Ku="vue-flow__aria-live",va=["Enter"," ","Escape"],wt={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};function Qo(e){return{...e.computedPosition||{x:0,y:0},width:e.dimensions.width||0,height:e.dimensions.height||0}}function no(e,t){const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),o=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*o)}function _n(e){return{width:e.offsetWidth,height:e.offsetHeight}}function ht(e,t=0,n=1){return Math.min(Math.max(e,t),n)}function pa(e,t){return{x:ht(e.x,t[0][0],t[1][0]),y:ht(e.y,t[0][1],t[1][1])}}function jo(e){const t=e.getRootNode();return"elementFromPoint"in t?t:ko().document}function je(e){return e&&typeof e=="object"&&"id"in e&&"source"in e&&"target"in e}function qu(e){return je(e)&&"sourceNode"in e&&"targetNode"in e}function lt(e){return e&&typeof e=="object"&&"id"in e&&"position"in e&&!je(e)}function ot(e){return lt(e)&&"computedPosition"in e}function Ju(e){return!!e.width&&!!e.height&&!!e.x&&!!e.y}function Qu(e,t={}){let n=t;return ot(e)||(n={type:e.type??t.type??"default",dimensions:at({width:0,height:0}),handleBounds:{source:[],target:[]},computedPosition:at({z:0,...e.position}),draggable:void 0,selectable:void 0,connectable:void 0,focusable:void 0,selected:!1,dragging:!1,resizing:!1,initialized:!1,...t,data:me(e.data)?e.data:{},events:at(me(e.events)?e.events:{})}),Object.assign({},n,e,{id:e.id.toString()})}function ma(e,t={}){const n=me(e.events)?e.events:t.events&&me(t.events)?t.events:{},o=me(e.data)?e.data:t.data&&me(t.data)?t.data:{};return t=qu(e)?t:{...t,sourceHandle:(e.sourceHandle?e.sourceHandle.toString():void 0)||t.sourceHandle,targetHandle:(e.targetHandle?e.targetHandle.toString():void 0)||t.targetHandle,type:e.type??t.type??"default",source:e.source.toString()||t.source,target:e.target.toString()||t.target,updatable:e.updatable??t.updatable,selectable:e.selectable??t.selectable,focusable:e.focusable??t.focusable,data:o,events:at(n),label:(e.label&&typeof e.label!="string"?at(e.label):e.label)||t.label,interactionWidth:e.interactionWidth||t.interactionWidth},Object.assign({},t,e,{id:e.id.toString()})}function ya(e,t,n,o){const i=typeof e=="string"?e:e.id,a=new Set,r=o==="source"?"target":"source";return n.forEach(l=>{l[r]===i&&a.add(l[o])}),t.filter(l=>a.has(l.id))}function ju(...e){if(e.length===3){const[a,r,l]=e;return ya(a,r,l,"target")}const[t,n]=e,o=typeof t=="string"?t:t.id;return n.filter(a=>je(a)&&a.source===o).map(a=>n.find(r=>lt(r)&&r.id===a.target))}function ec(...e){if(e.length===3){const[a,r,l]=e;return ya(a,r,l,"source")}const[t,n]=e,o=typeof t=="string"?t:t.id;return n.filter(a=>je(a)&&a.target===o).map(a=>n.find(r=>lt(r)&&r.id===a.source))}function wa({source:e,sourceHandle:t,target:n,targetHandle:o}){return`vueflow__edge-${e}${t??""}-${n}${o??""}`}function tc(e,t){return t.some(n=>je(n)&&n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle))}function ba({x:e,y:t},{x:n,y:o,zoom:i}){return{x:e*i+n,y:t*i+o}}function oo({x:e,y:t},{x:n,y:o,zoom:i},a,[r,l]){const u={x:(e-n)/i,y:(t-o)/i};return a?{x:r*Math.round(u.x/r),y:l*Math.round(u.y/l)}:u}function nc(e,t){return{x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}}function _a({x:e,y:t,width:n,height:o}){return{x:e,y:t,x2:e+n,y2:t+o}}function oc({x:e,y:t,x2:n,y2:o}){return{x:e,y:t,width:n-e,height:o-t}}function xo(e){const t=e.reduce((n,{computedPosition:o={x:0,y:0},dimensions:i={width:0,height:0}}={})=>nc(n,_a({...o,...i})),{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return oc(t)}function Ea(e,t,{x:n,y:o,zoom:i}={x:0,y:0,zoom:1},a=!1,r=!1){const l={x:(t.x-n)/i,y:(t.y-o)/i,width:t.width/i,height:t.height/i};return e.filter(u=>{const{computedPosition:s={x:0,y:0},dimensions:c={width:0,height:0},selectable:f}=u;if(r&&!f)return!1;const h={...s,width:c.width||0,height:c.height||0},m=no(l,h),P=typeof c.width>"u"||typeof c.height>"u"||c.width===0||c.height===0,E=a&&m>0,d=c.width*c.height;return P||E||m>=d})}function So(e,t){const n=new Set;return typeof e=="string"?n.add(e):e.length>=1&&e.forEach(o=>n.add(o.id)),t.filter(o=>n.has(o.source)||n.has(o.target))}function ei(e,t,n,o,i,a=.1,r={x:0,y:0}){const l=t/(e.width*(1+a)),u=n/(e.height*(1+a)),s=Math.min(l,u),c=ht(s,o,i),f=e.x+e.width/2,h=e.y+e.height/2,m=t/2-f*c+(r.x??0),P=n/2-h*c+(r.y??0);return{x:m,y:P,zoom:c}}function ic(e,t){return{x:t.x+e.x,y:t.y+e.y,z:(e.z>t.z?e.z:t.z)+1}}function xa(e,t){if(!e.parentNode)return!1;const n=t(e.parentNode);return n?n.selected?!0:xa(n,t):!1}function it(e,t){return typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(o=>`${o}=${e[o]}`).join("&")}`}function ti(e,t,n){return e<t?ht(Math.abs(e-t),1,50)/50:e>n?-ht(Math.abs(e-n),1,50)/50:0}function Sa(e,t){const n=ti(e.x,35,t.width-35)*20,o=ti(e.y,35,t.height-35)*20;return[n,o]}function Rn(e,t){if(t){const n=e.position.x+e.dimensions.width-t.dimensions.width,o=e.position.y+e.dimensions.height-t.dimensions.height;if(n>0||o>0||e.position.x<0||e.position.y<0){let i={};if(typeof t.style=="function"?i={...t.style(t)}:t.style&&(i={...t.style}),i.width=i.width??`${t.dimensions.width}px`,i.height=i.height??`${t.dimensions.height}px`,n>0)if(typeof i.width=="string"){const a=Number(i.width.replace("px",""));i.width=`${a+n}px`}else i.width+=n;if(o>0)if(typeof i.height=="string"){const a=Number(i.height.replace("px",""));i.height=`${a+o}px`}else i.height+=o;if(e.position.x<0){const a=Math.abs(e.position.x);if(t.position.x=t.position.x-a,typeof i.width=="string"){const r=Number(i.width.replace("px",""));i.width=`${r+a}px`}else i.width+=a;e.position.x=0}if(e.position.y<0){const a=Math.abs(e.position.y);if(t.position.y=t.position.y-a,typeof i.height=="string"){const r=Number(i.height.replace("px",""));i.height=`${r+a}px`}else i.height+=a;e.position.y=0}t.dimensions.width=Number(i.width.toString().replace("px","")),t.dimensions.height=Number(i.height.toString().replace("px","")),typeof t.style=="function"?t.style=a=>{const r=t.style;return{...r(a),...i}}:t.style={...t.style,...i}}}}function ni(e,t){e.filter(i=>i.type==="add"||i.type==="remove").forEach(i=>{if(i.type==="add")t.findIndex(r=>r.id===i.item.id)===-1&&t.push(i.item);else if(i.type==="remove"){const a=t.findIndex(r=>r.id===i.id);a!==-1&&t.splice(a,1)}});const o=t.map(i=>i.id);return t.forEach(i=>{var a,r;const l=e.filter(u=>u.id===i.id);for(const u of l)switch(u.type){case"select":i.selected=u.selected;break;case"position":if(ot(i)&&(typeof u.position<"u"&&(i.position=u.position),typeof u.dragging<"u"&&(i.dragging=u.dragging),i.expandParent&&i.parentNode)){const s=t[o.indexOf(i.parentNode)];s&&ot(s)&&Rn(i,s)}break;case"dimensions":if(ot(i)){if(typeof u.dimensions<"u"&&(i.dimensions=u.dimensions),typeof u.updateStyle<"u"&&(i.style={...i.style||{},width:`${(a=u.dimensions)==null?void 0:a.width}px`,height:`${(r=u.dimensions)==null?void 0:r.height}px`}),typeof u.resizing<"u"&&(i.resizing=u.resizing),i.expandParent&&i.parentNode){const s=t[o.indexOf(i.parentNode)];s&&ot(s)&&(s.initialized?Rn(i,s):Ye(()=>{Rn(i,s)}))}i.initialized||(i.initialized=!0)}break}}),t}function Fe(e,t){return{id:e,type:"select",selected:t}}function oi(e){return{item:e,type:"add"}}function ii(e){return{id:e,type:"remove"}}function ai(e,t,n){return{id:e,source:t,target:n,type:"remove"}}function Ln(e,t){return e.reduce((n,o)=>{let i=t.includes(o.id);me(o.selectable)&&!o.selectable&&(i=!1);const a=ot(o)?"changedNodes":"changedEdges";return!o.selected&&i?n[a].push(Fe(o.id,!0)):o.selected&&!i&&n[a].push(Fe(o.id,!1)),n},{changedNodes:[],changedEdges:[]})}function K(e){const t=new Set;let n=!1;const o=()=>t.size>0;e&&(n=!0,t.add(e));const i=l=>{t.delete(l)};return{on:l=>{e&&n&&t.delete(e),t.add(l);const u=()=>i(l);return Xt(u),{off:u}},off:i,trigger:l=>Promise.all(Array.from(t).map(u=>u(l))),hasListeners:o,fns:t}}function ri(e,t,n){let o=e;do{if(o&&o.matches(t))return!0;if(o===n)return!1;o=o.parentElement}while(o);return!1}function ac(e,t,n,o,i){return e.filter(a=>(a.selected||a.id===i)&&(!a.parentNode||!xa(a,o))&&(a.draggable||t&&typeof a.draggable>"u")).map(a=>{var r,l;return at({id:a.id,position:a.position||{x:0,y:0},distance:{x:n.x-((r=a.computedPosition)==null?void 0:r.x)||0,y:n.y-((l=a.computedPosition)==null?void 0:l.y)||0},from:a.computedPosition,extent:a.extent,parentNode:a.parentNode,dimensions:a.dimensions,expandParent:a.expandParent})})}function Bn({id:e,dragItems:t,findNode:n}){const o=t.reduce((i,a)=>{const r=n(a.id);return r&&i.push(r),i},[]);return[e?o.find(i=>i.id===e):o[0],o]}function Na(e){if(Array.isArray(e))switch(e.length){case 1:return[e[0],e[0],e[0],e[0]];case 2:return[e[0],e[1],e[0],e[1]];case 3:return[e[0],e[1],e[2],e[1]];case 4:return e;default:return[0,0,0,0]}return[e,e,e,e]}function rc(e,t,n){const[o,i,a,r]=typeof e!="string"?Na(e.padding):[0,0,0,0];return n&&typeof n.computedPosition.x<"u"&&typeof n.computedPosition.y<"u"&&typeof n.dimensions.width<"u"&&typeof n.dimensions.height<"u"?[[n.computedPosition.x+r,n.computedPosition.y+o],[n.computedPosition.x+n.dimensions.width-i,n.computedPosition.y+n.dimensions.height-a]]:!1}function lc(e,t,n,o){let i=e.extent||n;if((i==="parent"||!Array.isArray(i)&&(i==null?void 0:i.range)==="parent")&&!e.expandParent)if(e.parentNode&&o&&e.dimensions.width&&e.dimensions.height){const a=rc(i,e,o);a&&(i=a)}else t(new Ce(Ne.NODE_EXTENT_INVALID,e.id)),i=n;else if(Array.isArray(i)){const a=(o==null?void 0:o.computedPosition.x)||0,r=(o==null?void 0:o.computedPosition.y)||0;i=[[i[0][0]+a,i[0][1]+r],[i[1][0]+a,i[1][1]+r]]}else if(i!=="parent"&&(i!=null&&i.range)&&Array.isArray(i.range)){const[a,r,l,u]=Na(i.padding),s=(o==null?void 0:o.computedPosition.x)||0,c=(o==null?void 0:o.computedPosition.y)||0;i=[[i.range[0][0]+s+u,i.range[0][1]+c+a],[i.range[1][0]+s-r,i.range[1][1]+c-l]]}return i==="parent"?[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]]:i}function sc({width:e,height:t},n){return[n[0],[n[1][0]-(e||0),n[1][1]-(t||0)]]}function No(e,t,n,o,i){const a=sc(e.dimensions,lc(e,n,o,i)),r=pa(t,a);return{position:{x:r.x-((i==null?void 0:i.computedPosition.x)||0),y:r.y-((i==null?void 0:i.computedPosition.y)||0)},computedPosition:r}}function io(e,t,n){const o=((n==null?void 0:n.x)??0)+t.x,i=((n==null?void 0:n.y)??0)+t.y,a=(n==null?void 0:n.width)??t.width,r=(n==null?void 0:n.height)??t.height;switch(e){case te.Top:return{x:o+a/2,y:i};case te.Right:return{x:o+a,y:i+r/2};case te.Bottom:return{x:o+a/2,y:i+r};case te.Left:return{x:o,y:i+r/2}}}function li(e=[],t){return e.length?!t||e.length===1?e[0]:t&&e.find(n=>n.id===t)||null:null}function uc(e,t,n,o,i,a){const r=io(n,{...e.dimensions,...e.computedPosition},t),l=io(a,{...o.dimensions,...o.computedPosition},i);return{sourceX:r.x,sourceY:r.y,targetX:l.x,targetY:l.y}}function cc({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:o,targetWidth:i,targetHeight:a,width:r,height:l,viewport:u}){const s={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+i),y2:Math.max(e.y+o,t.y+a)};s.x===s.x2&&(s.x2+=1),s.y===s.y2&&(s.y2+=1);const c=_a({x:(0-u.x)/u.zoom,y:(0-u.y)/u.zoom,width:r/u.zoom,height:l/u.zoom}),f=Math.max(0,Math.min(c.x2,s.x2)-Math.max(c.x,s.x)),h=Math.max(0,Math.min(c.y2,s.y2)-Math.max(c.y,s.y));return Math.ceil(f*h)>0}function dc(e,t,n=!1){const o=typeof e.zIndex=="number";let i=o?e.zIndex:0;const a=t(e.source),r=t(e.target);return!a||!r?0:(n&&(i=o?e.zIndex:Math.max(a.computedPosition.z||0,r.computedPosition.z||0)),i)}var Ne=(e=>(e.MISSING_VIEWPORT_DIMENSIONS="MISSING_VIEWPORT_DIMENSIONS",e.NODE_INVALID="NODE_INVALID",e.NODE_NOT_FOUND="NODE_NOT_FOUND",e.NODE_MISSING_PARENT="NODE_MISSING_PARENT",e.NODE_TYPE_MISSING="NODE_TYPE_MISSING",e.NODE_EXTENT_INVALID="NODE_EXTENT_INVALID",e.EDGE_INVALID="EDGE_INVALID",e.EDGE_NOT_FOUND="EDGE_NOT_FOUND",e.EDGE_SOURCE_MISSING="EDGE_SOURCE_MISSING",e.EDGE_TARGET_MISSING="EDGE_TARGET_MISSING",e.EDGE_TYPE_MISSING="EDGE_TYPE_MISSING",e.EDGE_SOURCE_TARGET_SAME="EDGE_SOURCE_TARGET_SAME",e.EDGE_SOURCE_TARGET_MISSING="EDGE_SOURCE_TARGET_MISSING",e.EDGE_ORPHANED="EDGE_ORPHANED",e))(Ne||{});const si={MISSING_VIEWPORT_DIMENSIONS:()=>"The Vue Flow parent container needs a width and a height to render the graph",NODE_INVALID:e=>`Node is invalid
Node: ${e}`,NODE_NOT_FOUND:e=>`Node not found
Node: ${e}`,NODE_MISSING_PARENT:(e,t)=>`Node is missing a parent
Node: ${e}
Parent: ${t}`,NODE_TYPE_MISSING:e=>`Node type is missing
Type: ${e}`,NODE_EXTENT_INVALID:e=>`Only child nodes can use a parent extent
Node: ${e}`,EDGE_INVALID:e=>`An edge needs a source and a target
Edge: ${e}`,EDGE_SOURCE_MISSING:(e,t)=>`Edge source is missing
Edge: ${e} 
Source: ${t}`,EDGE_TARGET_MISSING:(e,t)=>`Edge target is missing
Edge: ${e} 
Target: ${t}`,EDGE_TYPE_MISSING:e=>`Edge type is missing
Type: ${e}`,EDGE_SOURCE_TARGET_SAME:(e,t,n)=>`Edge source and target are the same
Edge: ${e} 
Source: ${t} 
Target: ${n}`,EDGE_SOURCE_TARGET_MISSING:(e,t,n)=>`Edge source or target is missing
Edge: ${e} 
Source: ${t} 
Target: ${n}`,EDGE_ORPHANED:e=>`Edge was orphaned (suddenly missing source or target) and has been removed
Edge: ${e}`,EDGE_NOT_FOUND:e=>`Edge not found
Edge: ${e}`};class Ce extends Error{constructor(t,...n){var o;super((o=si[t])==null?void 0:o.call(si,...n)),this.code=t}}function Co(e){return"clientX"in e}function st(e,t){var n,o;const i=Co(e),a=i?e.clientX:(n=e.touches)==null?void 0:n[0].clientX,r=i?e.clientY:(o=e.touches)==null?void 0:o[0].clientY;return{x:a-((t==null?void 0:t.left)??0),y:r-((t==null?void 0:t.top)??0)}}const gn=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function Ca(){return{handleDomNode:null,isValid:!1,connection:{source:"",target:"",sourceHandle:null,targetHandle:null},endHandle:null}}function zn(e){e==null||e.classList.remove("valid","connecting","vue-flow__handle-valid","vue-flow__handle-connecting")}function ui(e,t,n,o){return(t[n]||[]).reduce((i,a)=>{var r,l;return`${e.id}-${a.id}-${n}`!==o&&i.push({id:a.id||null,type:n,nodeId:e.id,x:(((r=e.computedPosition)==null?void 0:r.x)??0)+a.x+a.width/2,y:(((l=e.computedPosition)==null?void 0:l.y)??0)+a.y+a.height/2,width:a.width,height:a.height}),i},[])}function fc(e,t,n,o,i,a){const{x:r,y:l}=st(e),s=t.elementsFromPoint(r,l).find(P=>P.classList.contains("vue-flow__handle"));if(s){const P=s.getAttribute("data-nodeid");if(P){const E=Po(void 0,s),d=s.getAttribute("data-handleid"),w=a({nodeId:P,id:d,type:E});if(w){const v=i.find(_=>_.nodeId===P&&_.type===E&&_.id===d);return{handle:{id:d,type:E,nodeId:P,x:(v==null?void 0:v.x)||n.x,y:(v==null?void 0:v.y)||n.y},validHandleResult:w}}}}let c=[],f=1/0;if(i.forEach(P=>{const E=Math.sqrt((P.x-n.x)**2+(P.y-n.y)**2);if(E<=o){const d=a(P);E<=f&&(E<f?c=[{handle:P,validHandleResult:d}]:E===f&&c.push({handle:P,validHandleResult:d}),f=E)}}),!c.length)return{handle:null,validHandleResult:Ca()};if(c.length===1)return c[0];const h=c.some(({validHandleResult:P})=>P.isValid),m=c.some(({handle:P})=>P.type==="target");return c.find(({handle:P,validHandleResult:E})=>m?P.type==="target":h?E.isValid:!0)||c[0]}function ci(e,t,n,o,i,a,r,l,u,s,c){const f=a==="target",h=l.querySelector(`.vue-flow__handle[data-id="${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`),{x:m,y:P}=st(e),E=l.elementFromPoint(m,P),d=E!=null&&E.classList.contains("vue-flow__handle")?E:h,w=Ca();if(d){w.handleDomNode=d;const v=Po(void 0,d),_=d.getAttribute("data-nodeid"),b=d.getAttribute("data-handleid"),k=d.classList.contains("connectable"),H=d.classList.contains("connectableend"),p={source:f?_:o,sourceHandle:f?b:i,target:f?o:_,targetHandle:f?i:b};w.connection=p;const J=k&&H&&(n===ft.Strict?f&&v==="source"||!f&&v==="target":_!==o||b!==i);w.endHandle={nodeId:_,handleId:b,type:v},J&&(w.isValid=r(p,{edges:u,nodes:s,sourceNode:c(p.source),targetNode:c(p.target)}))}return w}function hc({nodes:e,nodeId:t,handleId:n,handleType:o}){return e.reduce((i,a)=>{const{handleBounds:r}=a;let l=[],u=[];return r&&(l=ui(a,r,"source",`${t}-${n}-${o}`),u=ui(a,r,"target",`${t}-${n}-${o}`)),i.push(...l,...u),i},[])}function Po(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function gc(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}const vc=["production","prod"];function En(e,...t){vc.includes("production")||console.warn(`[Vue Flow]: ${e}`,...t)}function di(e,t,n){const o=t.querySelectorAll(`.vue-flow__handle${e}`);if(!o||!o.length)return;const i=Array.from(o),a=t.getBoundingClientRect();return i.map(r=>{const l=r.getBoundingClientRect();return{id:r.getAttribute("data-handleid"),position:r.getAttribute("data-handlepos"),x:(l.left-a.left)/n,y:(l.top-a.top)/n,..._n(r)}})}function ao(e,t,n,o,i,a=!1,r){i.value=!1,e.selected?(a||e.selected&&t)&&(o([e]),Ye(()=>{r.blur()})):n([e])}function me(e){return typeof ie(e)<"u"}function pc(e,t,n){if(!e.source||!e.target)return n(new Ce(Ne.EDGE_INVALID,e.id)),!1;let o;return je(e)?o=e:o={...e,id:wa(e)},o=ma(o),tc(o,t)?!1:o}function mc(e,t,n,o,i,a){if(!t.source||!t.target)return a(new Ce(Ne.EDGE_INVALID,e.id)),!1;const r=o(e.id);if(!r)return a(new Ce(Ne.EDGE_NOT_FOUND,e.id)),!1;const{id:l,...u}=e,s={...u,id:i?wa(t):l,source:t.source,target:t.target,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle};return n.splice(n.indexOf(r),1,s),s}function fi(e,t,n,o){const i={},a=e.reduce((l,u)=>{if(!lt(u))return o(new Ce(Ne.NODE_INVALID)),l;const s=Qu(u,{...n(u.id),parentNode:u.parentNode});return u.parentNode&&(i[u.parentNode]=!0),l.concat(s)},[]),r=[...a,...t];for(const l of a){const u=r.find(s=>s.id===l.parentNode);l.parentNode&&!u&&o(new Ce(Ne.NODE_MISSING_PARENT,l.id,l.parentNode)),(l.parentNode||i[l.id])&&(i[l.id]&&(l.isParent=!0),u&&(u.isParent=!0))}return a}function Pa(e){const{vueFlowRef:t,snapToGrid:n,snapGrid:o,noDragClassName:i,nodes:a,nodeExtent:r,nodeDragThreshold:l,viewport:u,autoPanOnNodeDrag:s,nodesDraggable:c,panBy:f,findNode:h,multiSelectionActive:m,nodesSelectionActive:P,selectNodesOnDrag:E,removeSelectedElements:d,addSelectedNodes:w,updateNodePositions:v,emits:_}=xe(),{onStart:b,onDrag:k,onStop:H,el:p,disabled:q,id:J,selectable:z,dragHandle:X}=e,ue=ae(!1);let ne=[],g,I=null,C={x:void 0,y:void 0},A={x:0,y:0},G=null,Y=!1,L=0,M=!1;const O=vd(),$=({x:Z,y:oe})=>{C={x:Z,y:oe};let W=!1;if(ne=ne.map(j=>{const le={x:Z-j.distance.x,y:oe-j.distance.y};n.value&&(le.x=o.value[0]*Math.round(le.x/o.value[0]),le.y=o.value[1]*Math.round(le.y/o.value[1]));const{computedPosition:ce}=No(j,le,_.error,r.value,j.parentNode?h(j.parentNode):void 0);return W=W||j.position.x!==ce.x||j.position.y!==ce.y,j.position=ce,j}),!!W&&(v(ne,!0,!0),ue.value=!0,G)){const[j,le]=Bn({id:J,dragItems:ne,findNode:h});k({event:G,node:j,nodes:le})}},B=()=>{if(!I)return;const[Z,oe]=Sa(A,I);if(Z!==0||oe!==0){const W={x:(C.x??0)-Z/u.value.zoom,y:(C.y??0)-oe/u.value.zoom};f({x:Z,y:oe})&&$(W)}L=requestAnimationFrame(B)},T=(Z,oe)=>{Y=!0;const W=h(J);!E.value&&!m.value&&W&&(W.selected||d()),W&&de(z)&&E.value&&ao(W,m.value,w,d,P,!1,oe);const j=O(Z);if(C=j,ne=ac(a.value,c.value,j,h,J),ne.length){const[le,ce]=Bn({id:J,dragItems:ne,findNode:h});b({event:Z.sourceEvent,node:le,nodes:ce})}},N=(Z,oe)=>{var W;l.value===0&&T(Z,oe),C=O(Z),I=((W=t.value)==null?void 0:W.getBoundingClientRect())||null,A=st(Z.sourceEvent,I)},D=(Z,oe)=>{const W=O(Z);if(!M&&Y&&s.value&&(M=!0,B()),!Y){const j=W.xSnapped-(C.x??0),le=W.ySnapped-(C.y??0);Math.sqrt(j*j+le*le)>l.value&&T(Z,oe)}(C.x!==W.xSnapped||C.y!==W.ySnapped)&&ne.length&&Y&&(G=Z.sourceEvent,A=st(Z.sourceEvent,I),$(W))},V=Z=>{if(Y&&(ue.value=!1,M=!1,Y=!1,cancelAnimationFrame(L),ne.length)){v(ne,!1,!1);const[oe,W]=Bn({id:J,dragItems:ne,findNode:h});H({event:Z.sourceEvent,node:oe,nodes:W})}};return we([()=>de(q),p],([Z,oe],W,j)=>{if(oe){const le=Le(oe);Z||(g=is().on("start",ce=>N(ce,oe)).on("drag",ce=>D(ce,oe)).on("end",ce=>V(ce)).filter(ce=>{const he=ce.target,y=de(X);return!ce.button&&(!i.value||!ri(he,`.${i.value}`,oe)&&(!y||ri(he,y,oe)))}),le.call(g)),j(()=>{le.on(".drag",null),g&&(g.on("start",null),g.on("drag",null),g.on("end",null))})}}),ue}const hi=Symbol("vueFlow"),Ma=Symbol("nodeId"),ka=Symbol("nodeRef"),yc=Symbol("edgeId"),wc=Symbol("edgeRef"),xn=Symbol("slots"),bc=["data-id","data-handleid","data-nodeid","data-handlepos"],_c={name:"Handle",compatConfig:{MODE:3}},vn=_e({..._c,props:{id:{},type:{},position:{default:()=>te.Top},isValidConnection:{type:Function},connectable:{type:[Boolean,Number,String,Function],default:void 0},connectableStart:{type:Boolean,default:!0},connectableEnd:{type:Boolean,default:!0}},setup(e){const t=Li(e,["position","connectable","connectableStart","connectableEnd","id"]),n=Re(()=>t.type??"source"),o=Re(()=>t.isValidConnection??null),{connectionStartHandle:i,connectionClickStartHandle:a,connectionEndHandle:r,vueFlowRef:l,nodesConnectable:u,noDragClassName:s,noPanClassName:c}=xe(),{id:f,node:h,nodeEl:m,connectedEdges:P}=wd(),E=ae(),d=Re(()=>e.id??`${f}__handle-${e.position}`),w=Re(()=>typeof e.connectableStart<"u"?e.connectableStart:!0),v=Re(()=>typeof e.connectableEnd<"u"?e.connectableEnd:!0),_=Re(()=>{var z,X,ue,ne,g,I;return((z=i.value)==null?void 0:z.nodeId)===f&&((X=i.value)==null?void 0:X.handleId)===d.value&&((ue=i.value)==null?void 0:ue.type)===n.value||((ne=r.value)==null?void 0:ne.nodeId)===f&&((g=r.value)==null?void 0:g.handleId)===d.value&&((I=r.value)==null?void 0:I.type)===n.value}),b=Re(()=>{var z,X,ue;return((z=a.value)==null?void 0:z.nodeId)===f&&((X=a.value)==null?void 0:X.handleId)===d.value&&((ue=a.value)==null?void 0:ue.type)===n.value}),{handlePointerDown:k,handleClick:H}=za({nodeId:f,handleId:d,isValidConnection:o,type:n}),p=fe(()=>typeof e.connectable=="string"&&e.connectable==="single"?!P.value.some(z=>{const X=z[`${n.value}Handle`];return z[n.value]!==f?!1:X?X===d.value:!0}):typeof e.connectable=="number"?P.value.filter(z=>{const X=z[`${n.value}Handle`];return z[n.value]!==f?!1:X?X===d.value:!0}).length<e.connectable:typeof e.connectable=="function"?e.connectable(h,P.value):me(e.connectable)?e.connectable:u.value);Qe(()=>h.initialized).toBe(!0,{flush:"post"}).then(()=>{var z;const X=(z=h.handleBounds[n.value])==null?void 0:z.find(G=>G.id===d.value);if(!l.value||X)return;const ue=l.value.querySelector(".vue-flow__transformationpane");if(!m.value||!E.value||!ue||!d.value)return;const ne=m.value.getBoundingClientRect(),g=E.value.getBoundingClientRect(),I=window.getComputedStyle(ue),{m22:C}=new window.DOMMatrixReadOnly(I.transform),A={id:d.value,position:e.position,x:(g.left-ne.left)/C,y:(g.top-ne.top)/C,..._n(E.value)};h.handleBounds[n.value]=[...h.handleBounds[n.value]??[],A]}),Di(()=>{const z=h.handleBounds[n.value];z&&(h.handleBounds[n.value]=z.filter(X=>X.id!==d.value))});function q(z){const X=Co(z);p.value&&w.value&&(X&&z.button===0||!X)&&k(z)}function J(z){!f||!a.value&&!w.value||p.value&&H(z)}return(z,X)=>(ve(),ye("div",{ref_key:"handle",ref:E,"data-id":`${ie(f)}-${ie(d)}-${ie(n)}`,"data-handleid":ie(d),"data-nodeid":ie(f),"data-handlepos":z.position,class:Et(["vue-flow__handle",[`vue-flow__handle-${z.position}`,`vue-flow__handle-${ie(d)}`,ie(s),ie(c),ie(n),{connectable:p.value,connecting:ie(b),connectablestart:ie(w),connectableend:ie(v),connectionindicator:p.value&&(ie(w)&&!ie(_)||ie(v)&&ie(_))}]]),onMousedown:q,onTouchstartPassive:q,onClick:J},[ut(z.$slots,"default",{id:z.id})],42,bc))}}),Sn=function({sourcePosition:e=te.Bottom,targetPosition:t=te.Top,label:n,connectable:o=!0,isValidTargetPos:i,isValidSourcePos:a}){return[pe(vn,{type:"target",position:t,connectable:o,isValidConnection:i}),typeof n!="string"&&n?pe(n):pe("div",{innerHTML:n}),pe(vn,{type:"source",position:e,connectable:o,isValidConnection:a})]};Sn.props=["sourcePosition","targetPosition","label","isValidTargetPos","isValidSourcePos","connectable"];Sn.inheritAttrs=!1;Sn.compatConfig={MODE:3};const Ec=Sn,Nn=function({sourcePosition:e=te.Bottom,label:t,connectable:n=!0,isValidSourcePos:o}){return[typeof t!="string"&&t?pe(t):pe("div",{innerHTML:t}),pe(vn,{type:"source",position:e,connectable:n,isValidConnection:o})]};Nn.props=["sourcePosition","label","isValidSourcePos","connectable"];Nn.inheritAttrs=!1;Nn.compatConfig={MODE:3};const xc=Nn,Cn=function({targetPosition:e=te.Top,label:t,connectable:n=!0,isValidTargetPos:o}){return[pe(vn,{type:"target",position:e,connectable:n,isValidConnection:o}),typeof t!="string"&&t?pe(t):pe("div",{innerHTML:t})]};Cn.props=["targetPosition","label","isValidTargetPos","connectable"];Cn.inheritAttrs=!1;Cn.compatConfig={MODE:3};const Sc=Cn,Nc=_e({name:"Node",compatConfig:{MODE:3},props:["name","type","id","draggable","selectable","focusable","connectable","node","resizeObserver"],setup(e){_t(Ma,e.id);const{id:t,noPanClassName:n,selectNodesOnDrag:o,nodesSelectionActive:i,multiSelectionActive:a,emits:r,findNode:l,removeSelectedNodes:u,addSelectedNodes:s,updateNodeDimensions:c,onUpdateNodeInternals:f,getIntersectingNodes:h,getNodeTypes:m,nodeExtent:P,elevateNodesOnSelect:E,disableKeyboardA11y:d,ariaLiveMessage:w,snapToGrid:v,snapGrid:_,nodeDragThreshold:b,getConnectedEdges:k}=xe(),H=Aa(),p=zt(e,"node"),q=fe(()=>{var N;return l((N=p.value)==null?void 0:N.parentNode)}),J=fe(()=>k(p.value?[p.value]:[])),z=ae(null);_t(ka,z);const{emit:X,on:ue}=_d(p.value,r),ne=Pa({id:e.id,el:z,disabled:()=>!e.draggable,selectable:()=>e.selectable,dragHandle:()=>p.value.dragHandle,onStart(N){X.dragStart({...N,intersections:h(p.value)})},onDrag(N){X.drag({...N,intersections:h(p.value)})},onStop(N){X.dragStop({...N,intersections:h(p.value)})}}),g=fe(()=>p.value.class instanceof Function?p.value.class(p.value):p.value.class),I=fe(()=>{const N=(p.value.style instanceof Function?p.value.style(p.value):p.value.style)||{},D=p.value.width instanceof Function?p.value.width(p.value):p.value.width,V=p.value.height instanceof Function?p.value.height(p.value):p.value.height;return D&&(N.width=typeof D=="string"?D:`${D}px`),V&&(N.height=typeof V=="string"?V:`${V}px`),N}),C=()=>Number(p.value.zIndex??I.value.zIndex??0);return f(N=>{N.includes(e.id)&&G()}),Mt(()=>{e.resizeObserver.observe(z.value)}),Bi(()=>{e.resizeObserver.unobserve(z.value)}),we([()=>p.value.type,()=>p.value.sourcePosition,()=>p.value.targetPosition],()=>{c([{id:e.id,nodeElement:z.value,forceUpdate:!0}])},{flush:"pre"}),we([()=>p.value.position.x,()=>p.value.position.y,()=>{var N;return(N=q.value)==null?void 0:N.computedPosition.x},()=>{var N;return(N=q.value)==null?void 0:N.computedPosition.y},()=>{var N;return(N=q.value)==null?void 0:N.computedPosition.z},()=>C(),()=>p.value.selected,()=>p.value.dimensions.height,()=>p.value.dimensions.width,()=>{var N;return(N=q.value)==null?void 0:N.dimensions.height},()=>{var N;return(N=q.value)==null?void 0:N.dimensions.width}],([N,D,V,Z,oe,W])=>{const j={x:N,y:D,z:W+(E.value&&p.value.selected?1e3:0)};typeof V<"u"&&typeof Z<"u"?p.value.computedPosition=ic({x:V,y:Z,z:oe},j):p.value.computedPosition=j},{flush:"post",immediate:!0}),we([()=>p.value.extent,P],([N,D],[V,Z])=>{(N!==V||D!==Z)&&A()}),p.value.extent==="parent"||typeof p.value.extent=="object"&&"range"in p.value.extent&&p.value.extent.range==="parent"?Qe(()=>p.value.initialized).toBe(!0).then(A):A(),()=>pe("div",{ref:z,"data-id":p.value.id,class:["vue-flow__node",`vue-flow__node-${e.type===!1?"default":e.name}`,{[n.value]:e.draggable,dragging:ne==null?void 0:ne.value,selected:p.value.selected,selectable:e.selectable,parent:p.value.isParent},g.value],style:{zIndex:p.value.computedPosition.z??C(),transform:`translate(${p.value.computedPosition.x}px,${p.value.computedPosition.y}px)`,pointerEvents:e.selectable||e.draggable?"all":"none",visibility:p.value.initialized?"visible":"hidden",...I.value},tabIndex:e.focusable?0:void 0,role:e.focusable?"button":void 0,"aria-describedby":d.value?void 0:`${ha}-${t}`,"aria-label":p.value.ariaLabel,onMouseenter:Y,onMousemove:L,onMouseleave:M,onContextmenu:O,onClick:B,onDblclick:$,onKeydown:T},[pe(e.type===!1?m.value.default:e.type,{id:p.value.id,type:p.value.type,data:p.value.data,events:{...p.value.events,...ue},selected:!!p.value.selected,resizing:!!p.value.resizing,dragging:ne.value,connectable:e.connectable,position:p.value.position,dimensions:p.value.dimensions,isValidTargetPos:p.value.isValidTargetPos,isValidSourcePos:p.value.isValidSourcePos,parent:p.value.parentNode,zIndex:p.value.computedPosition.z,targetPosition:p.value.targetPosition,sourcePosition:p.value.sourcePosition,label:p.value.label,dragHandle:p.value.dragHandle,onUpdateNodeInternals:G})]);function A(){const N=p.value.computedPosition;v.value&&(N.x=_.value[0]*Math.round(N.x/_.value[0]),N.y=_.value[1]*Math.round(N.y/_.value[1]));const{computedPosition:D,position:V}=No(p.value,N,r.error,P.value,q.value);(p.value.computedPosition.x!==D.x||p.value.computedPosition.y!==D.y)&&(p.value.computedPosition={...p.value.computedPosition,...D}),(p.value.position.x!==V.x||p.value.position.y!==V.y)&&(p.value.position=V)}function G(){z.value&&c([{id:e.id,nodeElement:z.value,forceUpdate:!0}])}function Y(N){ne!=null&&ne.value||X.mouseEnter({event:N,node:p.value,connectedEdges:J.value})}function L(N){ne!=null&&ne.value||X.mouseMove({event:N,node:p.value,connectedEdges:J.value})}function M(N){ne!=null&&ne.value||X.mouseLeave({event:N,node:p.value,connectedEdges:J.value})}function O(N){return X.contextMenu({event:N,node:p.value,connectedEdges:J.value})}function $(N){return X.doubleClick({event:N,node:p.value,connectedEdges:J.value})}function B(N){e.selectable&&(!o.value||!e.draggable||b.value>0)&&ao(p.value,a.value,s,u,i,!1,z.value),X.click({event:N,node:p.value,connectedEdges:J.value})}function T(N){if(!lo(N))if(va.includes(N.key)&&e.selectable){const D=N.key==="Escape";ao(p.value,a.value,s,u,i,D,z.value)}else!d.value&&e.draggable&&p.value.selected&&wt[N.key]&&(w.value=`Moved selected node ${N.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~p.value.position.x}, y: ${~~p.value.position.y}`,H({x:wt[N.key].x,y:wt[N.key].y},N.shiftKey))}}}),Cc=Nc,Pc=["transform"],Mc=["width","height","x","y","rx","ry"],kc=["y"],Dc={name:"EdgeText",compatConfig:{MODE:3}},$c=_e({...Dc,props:{x:{},y:{},label:{},labelStyle:{default:()=>({})},labelShowBg:{type:Boolean,default:!0},labelBgStyle:{default:()=>({})},labelBgPadding:{default:()=>[2,4]},labelBgBorderRadius:{default:2}},setup(e){const t=ae({x:0,y:0,width:0,height:0}),n=ae(null),o=fe(()=>`translate(${e.x-t.value.width/2} ${e.y-t.value.height/2})`);Mt(i),we([()=>e.x,()=>e.y,n,()=>e.label],i);function i(){if(!n.value)return;const a=n.value.getBBox();(a.width!==t.value.width||a.height!==t.value.height)&&(t.value=a)}return(a,r)=>(ve(),ye("g",{transform:o.value,class:"vue-flow__edge-textwrapper"},[a.labelShowBg?(ve(),ye("rect",{key:0,class:"vue-flow__edge-textbg",width:`${t.value.width+2*a.labelBgPadding[0]}px`,height:`${t.value.height+2*a.labelBgPadding[1]}px`,x:-a.labelBgPadding[0],y:-a.labelBgPadding[1],style:Ze(a.labelBgStyle),rx:a.labelBgBorderRadius,ry:a.labelBgBorderRadius},null,12,Mc)):ze("",!0),xt("text",Wa(a.$attrs,{ref_key:"el",ref:n,class:"vue-flow__edge-text",y:t.value.height/2,dy:"0.3em",style:a.labelStyle}),[ut(a.$slots,"default",{},()=>[typeof a.label!="string"?(ve(),St(Fa(a.label),{key:0})):(ve(),ye(ct,{key:1},[Xa(Xn(a.label),1)],64))])],16,kc)],8,Pc))}}),Ic=["id","d","marker-end","marker-start"],Rc=["d","stroke-width"],Lc={name:"BaseEdge",inheritAttrs:!1,compatConfig:{MODE:3}},Pn=_e({...Lc,props:{id:{},labelX:{},labelY:{},path:{},label:{},markerStart:{},markerEnd:{},interactionWidth:{default:20},style:{},ref:{type:[String,Object,Function]},labelStyle:{},labelShowBg:{type:Boolean,default:!0},labelBgStyle:{},labelBgPadding:{},labelBgBorderRadius:{}},setup(e,{expose:t}){const n=Li(e,["interactionWidth","labelShowBg"]),o=ae(null),i=ae(null),a=ae(null),r=Oa();return t({pathEl:o,interactionEl:i,labelEl:a}),(l,u)=>(ve(),ye(ct,null,[xt("path",{id:l.id,ref_key:"pathEl",ref:o,d:l.path,style:Ze(n.style),class:Et(["vue-flow__edge-path",ie(r).class]),"marker-end":l.markerEnd,"marker-start":l.markerStart},null,14,Ic),l.interactionWidth?(ve(),ye("path",{key:0,ref_key:"interactionEl",ref:i,fill:"none",d:l.path,"stroke-width":l.interactionWidth,"stroke-opacity":0,class:"vue-flow__edge-interaction"},null,8,Rc)):ze("",!0),l.label&&l.labelX&&l.labelY?(ve(),St($c,{key:1,ref_key:"labelEl",ref:a,x:l.labelX,y:l.labelY,label:l.label,"label-show-bg":l.labelShowBg,"label-bg-style":l.labelBgStyle,"label-bg-padding":l.labelBgPadding,"label-bg-border-radius":l.labelBgBorderRadius,"label-style":l.labelStyle},null,8,["x","y","label","label-show-bg","label-bg-style","label-bg-padding","label-bg-border-radius","label-style"])):ze("",!0)],64))}});function Da({sourceX:e,sourceY:t,targetX:n,targetY:o}){const i=Math.abs(n-e)/2,a=n<e?n+i:n-i,r=Math.abs(o-t)/2,l=o<t?o+r:o-r;return[a,l,i,r]}function $a({sourceX:e,sourceY:t,targetX:n,targetY:o,sourceControlX:i,sourceControlY:a,targetControlX:r,targetControlY:l}){const u=e*.125+i*.375+r*.375+n*.125,s=t*.125+a*.375+l*.375+o*.125,c=Math.abs(u-e),f=Math.abs(s-t);return[u,s,c,f]}function Qt(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function gi({pos:e,x1:t,y1:n,x2:o,y2:i,c:a}){let r,l;switch(e){case te.Left:r=t-Qt(t-o,a),l=n;break;case te.Right:r=t+Qt(o-t,a),l=n;break;case te.Top:r=t,l=n-Qt(n-i,a);break;case te.Bottom:r=t,l=n+Qt(i-n,a);break}return[r,l]}function Ia({sourceX:e,sourceY:t,sourcePosition:n=te.Bottom,targetX:o,targetY:i,targetPosition:a=te.Top,curvature:r=.25}){const[l,u]=gi({pos:n,x1:e,y1:t,x2:o,y2:i,c:r}),[s,c]=gi({pos:a,x1:o,y1:i,x2:e,y2:t,c:r}),[f,h,m,P]=$a({sourceX:e,sourceY:t,targetX:o,targetY:i,sourceControlX:l,sourceControlY:u,targetControlX:s,targetControlY:c});return[`M${e},${t} C${l},${u} ${s},${c} ${o},${i}`,f,h,m,P]}function vi({pos:e,x1:t,y1:n,x2:o,y2:i}){let a,r;switch(e){case te.Left:case te.Right:a=.5*(t+o),r=n;break;case te.Top:case te.Bottom:a=t,r=.5*(n+i);break}return[a,r]}function Ra({sourceX:e,sourceY:t,sourcePosition:n=te.Bottom,targetX:o,targetY:i,targetPosition:a=te.Top}){const[r,l]=vi({pos:n,x1:e,y1:t,x2:o,y2:i}),[u,s]=vi({pos:a,x1:o,y1:i,x2:e,y2:t}),[c,f,h,m]=$a({sourceX:e,sourceY:t,targetX:o,targetY:i,sourceControlX:r,sourceControlY:l,targetControlX:u,targetControlY:s});return[`M${e},${t} C${r},${l} ${u},${s} ${o},${i}`,c,f,h,m]}const pi={[te.Left]:{x:-1,y:0},[te.Right]:{x:1,y:0},[te.Top]:{x:0,y:-1},[te.Bottom]:{x:0,y:1}};function Bc({source:e,sourcePosition:t=te.Bottom,target:n}){return t===te.Left||t===te.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1}}function mi(e,t){return Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2)}function zc({source:e,sourcePosition:t=te.Bottom,target:n,targetPosition:o=te.Top,center:i,offset:a}){const r=pi[t],l=pi[o],u={x:e.x+r.x*a,y:e.y+r.y*a},s={x:n.x+l.x*a,y:n.y+l.y*a},c=Bc({source:u,sourcePosition:t,target:s}),f=c.x!==0?"x":"y",h=c[f];let m,P,E;const d={x:0,y:0},w={x:0,y:0},[v,_,b,k]=Da({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(r[f]*l[f]===-1){P=i.x||v,E=i.y||_;const p=[{x:P,y:u.y},{x:P,y:s.y}],q=[{x:u.x,y:E},{x:s.x,y:E}];r[f]===h?m=f==="x"?p:q:m=f==="x"?q:p}else{const p=[{x:u.x,y:s.y}],q=[{x:s.x,y:u.y}];if(f==="x"?m=r.x===h?q:p:m=r.y===h?p:q,t===o){const ne=Math.abs(e[f]-n[f]);if(ne<=a){const g=Math.min(a-1,a-ne);r[f]===h?d[f]=g:w[f]=g}}if(t!==o){const ne=f==="x"?"y":"x",g=r[f]===l[ne],I=u[ne]>s[ne],C=u[ne]<s[ne];(r[f]===1&&(!g&&I||g&&C)||r[f]!==1&&(!g&&C||g&&I))&&(m=f==="x"?p:q)}const J={x:u.x-d.x,y:u.y-d.y},z={x:s.x-w.x,y:s.y-w.y},X=Math.max(Math.abs(J.x-m[0].x),Math.abs(z.x-m[0].x)),ue=Math.max(Math.abs(J.y-m[0].y),Math.abs(z.y-m[0].y));X>=ue?(P=(J.x+z.x)/2,E=m[0].y):(P=m[0].x,E=(J.y+z.y)/2)}return[[e,{x:u.x-d.x,y:u.y-d.y},...m,{x:s.x-w.x,y:s.y-w.y},n],P,E,b,k]}function Ac(e,t,n,o){const i=Math.min(mi(e,t)/2,mi(t,n)/2,o),{x:a,y:r}=t;if(e.x===a&&a===n.x||e.y===r&&r===n.y)return`L${a} ${r}`;if(e.y===r){const s=e.x<n.x?-1:1,c=e.y<n.y?1:-1;return`L ${a+i*s},${r}Q ${a},${r} ${a},${r+i*c}`}const l=e.x<n.x?1:-1,u=e.y<n.y?-1:1;return`L ${a},${r+i*u}Q ${a},${r} ${a+i*l},${r}`}function ro({sourceX:e,sourceY:t,sourcePosition:n=te.Bottom,targetX:o,targetY:i,targetPosition:a=te.Top,borderRadius:r=5,centerX:l,centerY:u,offset:s=20}){const[c,f,h,m,P]=zc({source:{x:e,y:t},sourcePosition:n,target:{x:o,y:i},targetPosition:a,center:{x:l,y:u},offset:s});return[c.reduce((d,w,v)=>{let _;return v>0&&v<c.length-1?_=Ac(c[v-1],w,c[v+1],r):_=`${v===0?"M":"L"}${w.x} ${w.y}`,d+=_,d},""),f,h,m,P]}function Tc({sourceX:e,sourceY:t,targetX:n,targetY:o}){const[i,a,r,l]=Da({sourceX:e,sourceY:t,targetX:n,targetY:o});return[`M ${e},${t}L ${n},${o}`,i,a,r,l]}const Vc=_e({name:"BezierEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","curvature","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,i]=Ia({...e,sourcePosition:e.sourcePosition??te.Bottom,targetPosition:e.targetPosition??te.Top});return pe(Pn,{path:n,labelX:o,labelY:i,...t,...e})}}}),Hc=Vc,Gc=_e({name:"SimpleBezierEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,i]=Ra({...e,sourcePosition:e.sourcePosition??te.Bottom,targetPosition:e.targetPosition??te.Top});return pe(Pn,{path:n,labelX:o,labelY:i,...t,...e})}}}),Oc=Gc,Fc=_e({name:"SmoothStepEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","borderRadius","markerEnd","markerStart","interactionWidth","offset"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,i]=ro({...e,sourcePosition:e.sourcePosition??te.Bottom,targetPosition:e.targetPosition??te.Top});return pe(Pn,{path:n,labelX:o,labelY:i,...t,...e})}}}),La=Fc,Xc=_e({name:"StepEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],setup(e,{attrs:t}){return()=>pe(La,{...e,...t,borderRadius:0})}}),Wc=Xc,Yc=_e({name:"StraightEdge",props:["label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,i]=Tc(e);return pe(Pn,{path:n,labelX:o,labelY:i,...t,...e})}}}),Zc=Yc;function Uc(e,t,n){return n===te.Left?e-t:n===te.Right?e+t:e}function Kc(e,t,n){return n===te.Top?e-t:n===te.Bottom?e+t:e}const Mo=function({radius:e=10,centerX:t=0,centerY:n=0,position:o=te.Top,type:i}){return pe("circle",{class:`vue-flow__edgeupdater vue-flow__edgeupdater-${i}`,cx:Uc(t,e,o),cy:Kc(n,e,o),r:e,stroke:"transparent",fill:"transparent"})};Mo.props=["radius","centerX","centerY","position","type"];Mo.compatConfig={MODE:3};const yi=Mo,qc=_e({name:"Edge",compatConfig:{MODE:3},props:["name","type","id","updatable","selectable","focusable","edge"],setup(e){const{id:t,addSelectedEdges:n,connectionMode:o,edgeUpdaterRadius:i,emits:a,nodesSelectionActive:r,noPanClassName:l,getEdgeTypes:u,removeSelectedEdges:s,findEdge:c,findNode:f,isValidConnection:h,multiSelectionActive:m,hooks:P}=xe(),E=gd(e.edge,a),d=zt(e,"edge"),w=ae(!1),v=ae(!1),_=ae(""),b=ae(null),k=ae("source"),H=ae(null);_t(yc,e.id),_t(wc,H);const p=fe(()=>d.value.class instanceof Function?d.value.class(d.value):d.value.class),q=fe(()=>d.value.style instanceof Function?d.value.style(d.value):d.value.style),{handlePointerDown:J}=za({nodeId:_,handleId:b,type:k,isValidConnection:h,edgeUpdaterType:k,onEdgeUpdate:ue,onEdgeUpdateEnd:ne});return()=>{const B=f(d.value.source),T=f(d.value.target);if(!B&&!T)return P.value.error.trigger(new Ce(Ne.EDGE_SOURCE_TARGET_MISSING,d.value.id,d.value.source,d.value.target)),null;if(!B)return P.value.error.trigger(new Ce(Ne.EDGE_SOURCE_MISSING,d.value.id,d.value.source)),null;if(!T)return P.value.error.trigger(new Ce(Ne.EDGE_TARGET_MISSING,d.value.id,d.value.target)),null;if(!d.value||B.hidden||T.hidden)return null;let N;o.value===ft.Strict?N=B.handleBounds.source:N=[...B.handleBounds.source||[],...B.handleBounds.target||[]];const D=li(N,d.value.sourceHandle);let V;o.value===ft.Strict?V=T.handleBounds.target:V=[...T.handleBounds.target||[],...T.handleBounds.source||[]];const Z=li(V,d.value.targetHandle),oe=D?D.position:te.Bottom,W=Z?Z.position:te.Top,{sourceX:j,sourceY:le,targetY:ce,targetX:he}=uc(B,D,oe,T,Z,W);return d.value.sourceX=j,d.value.sourceY=le,d.value.targetX=he,d.value.targetY=ce,pe("g",{ref:H,key:e.id,"data-id":e.id,class:["vue-flow__edge",`vue-flow__edge-${e.type===!1?"default":e.name}`,l.value,p.value,{updating:w.value,selected:d.value.selected,animated:d.value.animated,inactive:!e.selectable}],onClick:I,onContextmenu:C,onDblclick:A,onMouseenter:G,onMousemove:Y,onMouseleave:L,onKeyDown:e.focusable?$:void 0,tabIndex:e.focusable?0:void 0,"aria-label":d.value.ariaLabel===null?void 0:d.value.ariaLabel||`Edge from ${d.value.source} to ${d.value.target}`,"aria-describedby":e.focusable?`${ga}-${t}`:void 0,role:e.focusable?"button":"img"},[v.value?null:pe(e.type===!1?u.value.default:e.type,{id:e.id,sourceNode:B,targetNode:T,source:d.value.source,target:d.value.target,type:d.value.type,updatable:e.updatable,selected:d.value.selected,animated:d.value.animated,label:d.value.label,labelStyle:d.value.labelStyle,labelShowBg:d.value.labelShowBg,labelBgStyle:d.value.labelBgStyle,labelBgPadding:d.value.labelBgPadding,labelBgBorderRadius:d.value.labelBgBorderRadius,data:d.value.data,events:{...d.value.events,...E.on},style:q.value,markerStart:`url(#${it(d.value.markerStart,t)})`,markerEnd:`url(#${it(d.value.markerEnd,t)})`,sourcePosition:oe,targetPosition:W,sourceX:j,sourceY:le,targetX:he,targetY:ce,sourceHandleId:d.value.sourceHandle,targetHandleId:d.value.targetHandle,interactionWidth:d.value.interactionWidth}),[e.updatable==="source"||e.updatable===!0?[pe("g",{onMousedown:M,onMouseenter:z,onMouseout:X},pe(yi,{position:oe,centerX:j,centerY:le,radius:i.value,type:"source","data-type":"source"}))]:null,e.updatable==="target"||e.updatable===!0?[pe("g",{onMousedown:O,onMouseenter:z,onMouseout:X},pe(yi,{position:W,centerX:he,centerY:ce,radius:i.value,type:"target","data-type":"target"}))]:null]])};function z(){w.value=!0}function X(){w.value=!1}function ue(B,T){E.emit.update({event:B,edge:d.value,connection:T})}function ne(B){E.emit.updateEnd({event:B,edge:d.value}),v.value=!1}function g(B,T){B.button===0&&(v.value=!0,_.value=T?d.value.target:d.value.source,b.value=(T?d.value.targetHandle:d.value.sourceHandle)??"",k.value=T?"target":"source",E.emit.updateStart({event:B,edge:d.value}),J(B))}function I(B){var T;const N={event:B,edge:d.value};e.selectable&&(r.value=!1,d.value.selected&&m.value?(s([d.value]),(T=H.value)==null||T.blur()):n([d.value])),E.emit.click(N)}function C(B){E.emit.contextMenu({event:B,edge:d.value})}function A(B){E.emit.doubleClick({event:B,edge:d.value})}function G(B){E.emit.mouseEnter({event:B,edge:d.value})}function Y(B){E.emit.mouseMove({event:B,edge:d.value})}function L(B){E.emit.mouseLeave({event:B,edge:d.value})}function M(B){g(B,!0)}function O(B){g(B,!1)}function $(B){var T;va.includes(B.key)&&e.selectable&&(B.key==="Escape"?((T=H.value)==null||T.blur(),s([c(e.id)])):n([c(e.id)]))}}}),Jc=qc,Qc={[te.Left]:te.Right,[te.Right]:te.Left,[te.Top]:te.Bottom,[te.Bottom]:te.Top},jc=_e({name:"ConnectionLine",compatConfig:{MODE:3},setup(){var e;const{connectionMode:t,connectionStartHandle:n,connectionEndHandle:o,connectionPosition:i,connectionLineType:a,connectionLineStyle:r,connectionLineOptions:l,connectionStatus:u,viewport:s,findNode:c}=xe(),f=(e=bt(xn))==null?void 0:e["connection-line"];return()=>{var h,m,P,E,d;if(!n.value)return null;const w=c(n.value.nodeId);if(!w)return null;const v=n.value.handleId,_=n.value.type,b=((h=o.value)==null?void 0:h.handleId)&&c(o.value.nodeId)||null,k=(i.value.x-s.value.x)/s.value.zoom,H=(i.value.y-s.value.y)/s.value.zoom,p=w.handleBounds;let q=p==null?void 0:p[_];if(t.value===ft.Loose&&(q=q||(p==null?void 0:p[_==="source"?"target":"source"])),!q)return null;const J=(v?q.find(G=>G.id===v):q[0])??null,z=(J==null?void 0:J.position)||te.Top,{x:X,y:ue}=io(z,{...w.dimensions,...w.computedPosition},J),ne=b&&((m=o.value)==null?void 0:m.handleId)&&((t.value===ft.Strict?(P=b.handleBounds[_==="source"?"target":"source"])==null?void 0:P.find(G=>{var Y;return G.id===((Y=o.value)==null?void 0:Y.handleId)}):(E=[...b.handleBounds.source||[],...b.handleBounds.target||[]])==null?void 0:E.find(G=>{var Y;return G.id===((Y=o.value)==null?void 0:Y.handleId)}))||((d=b.handleBounds[_??"target"])==null?void 0:d[0]))||null,g=z?Qc[z]:null;if(!z||!g)return null;const I=a.value??l.value.type;let C="";const A={sourceX:X,sourceY:ue,sourcePosition:z,targetX:k,targetY:H,targetPosition:g};return I===vt.Bezier?[C]=Ia(A):I===vt.Step?[C]=ro({...A,borderRadius:0}):I===vt.SmoothStep?[C]=ro(A):I===vt.SimpleBezier?[C]=Ra(A):C=`M${X},${ue} ${k},${H}`,pe("svg",{class:"vue-flow__edges vue-flow__connectionline vue-flow__container"},pe("g",{class:"vue-flow__connection"},f?pe(f,{sourceX:X,sourceY:ue,sourcePosition:z,targetX:k,targetY:H,targetPosition:g,sourceNode:w,sourceHandle:J,targetNode:b,targetHandle:ne,markerEnd:`url(#${it(l.value.markerEnd)})`,markerStart:`url(#${it(l.value.markerStart)})`,connectionStatus:u.value}):pe("path",{d:C,class:[l.value.class,u,"vue-flow__connection-path"],style:r.value||l.value.style,"marker-end":`url(#${it(l.value.markerEnd)})`,"marker-start":`url(#${it(l.value.markerStart)})`})))}}}),ed=jc,td=["tabIndex"],nd={name:"NodesSelection",compatConfig:{MODE:3}},od=_e({...nd,setup(e){const t=xe(),n=be(t,"emits"),o=be(t,"viewport"),i=be(t,"getSelectedNodes"),a=be(t,"noPanClassName"),r=be(t,"disableKeyboardA11y"),l=be(t,"userSelectionActive"),u=Aa(),s=ae(null),c=Pa({el:s,onStart(E){n.value.selectionDragStart(E)},onDrag(E){n.value.selectionDrag(E)},onStop(E){n.value.selectionDragStop(E)}});Mt(()=>{var E;r.value||(E=s.value)==null||E.focus({preventScroll:!0})});const f=fe(()=>xo(i.value)),h=fe(()=>({width:`${f.value.width}px`,height:`${f.value.height}px`,top:`${f.value.y}px`,left:`${f.value.x}px`}));function m(E){n.value.selectionContextMenu({event:E,nodes:i.value})}function P(E){r.value||wt[E.key]&&u({x:wt[E.key].x,y:wt[E.key].y},E.shiftKey)}return(E,d)=>!l.value&&f.value.width&&f.value.height?(ve(),ye("div",{key:0,class:Et(["vue-flow__nodesselection vue-flow__container",a.value]),style:Ze({transform:`translate(${o.value.x}px,${o.value.y}px) scale(${o.value.zoom})`})},[xt("div",{ref_key:"el",ref:s,class:Et([{dragging:ie(c)},"vue-flow__nodesselection-rect"]),style:Ze(h.value),tabIndex:r.value?void 0:-1,onContextmenu:m,onKeydown:P},null,46,td)],6)):ze("",!0)}}),id={name:"UserSelection",compatConfig:{MODE:3}},ad=_e({...id,props:{userSelectionRect:{}},setup(e){return(t,n)=>(ve(),ye("div",{class:"vue-flow__selection vue-flow__container",style:Ze({width:`${t.userSelectionRect.width}px`,height:`${t.userSelectionRect.height}px`,transform:`translate(${t.userSelectionRect.x}px, ${t.userSelectionRect.y}px)`})},null,4))}});function rd(){return{edgesChange:K(),nodesChange:K(),nodeDoubleClick:K(),nodeClick:K(),nodeMouseEnter:K(),nodeMouseMove:K(),nodeMouseLeave:K(),nodeContextMenu:K(),nodeDragStart:K(),nodeDrag:K(),nodeDragStop:K(),nodesInitialized:K(),miniMapNodeClick:K(),miniMapNodeDoubleClick:K(),miniMapNodeMouseEnter:K(),miniMapNodeMouseMove:K(),miniMapNodeMouseLeave:K(),connect:K(),connectStart:K(),connectEnd:K(),clickConnectStart:K(),clickConnectEnd:K(),paneReady:K(),move:K(),moveStart:K(),moveEnd:K(),selectionDragStart:K(),selectionDrag:K(),selectionDragStop:K(),selectionContextMenu:K(),selectionStart:K(),selectionEnd:K(),viewportChangeStart:K(),viewportChange:K(),viewportChangeEnd:K(),paneScroll:K(),paneClick:K(),paneContextMenu:K(),paneMouseEnter:K(),paneMouseMove:K(),paneMouseLeave:K(),edgeContextMenu:K(),edgeMouseEnter:K(),edgeMouseMove:K(),edgeMouseLeave:K(),edgeDoubleClick:K(),edgeClick:K(),edgeUpdateStart:K(),edgeUpdate:K(),edgeUpdateEnd:K(),updateNodeInternals:K(),error:K(e=>En(e.message))}}function ld(e,t){Ha(()=>{for(const[n,o]of Object.entries(t.value)){const i=a=>{e(n,a)};o.fns.add(i),Xt(()=>{o.off(i)})}})}const sd={input:xc,default:Ec,output:Sc},ud={default:Hc,straight:Zc,step:Wc,smoothstep:La,simplebezier:Oc};function cd(){return{vueFlowRef:null,viewportRef:null,nodes:[],edges:[],nodeTypes:{},edgeTypes:{},initialized:!1,dimensions:{width:0,height:0},viewport:{x:0,y:0,zoom:1},d3Zoom:null,d3Selection:null,d3ZoomHandler:null,minZoom:.5,maxZoom:2,translateExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],nodeExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],selectionMode:Eo.Full,paneDragging:!1,preventScrolling:!0,zoomOnScroll:!0,zoomOnPinch:!0,zoomOnDoubleClick:!0,panOnScroll:!1,panOnScrollSpeed:.5,panOnScrollMode:At.Free,panOnDrag:!0,edgeUpdaterRadius:10,onlyRenderVisibleElements:!1,defaultViewport:{x:0,y:0,zoom:1},nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,defaultMarkerColor:"#b1b1b7",connectionLineStyle:{},connectionLineType:null,connectionLineOptions:{type:vt.Bezier,style:{}},connectionMode:ft.Loose,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectionPosition:{x:NaN,y:NaN},connectionRadius:20,connectOnClick:!0,connectionStatus:null,isValidConnection:null,snapGrid:[15,15],snapToGrid:!1,edgesUpdatable:!1,edgesFocusable:!0,nodesFocusable:!0,nodesConnectable:!0,nodesDraggable:!0,nodeDragThreshold:1,elementsSelectable:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,selectionKeyCode:"Shift",multiSelectionKeyCode:gn()?"Meta":"Control",zoomActivationKeyCode:gn()?"Meta":"Control",deleteKeyCode:"Backspace",panActivationKeyCode:"Space",hooks:rd(),applyDefault:!0,autoConnect:!1,fitViewOnInit:!1,noDragClassName:"nodrag",noWheelClassName:"nowheel",noPanClassName:"nopan",defaultEdgeOptions:void 0,elevateEdgesOnSelect:!1,elevateNodesOnSelect:!0,autoPanOnNodeDrag:!0,autoPanOnConnect:!0,disableKeyboardA11y:!1,ariaLiveMessage:"",__experimentalFeatures:{nestedFlow:!1}}}function Ba(e){const t=cd();return e&&Object.keys(e).forEach(n=>{const o=e[n];me(o)&&(t[n]=o)}),t}function dd(e,t,n,o,i,a,r){const l=xd(o,i),u=y=>{const S=y??a.value??[];o.hooks.updateNodeInternals.trigger(S)},s=y=>ec(y,o.nodes,o.edges),c=y=>ju(y,o.nodes,o.edges),f=y=>So(y,o.edges),h=y=>{if(y)return o.nodes&&!a.value.length?o.nodes.find(S=>S.id===y):o.nodes[a.value.indexOf(y)]},m=y=>{if(y)return o.edges&&!r.value.length?o.edges.find(S=>S.id===y):o.edges[r.value.indexOf(y)]},P=(y,S,U)=>{const x=[];y.forEach(R=>{var ee,Q;const se={id:R.id,type:"position",dragging:U,from:R.from};if(S&&(se.position=R.position,R.parentNode)){const re=h(R.parentNode);se.position={x:se.position.x-(((ee=re==null?void 0:re.computedPosition)==null?void 0:ee.x)??0),y:se.position.y-(((Q=re==null?void 0:re.computedPosition)==null?void 0:Q.y)??0)}}x.push(se)}),x!=null&&x.length&&o.hooks.nodesChange.trigger(x)},E=y=>{var S;if(!o.vueFlowRef)return;const U=o.vueFlowRef.querySelector(".vue-flow__transformationpane");if(!U)return;let x;if((S=o.__experimentalFeatures)!=null&&S.nestedFlow){let ee=[U],Q=U,se;for(;!se&&Q;)Q=Q.parentElement,se=Q==null?void 0:Q.classList.contains("vue-flow__transformationpane"),se&&(ee=[Q,...ee]);ee.forEach(re=>{const ge=window.getComputedStyle(re),{m22:Me}=new window.DOMMatrixReadOnly(ge.transform);x?x*=Me:x=Me})}else{const ee=window.getComputedStyle(U),{m22:Q}=new window.DOMMatrixReadOnly(ee.transform);x=Q}const R=y.reduce((ee,Q)=>{const se=h(Q.id);if(se){const re=_n(Q.nodeElement);!!(re.width&&re.height&&(se.dimensions.width!==re.width||se.dimensions.height!==re.height||Q.forceUpdate))&&(se.handleBounds.source=di(".source",Q.nodeElement,x),se.handleBounds.target=di(".target",Q.nodeElement,x),se.dimensions=re,se.initialized=!0,ee.push({id:se.id,type:"dimensions",dimensions:re}))}return ee},[]);R.length&&o.hooks.nodesChange.trigger(R)},d=(y,S)=>{const U=y.map(ee=>ee.id);let x,R=[];if(o.multiSelectionActive)x=U.map(ee=>Fe(ee,S));else{const ee=Ln([...o.nodes,...o.edges],U);x=ee.changedNodes,R=ee.changedEdges}x.length&&o.hooks.nodesChange.trigger(x),R.length&&o.hooks.edgesChange.trigger(R)},w=(y,S)=>{const U=y.map(ee=>ee.id);let x=[],R;if(o.multiSelectionActive)R=U.map(ee=>Fe(ee,S));else{const ee=Ln([...o.nodes,...o.edges],U);x=ee.changedNodes,R=ee.changedEdges}x.length&&o.hooks.nodesChange.trigger(x),R.length&&o.hooks.edgesChange.trigger(R)},v=(y,S)=>{const U=y.filter(lt).map(Q=>Q.id),x=y.filter(je).map(Q=>Q.id);let{changedNodes:R,changedEdges:ee}=Ln([...o.nodes,...o.edges],[...U,...x]);o.multiSelectionActive&&(R=U.map(Q=>Fe(Q,S)),ee=x.map(Q=>Fe(Q,S))),R.length&&o.hooks.nodesChange.trigger(R),ee.length&&o.hooks.edgesChange.trigger(ee)},_=y=>{d(y,!0)},b=y=>{w(y,!0)},k=y=>{v(y,!0)},H=y=>{if(!y.length)return d(y,!1);const U=y.map(x=>x.id).map(x=>Fe(x,!1));U.length&&o.hooks.nodesChange.trigger(U)},p=y=>{if(!y.length)return w(y,!1);const U=y.map(x=>x.id).map(x=>Fe(x,!1));U.length&&o.hooks.edgesChange.trigger(U)},q=y=>{if(!y||!y.length)return v([],!1);const S=y.reduce((U,x)=>{const R=Fe(x.id,!1);return lt(x)?U.nodes.push(R):U.edges.push(R),U},{nodes:[],edges:[]});S.nodes.length&&o.hooks.nodesChange.trigger(S.nodes),S.edges.length&&o.hooks.edgesChange.trigger(S.edges)},J=y=>{var S;(S=o.d3Zoom)==null||S.scaleExtent([y,o.maxZoom]),o.minZoom=y},z=y=>{var S;(S=o.d3Zoom)==null||S.scaleExtent([o.minZoom,y]),o.maxZoom=y},X=y=>{var S;(S=o.d3Zoom)==null||S.translateExtent(y),o.translateExtent=y},ue=y=>{o.nodeExtent=y,u(a.value)},ne=y=>{o.nodesDraggable=y,o.nodesConnectable=y,o.elementsSelectable=y},g=y=>{const S=y instanceof Function?y(o.nodes):y;!o.initialized&&!S.length||(o.nodes=fi(S,o.nodes,h,o.hooks.error.trigger))},I=y=>{const S=y instanceof Function?y(o.edges):y;if(!o.initialized&&!S.length)return;const U=o.isValidConnection?S.filter(x=>o.isValidConnection(x,{edges:o.edges,nodes:o.nodes,sourceNode:h(x.source),targetNode:h(x.target)})):S;o.edges=U.reduce((x,R)=>{const ee=h(R.source),Q=h(R.target),se=!ee||typeof ee>"u",re=!Q||typeof Q>"u";if(se&&re?o.hooks.error.trigger(new Ce(Ne.EDGE_SOURCE_TARGET_MISSING,R.id,R.source,R.target)):(se&&o.hooks.error.trigger(new Ce(Ne.EDGE_SOURCE_MISSING,R.id,R.source)),re&&o.hooks.error.trigger(new Ce(Ne.EDGE_TARGET_MISSING,R.id,R.target))),se||re)return x;const ge=m(R.id);return x.push({...ma(R,Object.assign({},ge,o.defaultEdgeOptions)),sourceNode:ee,targetNode:Q}),x},[])},C=y=>{const S=y instanceof Function?y([...o.nodes,...o.edges]):y;!o.initialized&&!S.length||(g(S.filter(lt)),I(S.filter(je)))},A=y=>{let S=y instanceof Function?y(o.nodes):y;S=Array.isArray(S)?S:[S];const x=fi(S,o.nodes,h,o.hooks.error.trigger).map(oi);x.length&&o.hooks.nodesChange.trigger(x)},G=y=>{let S=y instanceof Function?y(o.edges):y;S=Array.isArray(S)?S:[S];const x=(o.isValidConnection?S.filter(R=>o.isValidConnection(R,{edges:o.edges,nodes:o.nodes,sourceNode:h(R.source),targetNode:h(R.target)})):S).reduce((R,ee)=>{const Q=pc({...ee,...o.defaultEdgeOptions},o.edges,o.hooks.error.trigger);if(Q){const se=h(Q.source),re=h(Q.target);R.push(oi({...Q,sourceNode:se,targetNode:re}))}return R},[]);x.length&&o.hooks.edgesChange.trigger(x)},Y=(y,S=!0,U=!1)=>{let x=y instanceof Function?y(o.nodes):y;x=Array.isArray(x)?x:[x];const R=[],ee=[];function Q(re){const ge=f(re).filter(Me=>me(Me.deletable)?Me.deletable:!0);ee.push(...ge.map(Me=>ai(Me.id,Me.source,Me.target)))}function se(re){const ge=o.nodes.filter(Me=>Me.parentNode===re);if(ge.length){const Me=ge.map(et=>et.id);R.push(...Me.map(et=>ii(et))),S&&Q(ge),ge.forEach(et=>{se(et.id)})}}x.forEach(re=>{const ge=typeof re=="string"?h(re):re;ge&&(me(ge.deletable)&&!ge.deletable||(R.push(ii(ge.id)),S&&Q([ge]),U&&se(ge.id)))}),ee.length&&o.hooks.edgesChange.trigger(ee),R.length&&o.hooks.nodesChange.trigger(R)},L=y=>{let S=y instanceof Function?y(o.edges):y;S=Array.isArray(S)?S:[S];const U=[];S.forEach(x=>{const R=typeof x=="string"?m(x):x;R&&(me(R.deletable)&&!R.deletable||U.push(ai(typeof x=="string"?x:x.id,R.source,R.target)))}),o.hooks.edgesChange.trigger(U)},M=(y,S,U=!0)=>mc(y,S,o.edges,m,U,o.hooks.error.trigger),O=y=>ni(y,o.nodes),$=y=>ni(y,o.edges),B=(y,S,U,x=!1)=>{x?o.connectionClickStartHandle=y:o.connectionStartHandle=y,o.connectionEndHandle=null,o.connectionStatus=null,S&&(o.connectionPosition=S)},T=(y,S=null,U=null)=>{o.connectionStartHandle&&(o.connectionPosition=y,o.connectionEndHandle=S,o.connectionStatus=U)},N=(y,S)=>{o.connectionPosition={x:NaN,y:NaN},o.connectionEndHandle=null,o.connectionStatus=null,S?o.connectionClickStartHandle=null:o.connectionStartHandle=null},D=y=>{const S=Ju(y),U=S?null:ot(y)?y:h(y.id);return!S&&!U?[null,null,S]:[S?y:Qo(U),U,S]},V=(y,S=!0,U=o.nodes)=>{const[x,R,ee]=D(y);return x?(U||o.nodes).filter(Q=>{if(!ee&&(Q.id===R.id||!Q.computedPosition))return!1;const se=Qo(Q),re=no(se,x);return S&&re>0||re>=Number(x.width)*Number(x.height)}):[]},Z=(y,S,U=!0)=>{const[x]=D(y);if(!x)return!1;const R=no(x,S);return U&&R>0||R>=Number(x.width)*Number(x.height)},oe=y=>{const{viewport:S,dimensions:U,d3Zoom:x,d3Selection:R,translateExtent:ee}=o;if(!x||!R||!y.x&&!y.y)return!1;const Q=Pt.translate(S.x+y.x,S.y+y.y).scale(S.zoom),se=[[0,0],[U.width,U.height]],re=x.constrain()(Q,se,ee),ge=o.viewport.x!==re.x||o.viewport.y!==re.y||o.viewport.zoom!==re.k;return x.transform(R,re),ge},W=y=>{const S=y instanceof Function?y(o):y,U=["modelValue","nodes","edges","maxZoom","minZoom","translateExtent","nodeExtent","hooks","defaultEdgeOptions"],x=["d3Zoom","d3Selection","d3ZoomHandler","viewportRef","vueFlowRef","dimensions","hooks"];me(S.defaultEdgeOptions)&&(o.defaultEdgeOptions=S.defaultEdgeOptions);const R=S.modelValue||S.nodes||S.edges?[]:void 0;R&&(S.modelValue&&R.push(...S.modelValue),S.nodes&&R.push(...S.nodes),S.edges&&R.push(...S.edges),C(R));const ee=()=>{me(S.maxZoom)&&z(S.maxZoom),me(S.minZoom)&&J(S.minZoom),me(S.translateExtent)&&X(S.translateExtent),me(S.nodeExtent)&&ue(S.nodeExtent)};Object.keys(S).forEach(Q=>{const se=Q,re=S[se];![...U,...x].includes(se)&&me(re)&&(o[se]=re)}),Qe(()=>o.d3Zoom).not.toBeNull().then(ee),o.initialized||(o.initialized=!0)},he={updateNodePositions:P,updateNodeDimensions:E,setElements:C,setNodes:g,setEdges:I,addNodes:A,addEdges:G,removeNodes:Y,removeEdges:L,findNode:h,findEdge:m,updateEdge:M,applyEdgeChanges:$,applyNodeChanges:O,addSelectedElements:k,addSelectedNodes:_,addSelectedEdges:b,setMinZoom:J,setMaxZoom:z,setTranslateExtent:X,setNodeExtent:ue,removeSelectedElements:q,removeSelectedNodes:H,removeSelectedEdges:p,startConnection:B,updateConnection:T,endConnection:N,setInteractive:ne,setState:W,getIntersectingNodes:V,getIncomers:s,getOutgoers:c,getConnectedEdges:f,isNodeIntersecting:Z,panBy:oe,fitView:y=>l.value.fitView(y),zoomIn:y=>l.value.zoomIn(y),zoomOut:y=>l.value.zoomOut(y),zoomTo:(y,S)=>l.value.zoomTo(y,S),setViewport:(y,S)=>l.value.setViewport(y,S),setTransform:(y,S)=>l.value.setTransform(y,S),getViewport:()=>l.value.getViewport(),getTransform:()=>l.value.getTransform(),setCenter:(y,S,U)=>l.value.setCenter(y,S,U),fitBounds:(y,S)=>l.value.fitBounds(y,S),project:y=>l.value.project(y),toObject:()=>JSON.parse(JSON.stringify({nodes:o.nodes.map(y=>{const{computedPosition:S,handleBounds:U,selected:x,dimensions:R,isParent:ee,resizing:Q,dragging:se,initialized:re,...ge}=y;return ge}),edges:o.edges.map(y=>{const{selected:S,sourceNode:U,targetNode:x,...R}=y;return R}),position:[o.viewport.x,o.viewport.y],zoom:o.viewport.zoom,viewport:o.viewport})),fromObject:y=>new Promise(S=>{const{nodes:U,edges:x,position:R,zoom:ee,viewport:Q}=y;if(U&&g(U),x&&I(x),Q!=null&&Q.x&&(Q!=null&&Q.y)||R){const se=(Q==null?void 0:Q.x)||R[0],re=(Q==null?void 0:Q.y)||R[1],ge=(Q==null?void 0:Q.zoom)||ee||o.viewport.zoom;return Qe(()=>l.value.initialized).toBe(!0).then(()=>{l.value.setViewport({x:se,y:re,zoom:ge}).then(()=>{S(!0)})})}else S(!0)}),updateNodeInternals:u,$reset:()=>{const y=Ba();if(o.edges=[],o.nodes=[],o.d3Zoom&&o.d3Selection){const S=Pt.translate(y.defaultViewport.x??0,y.defaultViewport.y??0).scale(ht(y.defaultViewport.zoom??1,y.minZoom,y.maxZoom)),U=o.viewportRef.getBoundingClientRect(),x=[[0,0],[U.width,U.height]],R=o.d3Zoom.constrain()(S,x,y.translateExtent);o.d3Zoom.transform(o.d3Selection,R)}W(y)},$destroy:()=>{}};return Qe(()=>l.value.initialized).toBe(!0,{flush:"pre"}).then(()=>{o.fitViewOnInit&&l.value.fitView(),o.hooks.paneReady.trigger({id:e,emits:t,vueFlowVersion:"1.27.1",...n,...o,...i,...he})}),he}function fd(e,t,n){const o=fe(()=>d=>e.nodes&&!t.value.length?e.nodes.find(w=>w.id===d):e.nodes[t.value.indexOf(d)]),i=fe(()=>d=>e.edges&&!n.value.length?e.edges.find(w=>w.id===d):e.edges[n.value.indexOf(d)]),a=fe(()=>{var d;const w={...ud,...e.edgeTypes},v=Object.keys(w);return(d=e.edges)==null||d.forEach(_=>_.type&&!v.includes(_.type)&&(w[_.type]=_.type)),w}),r=fe(()=>{var d;const w={...sd,...e.nodeTypes},v=Object.keys(w);return(d=e.nodes)==null||d.forEach(_=>_.type&&!v.includes(_.type)&&(w[_.type]=_.type)),w}),l=fe(()=>{const d=e.nodes.filter(w=>!w.hidden);return e.onlyRenderVisibleElements?d&&Ea(d,{x:0,y:0,width:e.dimensions.width,height:e.dimensions.height},e.viewport,!0):d??[]}),u=(d,w,v)=>{if(w=w??o.value(d.source),v=v??o.value(d.target),!w||!v){e.hooks.error.trigger(new Ce(Ne.EDGE_ORPHANED,d.id));return}return!d.hidden&&!v.hidden&&!w.hidden},s=fe(()=>e.onlyRenderVisibleElements?e.edges.filter(d=>{const w=o.value(d.source),v=o.value(d.target);return u(d,w,v)&&cc({sourcePos:w.computedPosition||{x:0,y:0},targetPos:v.computedPosition||{x:0,y:0},sourceWidth:w.dimensions.width,sourceHeight:w.dimensions.height,targetWidth:v.dimensions.width,targetHeight:v.dimensions.height,width:e.dimensions.width,height:e.dimensions.height,viewport:e.viewport})}):e.edges.filter(d=>u(d))),c=fe(()=>[...l.value,...s.value]),f=fe(()=>e.nodes.filter(d=>d.selected)),h=fe(()=>e.edges.filter(d=>d.selected)),m=fe(()=>[...f.value??[],...h.value??[]]),P=fe(()=>l.value.filter(d=>d.initialized&&d.handleBounds!==void 0)),E=fe(()=>l.value.length>0&&P.value.length===l.value.length);return{getNode:o,getEdge:i,getElements:c,getEdgeTypes:a,getNodeTypes:r,getEdges:s,getNodes:l,getSelectedElements:m,getSelectedNodes:f,getSelectedEdges:h,getNodesInitialized:P,areNodesInitialized:E}}class pt{constructor(){this.currentId=0,this.flows=new Map}static getInstance(){return pt.instance||(pt.instance=new pt),pt.instance}set(t,n){return this.flows.set(t,n)}get(t){return this.flows.get(t)}remove(t){return this.flows.delete(t)}create(t,n){const o=Ba(n),i=co(o),a={};Object.entries(i.hooks).forEach(([h,m])=>{const P=`on${h.charAt(0).toUpperCase()+h.slice(1)}`;a[P]=m.on});const r={};Object.entries(i.hooks).forEach(([h,m])=>{r[h]=m.trigger});const l=fe(()=>i.nodes.map(h=>h.id)),u=fe(()=>i.edges.map(h=>h.id)),s=fd(i,l,u),c=dd(t,r,a,i,s,l,u);c.setState(i);const f={...a,...s,...c,...dr(i),emits:r,id:t,vueFlowVersion:"1.27.1",$destroy:()=>{this.remove(t)}};return this.set(t,f),f}getId(){return`vue-flow-${this.currentId++}`}}function xe(e){const t=pt.getInstance(),n=$i(),o=e==null?void 0:e.id,i=(n==null?void 0:n.vueFlowId)||o;let a;if(n){const r=bt(hi,null);typeof r<"u"&&r!==null&&(a=r)}if(a||i&&(a=t.get(i)),!a||a&&o&&o!==a.id){const r=o??t.getId(),l=t.create(r,e);a=l,ki().run(()=>{we(l.applyDefault,(u,s,c)=>{const f=m=>{l.applyNodeChanges(m)},h=m=>{l.applyEdgeChanges(m)};u?(l.onNodesChange(f),l.onEdgesChange(h)):(l.hooks.value.nodesChange.off(f),l.hooks.value.edgesChange.off(h)),c(()=>{l.hooks.value.nodesChange.off(f),l.hooks.value.edgesChange.off(h)})},{immediate:!0}),Xt(()=>{if(a){const u=t.get(a.id);u?u.$destroy():En(`No store instance found for id ${a.id} in storage.`)}})})}else e&&a.setState(e);return n&&(_t(hi,a),n.vueFlowId=a.id),a}function hd(){return{doubleClick:K(),click:K(),mouseEnter:K(),mouseMove:K(),mouseLeave:K(),contextMenu:K(),updateStart:K(),update:K(),updateEnd:K()}}function gd(e,t){const n=hd();return n.doubleClick.on(o=>{var i,a;t.edgeDoubleClick(o),(a=(i=e.events)==null?void 0:i.doubleClick)==null||a.call(i,o)}),n.click.on(o=>{var i,a;t.edgeClick(o),(a=(i=e.events)==null?void 0:i.click)==null||a.call(i,o)}),n.mouseEnter.on(o=>{var i,a;t.edgeMouseEnter(o),(a=(i=e.events)==null?void 0:i.mouseEnter)==null||a.call(i,o)}),n.mouseMove.on(o=>{var i,a;t.edgeMouseMove(o),(a=(i=e.events)==null?void 0:i.mouseMove)==null||a.call(i,o)}),n.mouseLeave.on(o=>{var i,a;t.edgeMouseLeave(o),(a=(i=e.events)==null?void 0:i.mouseLeave)==null||a.call(i,o)}),n.contextMenu.on(o=>{var i,a;t.edgeContextMenu(o),(a=(i=e.events)==null?void 0:i.contextMenu)==null||a.call(i,o)}),n.updateStart.on(o=>{var i,a;t.edgeUpdateStart(o),(a=(i=e.events)==null?void 0:i.updateStart)==null||a.call(i,o)}),n.update.on(o=>{var i,a;t.edgeUpdate(o),(a=(i=e.events)==null?void 0:i.update)==null||a.call(i,o)}),n.updateEnd.on(o=>{var i,a;t.edgeUpdateEnd(o),(a=(i=e.events)==null?void 0:i.updateEnd)==null||a.call(i,o)}),Object.entries(n).reduce((o,[i,a])=>(o.emit[i]=a.trigger,o.on[i]=a.on,o),{emit:{},on:{}})}function vd(){const{viewport:e,snapGrid:t,snapToGrid:n}=xe();return({sourceEvent:o})=>{const i=o.touches?o.touches[0].clientX:o.clientX,a=o.touches?o.touches[0].clientY:o.clientY,r={x:(i-e.value.x)/e.value.zoom,y:(a-e.value.y)/e.value.zoom};return{xSnapped:n.value?t.value[0]*Math.round(r.x/t.value[0]):r.x,ySnapped:n.value?t.value[1]*Math.round(r.y/t.value[1]):r.y,...r}}}function jt(){return!0}function za({handleId:e,nodeId:t,type:n,isValidConnection:o,edgeUpdaterType:i,onEdgeUpdate:a,onEdgeUpdateEnd:r}){const{vueFlowRef:l,connectionMode:u,connectionRadius:s,connectOnClick:c,connectionClickStartHandle:f,nodesConnectable:h,autoPanOnConnect:m,findNode:P,panBy:E,getNodes:d,startConnection:w,updateConnection:v,endConnection:_,emits:b,viewport:k,edges:H,nodes:p,isValidConnection:q}=xe();let J=null,z=!1,X=null;function ue(g){var I;const C=de(n)==="target",A=Co(g),G=jo(g.target);if(A&&g.button===0||!A){let Y=function(he){W=st(he,Z);const{handle:y,validHandleResult:S}=fc(he,G,oo(W,k.value,!1,[1,1]),s.value,le,U=>ci(he,U,u.value,de(t),de(e),C?"target":"source",O,G,H.value,p.value,P));if($=y,j||(ce(),j=!0),J=S.connection,z=S.isValid,X=S.handleDomNode,v($&&z?ba({x:$.x,y:$.y},k.value):W,S.endHandle,gc(!!$,z)),!$&&!z&&!X)return zn(oe);J&&J.source!==J.target&&X&&(zn(oe),oe=X,X.classList.add("connecting","vue-flow__handle-connecting"),X.classList.toggle("valid",z),X.classList.toggle("vue-flow__handle-valid",z))},L=function(he){($||X)&&J&&z&&(a?a(he,J):b.connect(J)),b.connectEnd(he),i&&(r==null||r(he)),zn(oe),cancelAnimationFrame(B),_(he),j=!1,z=!1,J=null,X=null,G.removeEventListener("mousemove",Y),G.removeEventListener("mouseup",L),G.removeEventListener("touchmove",Y),G.removeEventListener("touchend",L)};const M=P(de(t));let O=de(o)||q.value||jt;!O&&M&&(O=(C?M.isValidSourcePos:M.isValidTargetPos)||jt);let $,B=0;const{x:T,y:N}=st(g),D=G==null?void 0:G.elementFromPoint(T,N),V=Po(de(i),D),Z=(I=l.value)==null?void 0:I.getBoundingClientRect();if(!Z||!V)return;let oe,W=st(g,Z),j=!1;const le=hc({nodes:d.value,nodeId:de(t),handleId:de(e),handleType:V}),ce=()=>{if(!m)return;const[he,y]=Sa(W,Z);E({x:he,y}),B=requestAnimationFrame(ce)};w({nodeId:de(t),handleId:de(e),type:V},{x:T-Z.left,y:N-Z.top},g),b.connectStart({event:g,nodeId:de(t),handleId:de(e),handleType:V}),G.addEventListener("mousemove",Y),G.addEventListener("mouseup",L),G.addEventListener("touchmove",Y),G.addEventListener("touchend",L)}}function ne(g){if(!c.value)return;const I=de(n)==="target";if(!f.value)b.clickConnectStart({event:g,nodeId:de(t),handleId:de(e)}),w({nodeId:de(t),type:de(n),handleId:de(e)},void 0,g,!0);else{let C=de(o)||q.value||jt;const A=P(de(t));if(!C&&A&&(C=(I?A.isValidSourcePos:A.isValidTargetPos)||jt),A&&(typeof A.connectable>"u"?h.value:A.connectable)===!1)return;const G=jo(g.target),{connection:Y,isValid:L}=ci(g,{nodeId:de(t),id:de(e),type:de(n)},u.value,f.value.nodeId,f.value.handleId||null,f.value.type,C,G,H.value,p.value,P),M=Y.source===Y.target;L&&!M&&b.connect(Y),b.clickConnectEnd(g),_(g,!0)}}return{handlePointerDown:ue,handleClick:ne}}function ko(){return typeof window<"u"?window:{chrome:!1,addEventListener(...e){}}}function lo(e){var t,n;const o=((n=(t=e.composedPath)==null?void 0:t.call(e))==null?void 0:n[0])||e.target,i=typeof o.hasAttribute=="function"?o.hasAttribute("contenteditable"):!1,a=typeof o.closest=="function"?o.closest(".nokey"):null;return o instanceof HTMLInputElement||o instanceof HTMLTextAreaElement||o instanceof HTMLSelectElement||i||!!a}function pd(e){return e.ctrlKey||e.metaKey||e.shiftKey}function wi(e,t,n,o){const i=t.split("+").map(a=>a.trim().toLowerCase());return i.length===1?e.toLowerCase()===t.toLowerCase():(o?n.delete(e.toLowerCase()):n.add(e.toLowerCase()),i.every((a,r)=>n.has(a)&&Array.from(n.values())[r]===i[r]))}function md(e,t){return n=>{const o=yd(n.code,e);return Array.isArray(e)?e.some(i=>wi(n[o],i,t,n.type==="keyup")):wi(n[o],e,t,n.type==="keyup")}}function yd(e,t){return typeof t=="string"?e===t?"code":"key":t.includes(e)?"code":"key"}function Tt(e,t){const n=ko(),o=ae(de(e)===!0);let i=!1;const a=new Set;let r=u(de(e));return we(o,(s,c)=>{s!==c&&(t==null||t(s))}),we(()=>de(e),(s,c)=>{typeof c=="boolean"&&typeof s!="boolean"&&l(),r=u(s)},{immediate:!0}),vo(n,"blur",()=>{de(e)!==!0&&(o.value=!1)}),Ro((...s)=>r(...s),s=>{i=pd(s),!(!i&&lo(s))&&(s.preventDefault(),o.value=!0)},{eventName:"keydown"}),Ro((...s)=>r(...s),s=>{if(o.value){if(!i&&lo(s))return;l()}},{eventName:"keyup"}),o;function l(){i=!1,a.clear(),o.value=!1}function u(s){return s===null?(l(),()=>!1):typeof s=="boolean"?s?(o.value=s,()=>!0):(l(),()=>!1):Array.isArray(s)||typeof s=="string"?md(s,a):s}}function wd(e){const t=e??bt(Ma,""),n=bt(ka,ae(null)),{findNode:o,edges:i,emits:a}=xe(),r=o(t);return r||a.error(new Ce(Ne.NODE_NOT_FOUND,t)),{id:t,nodeEl:n,node:r,parentNode:fe(()=>o(r.parentNode)),connectedEdges:fe(()=>So([r],i.value))}}function bd(){return{doubleClick:K(),click:K(),mouseEnter:K(),mouseMove:K(),mouseLeave:K(),contextMenu:K(),dragStart:K(),drag:K(),dragStop:K()}}function _d(e,t){const n=bd();return n.doubleClick.on(o=>{var i,a;t.nodeDoubleClick(o),(a=(i=e.events)==null?void 0:i.doubleClick)==null||a.call(i,o)}),n.click.on(o=>{var i,a;t.nodeClick(o),(a=(i=e.events)==null?void 0:i.click)==null||a.call(i,o)}),n.mouseEnter.on(o=>{var i,a;t.nodeMouseEnter(o),(a=(i=e.events)==null?void 0:i.mouseEnter)==null||a.call(i,o)}),n.mouseMove.on(o=>{var i,a;t.nodeMouseMove(o),(a=(i=e.events)==null?void 0:i.mouseMove)==null||a.call(i,o)}),n.mouseLeave.on(o=>{var i,a;t.nodeMouseLeave(o),(a=(i=e.events)==null?void 0:i.mouseLeave)==null||a.call(i,o)}),n.contextMenu.on(o=>{var i,a;t.nodeContextMenu(o),(a=(i=e.events)==null?void 0:i.contextMenu)==null||a.call(i,o)}),n.dragStart.on(o=>{var i,a;t.nodeDragStart(o),(a=(i=e.events)==null?void 0:i.dragStart)==null||a.call(i,o)}),n.drag.on(o=>{var i,a;t.nodeDrag(o),(a=(i=e.events)==null?void 0:i.drag)==null||a.call(i,o)}),n.dragStop.on(o=>{var i,a;t.nodeDragStop(o),(a=(i=e.events)==null?void 0:i.dragStop)==null||a.call(i,o)}),Object.entries(n).reduce((o,[i,a])=>(o.emit[i]=a.trigger,o.on[i]=a.on,o),{emit:{},on:{}})}function Aa(){const{getSelectedNodes:e,nodeExtent:t,updateNodePositions:n,findNode:o,snapGrid:i,snapToGrid:a,nodesDraggable:r,emits:l}=xe();return(u,s=!1)=>{const c=a.value?i.value[0]:5,f=a.value?i.value[1]:5,h=s?4:1,m=u.x*c*h,P=u.y*f*h,E=e.value.filter(d=>d.draggable||r&&typeof d.draggable>"u").map(d=>{const w={x:d.computedPosition.x+m,y:d.computedPosition.y+P},{computedPosition:v}=No(d,w,l.error,t.value,d.parentNode?o(d.parentNode):void 0);return{id:d.id,position:v,from:d.position,distance:{x:u.x,y:u.y},dimensions:d.dimensions}});n(E,!0,!1)}}const An=.1;function qe(){return En("Viewport not initialized yet."),Promise.resolve(!1)}const Ed={zoomIn:qe,zoomOut:qe,zoomTo:qe,fitView:qe,setCenter:qe,fitBounds:qe,project:e=>e,screenToFlowCoordinate:e=>e,flowToScreenCoordinate:e=>e,setViewport:qe,setTransform:qe,getViewport:()=>({x:0,y:0,zoom:1}),getTransform:()=>({x:0,y:0,zoom:1}),initialized:!1};function xd(e,t){const n=e,o=be(n,"vueFlowRef"),i=be(n,"nodes"),a=be(n,"d3Zoom"),r=be(n,"d3Selection"),l=be(n,"dimensions"),u=be(n,"translateExtent"),s=be(n,"minZoom"),c=be(n,"maxZoom"),f=be(n,"viewport"),h=be(n,"snapToGrid"),m=be(n,"snapGrid"),{getNodes:P}=t,E=ae(!1);Qe(()=>!!a.value&&!!r.value&&!!l.value.width&&!!l.value.height).toBe(!0).then(()=>{E.value=!0});function d(v,_){return new Promise(b=>{r.value&&a.value?a.value.scaleBy(Tn(r.value,_,()=>{b(!0)}),v):b(!1)})}function w(v,_,b,k){return new Promise(H=>{const{x:p,y:q}=pa({x:-v,y:-_},u.value),J=Pt.translate(-p,-q).scale(b);r.value&&a.value?a.value.transform(Tn(r.value,k,()=>{H(!0)}),J):H(!1)})}return fe(()=>E.value?{initialized:!0,zoomIn:v=>d(1.2,v==null?void 0:v.duration),zoomOut:v=>d(1/1.2,v==null?void 0:v.duration),zoomTo:(v,_)=>new Promise(b=>{r.value&&a.value?a.value.scaleTo(Tn(r.value,_==null?void 0:_.duration,()=>{b(!0)}),v):b(!1)}),setViewport:(v,_)=>w(v.x,v.y,v.zoom,_==null?void 0:_.duration),setTransform:(v,_)=>w(v.x,v.y,v.zoom,_==null?void 0:_.duration),getViewport:()=>({x:f.value.x,y:f.value.y,zoom:f.value.zoom}),getTransform:()=>({x:f.value.x,y:f.value.y,zoom:f.value.zoom}),fitView:(v={padding:An,includeHiddenNodes:!1,duration:0})=>{const _=(v.includeHiddenNodes?i.value:P.value).filter(q=>{var J;const z=q.initialized&&q.dimensions.width&&q.dimensions.height;let X=!0;return(J=v.nodes)!=null&&J.length&&(X=v.nodes.includes(q.id)),z&&X});if(!_.length)return Promise.resolve(!1);const b=xo(_),{x:k,y:H,zoom:p}=ei(b,l.value.width,l.value.height,v.minZoom??s.value,v.maxZoom??c.value,v.padding??An,v.offset);return w(k,H,p,v==null?void 0:v.duration)},setCenter:(v,_,b)=>{const k=typeof(b==null?void 0:b.zoom)<"u"?b.zoom:c.value,H=l.value.width/2-v*k,p=l.value.height/2-_*k;return w(H,p,k,b==null?void 0:b.duration)},fitBounds:(v,_={padding:An})=>{const{x:b,y:k,zoom:H}=ei(v,l.value.width,l.value.height,s.value,c.value,_.padding);return w(b,k,H,_==null?void 0:_.duration)},project:v=>oo(v,f.value,h.value,m.value),screenToFlowCoordinate:v=>{if(o.value){const{x:_,y:b}=o.value.getBoundingClientRect(),k={x:v.x-_,y:v.y-b};return oo(k,f.value,h.value,m.value)}return{x:0,y:0}},flowToScreenCoordinate:v=>{if(o.value){const{x:_,y:b}=o.value.getBoundingClientRect(),k={x:v.x+_,y:v.y+b};return ba(k,f.value)}return{x:0,y:0}}}:Ed)}function Tn(e,t=0,n){return e.transition().duration(t).on("end",n)}function Sd(e,t,n){const o=ki(!0);return o.run(()=>{const i=()=>{o.run(()=>{let E,d,w=!!(n.nodes.value.length||n.edges.value.length);E=gt([e.modelValue,()=>{var v,_;return(_=(v=e.modelValue)==null?void 0:v.value)==null?void 0:_.length}],([v])=>{v&&Array.isArray(v)&&(d==null||d.pause(),n.setElements(v),!d&&!w&&v.length?w=!0:d==null||d.resume())}),d=gt([n.nodes,n.edges,()=>n.edges.value.length,()=>n.nodes.value.length],([v,_])=>{var b;(b=e.modelValue)!=null&&b.value&&Array.isArray(e.modelValue.value)&&(E==null||E.pause(),e.modelValue.value=[...v,..._],Ye(()=>{E==null||E.resume()}))},{immediate:w}),nn(()=>{E==null||E.stop(),d==null||d.stop()})})},a=()=>{o.run(()=>{let E,d,w=!!n.nodes.value.length;E=gt([e.nodes,()=>{var v,_;return(_=(v=e.nodes)==null?void 0:v.value)==null?void 0:_.length}],([v])=>{v&&Array.isArray(v)&&(d==null||d.pause(),n.setNodes(v),!d&&!w&&v.length?w=!0:d==null||d.resume())}),d=gt([n.nodes,()=>n.nodes.value.length],([v])=>{var _;(_=e.nodes)!=null&&_.value&&Array.isArray(e.nodes.value)&&(E==null||E.pause(),e.nodes.value=[...v],Ye(()=>{E==null||E.resume()}))},{immediate:w}),nn(()=>{E==null||E.stop(),d==null||d.stop()})})},r=()=>{o.run(()=>{let E,d,w=!!n.edges.value.length;E=gt([e.edges,()=>{var v,_;return(_=(v=e.edges)==null?void 0:v.value)==null?void 0:_.length}],([v])=>{v&&Array.isArray(v)&&(d==null||d.pause(),n.setEdges(v),!d&&!w&&v.length?w=!0:d==null||d.resume())}),d=gt([n.edges,()=>n.edges.value.length],([v])=>{var _;(_=e.edges)!=null&&_.value&&Array.isArray(e.edges.value)&&(E==null||E.pause(),e.edges.value=[...v],Ye(()=>{E==null||E.resume()}))},{immediate:w}),nn(()=>{E==null||E.stop(),d==null||d.stop()})})},l=()=>{o.run(()=>{we(()=>t.maxZoom,()=>{t.maxZoom&&me(t.maxZoom)&&n.setMaxZoom(t.maxZoom)},{immediate:!0})})},u=()=>{o.run(()=>{we(()=>t.minZoom,()=>{t.minZoom&&me(t.minZoom)&&n.setMinZoom(t.minZoom)},{immediate:!0})})},s=()=>{o.run(()=>{we(()=>t.translateExtent,()=>{t.translateExtent&&me(t.translateExtent)&&n.setTranslateExtent(t.translateExtent)},{immediate:!0})})},c=()=>{o.run(()=>{we(()=>t.nodeExtent,()=>{t.nodeExtent&&me(t.nodeExtent)&&n.setNodeExtent(t.nodeExtent)},{immediate:!0})})},f=()=>{o.run(()=>{we(()=>t.applyDefault,()=>{me(t.applyDefault)&&(n.applyDefault.value=t.applyDefault)},{immediate:!0})})},h=()=>{o.run(()=>{const E=async d=>{let w=d;typeof t.autoConnect=="function"&&(w=await t.autoConnect(d)),w!==!1&&n.addEdges([w])};we(()=>t.autoConnect,()=>{me(t.autoConnect)&&(n.autoConnect.value=t.autoConnect)},{immediate:!0}),we(n.autoConnect,(d,w,v)=>{d?n.onConnect(E):n.hooks.value.connect.off(E),v(()=>{n.hooks.value.connect.off(E)})},{immediate:!0})})},m=()=>{const E=["id","modelValue","translateExtent","nodeExtent","edges","nodes","maxZoom","minZoom","applyDefault","autoConnect"];Object.keys(t).forEach(d=>{const w=d;if(!E.includes(w)){const v=Re(()=>t[w]),_=n[w];fo(_)&&o.run(()=>{we(v,b=>{me(b)&&(_.value=b)},{immediate:!0,flush:"pre"})})}})};(()=>{i(),a(),r(),u(),l(),s(),c(),f(),h(),m()})()}),()=>o.stop()}function bi(e,t){return{x:e.clientX-t.left,y:e.clientY-t.top}}const Nd={name:"Pane",compatConfig:{MODE:3}},Cd=_e({...Nd,props:{isSelecting:{type:Boolean}},setup(e){const{id:t,vueFlowRef:n,getNodes:o,getEdges:i,viewport:a,emits:r,userSelectionActive:l,removeSelectedElements:u,panOnDrag:s,userSelectionRect:c,elementsSelectable:f,nodesSelectionActive:h,addSelectedElements:m,getSelectedEdges:P,getSelectedNodes:E,removeNodes:d,removeEdges:w,selectionMode:v,deleteKeyCode:_,multiSelectionKeyCode:b,multiSelectionActive:k}=xe(),H=ae(null),p=ae(0),q=ae(0),J=ae(),z=Re(()=>f.value&&(e.isSelecting||l.value));Tt(_,L=>{if(!L)return;const M=o.value.reduce((O,$)=>((!$.selected&&$.parentNode&&O.find(B=>B.id===$.parentNode)||$.selected)&&O.push($),O),[]);(M||P.value)&&(P.value.length>0&&w(P.value),M.length>0&&d(M),h.value=!1,u())}),Tt(b,L=>{k.value=L});function X(){l.value=!1,c.value=null,p.value=0,q.value=0}function ue(L){L.target!==H.value||z.value||(r.paneClick(L),u(),h.value=!1)}function ne(L){var M;if(L.target===H.value){if(Array.isArray(s.value)&&((M=s.value)!=null&&M.includes(2))){L.preventDefault();return}r.paneContextMenu(L)}}function g(L){L.target===H.value&&r.paneScroll(L)}function I(L){if(J.value=n.value.getBoundingClientRect(),!z.value||!f||!e.isSelecting||L.button!==0||L.target!==H.value||!J.value)return;const{x:M,y:O}=bi(L,J.value);u(),c.value={width:0,height:0,startX:M,startY:O,x:M,y:O},l.value=!0,r.selectionStart(L)}function C(L){if(!z.value)return r.paneMouseMove(L);if(!e.isSelecting||!J.value||!c.value)return;l.value||(l.value=!0),h.value&&(h.value=!1);const M=bi(L,J.value),O=c.value.startX??0,$=c.value.startY??0,B={...c.value,x:M.x<O?M.x:O,y:M.y<$?M.y:$,width:Math.abs(M.x-O),height:Math.abs(M.y-$)},T=Ea(o.value,c.value,a.value,v.value===Eo.Partial),N=So(T,i.value);p.value=T.length,q.value=N.length,c.value=B,m([...T,...N])}function A(L){z.value&&L.button===0&&(!l.value&&c.value&&L.target===H.value&&ue(L),h.value=p.value>0,X(),r.selectionEnd(L))}function G(L){var M;if(!z.value)return r.paneMouseLeave(L);l.value&&(h.value=p.value>0,(M=r.selectionEnd)==null||M.call(r,L)),X()}function Y(L){z.value||r.paneMouseEnter(L)}return(L,M)=>(ve(),ye("div",{ref_key:"container",ref:H,key:`pane-${ie(t)}`,class:Et(["vue-flow__pane vue-flow__container",{selection:L.isSelecting}]),onClick:ue,onContextmenu:ne,onWheelPassive:g,onMouseenter:Y,onMousedown:I,onMousemove:C,onMouseup:A,onMouseleave:G},[ut(L.$slots,"default"),ie(l)&&ie(c)?(ve(),St(ad,{key:0,"user-selection-rect":ie(c)},null,8,["user-selection-rect"])):ze("",!0),ie(h)&&ie(E).length?(ve(),St(od,{key:1})):ze("",!0)],34))}}),Pd={class:"vue-flow__nodes vue-flow__container"},Md={name:"Nodes",compatConfig:{MODE:3}},kd=_e({...Md,setup(e){const t=bt(xn),{nodesDraggable:n,nodesFocusable:o,elementsSelectable:i,nodesConnectable:a,getNodes:r,getNodesInitialized:l,areNodesInitialized:u,getNodeTypes:s,updateNodeDimensions:c,emits:f}=xe(),h=ae(),m=pn();Qe(()=>u.value).toBe(!0).then(()=>{Ye(()=>{f.nodesInitialized(l.value)})}),Mt(()=>{h.value=new ResizeObserver(_=>{const b=_.map(k=>({id:k.target.getAttribute("data-id"),nodeElement:k.target,forceUpdate:!0}));Ye(()=>c(b))})}),Bi(()=>{var _;return(_=h.value)==null?void 0:_.disconnect()});function P(_){return typeof _>"u"?n.value:_}function E(_){return typeof _>"u"?i.value:_}function d(_){return typeof _>"u"?a.value:_}function w(_){return typeof _>"u"?o.value:_}function v(_,b){const k=_||"default",H=t==null?void 0:t[`node-${k}`];if(H)return H;let p=b??s.value[k];if(typeof p=="string"&&m){const q=Object.keys(m.appContext.components);q&&q.includes(k)&&(p=zi(k,!1))}return p&&typeof p!="string"?p:(f.error(new Ce(Ne.NODE_TYPE_MISSING,p)),!1)}return(_,b)=>(ve(),ye("div",Pd,[h.value?(ve(!0),ye(ct,{key:0},ho(ie(r),k=>(ve(),St(ie(Cc),{id:k.id,key:k.id,"resize-observer":h.value,type:v(k.type,k.template),name:k.type||"default",draggable:P(k.draggable),selectable:E(k.selectable),connectable:d(k.connectable),focusable:w(k.focusable),node:k},null,8,["id","resize-observer","type","name","draggable","selectable","connectable","focusable","node"]))),128)):ze("",!0)]))}}),Dd=["id","markerWidth","markerHeight","markerUnits","orient"],$d={name:"MarkerType",compatConfig:{MODE:3}},Id=_e({...$d,props:{id:{},type:{},color:{default:"none"},width:{default:12.5},height:{default:12.5},markerUnits:{default:"strokeWidth"},orient:{default:"auto-start-reverse"},strokeWidth:{default:1}},setup(e){return(t,n)=>(ve(),ye("marker",{id:t.id,class:"vue-flow__arrowhead",viewBox:"-10 -10 20 20",refX:"0",refY:"0",markerWidth:`${t.width}`,markerHeight:`${t.height}`,markerUnits:t.markerUnits,orient:t.orient},[t.type===ie(to).ArrowClosed?(ve(),ye("polyline",{key:0,style:Ze({stroke:t.color,fill:t.color,strokeWidth:t.strokeWidth}),"stroke-linecap":"round","stroke-linejoin":"round",points:"-5,-4 0,0 -5,4 -5,-4"},null,4)):ze("",!0),t.type===ie(to).Arrow?(ve(),ye("polyline",{key:1,style:Ze({stroke:t.color,strokeWidth:t.strokeWidth}),"stroke-linecap":"round","stroke-linejoin":"round",fill:"none",points:"-5,-4 0,0 -5,4"},null,4)):ze("",!0)],8,Dd))}}),Rd={name:"MarkerDefinitions",compatConfig:{MODE:3}},Ld=_e({...Rd,setup(e){const t=xe(),n=be(t,"id"),o=be(t,"edges"),i=be(t,"connectionLineOptions"),a=be(t,"defaultMarkerColor"),r=fe(()=>{const l=[],u=[],s=c=>{if(c){const f=it(c,n.value);l.includes(f)||(typeof c=="object"?u.push({...c,id:f,color:c.color||a.value}):u.push({id:f,color:a.value,type:c}),l.push(f))}};return[i.value.markerEnd,i.value.markerStart].forEach(s),o.value.reduce((c,f)=>([f.markerStart,f.markerEnd].forEach(s),c.sort((h,m)=>h.id.localeCompare(m.id))),u),u});return(l,u)=>(ve(),ye("defs",null,[(ve(!0),ye(ct,null,ho(r.value,s=>(ve(),St(Id,{id:s.id,key:s.id,type:s.type,color:s.color,width:s.width,height:s.height,markerUnits:s.markerUnits,"stroke-width":s.strokeWidth,orient:s.orient},null,8,["id","type","color","width","height","markerUnits","stroke-width","orient"]))),128))]))}}),Bd={class:"vue-flow__edges vue-flow__container"},zd={name:"Edges",compatConfig:{MODE:3}},Ad=_e({...zd,setup(e){const t=bt(xn),{edgesUpdatable:n,edgesFocusable:o,elementsSelectable:i,findNode:a,getEdges:r,getEdgeTypes:l,elevateEdgesOnSelect:u,dimensions:s,emits:c}=xe(),f=pn();function h(d){return typeof d>"u"?i.value:d}function m(d){return typeof d>"u"?n.value:d}function P(d){return typeof d>"u"?o.value:d}function E(d,w){const v=d||"default",_=t==null?void 0:t[`edge-${v}`];if(_)return _;let b=w??l.value[v];if(typeof b=="string"&&f){const k=Object.keys(f.appContext.components);k&&k.includes(v)&&(b=zi(v,!1))}return b&&typeof b!="string"?b:(c.error(new Ce(Ne.EDGE_TYPE_MISSING,b)),!1)}return(d,w)=>ie(s).width&&ie(s).height?(ve(),ye(ct,{key:0},[(ve(),ye("svg",Bd,[We(Ld)])),(ve(!0),ye(ct,null,ho(ie(r),v=>(ve(),ye("svg",{key:v.id,class:"vue-flow__edges vue-flow__container",style:Ze({zIndex:ie(dc)(v,ie(a),ie(u))})},[We(ie(Jc),{id:v.id,edge:v,type:E(v.type,v.template),name:v.type||"default",selectable:h(v.selectable),updatable:m(v.updatable),focusable:P(v.focusable)},null,8,["id","edge","type","name","selectable","updatable","focusable"])],4))),128)),We(ie(ed))],64)):ze("",!0)}}),Td=xt("div",{class:"vue-flow__edge-labels"},null,-1),Vd={name:"Transform",compatConfig:{MODE:3}},Hd=_e({...Vd,setup(e){const{id:t,viewport:n,d3Zoom:o,d3Selection:i,dimensions:a}=xe(),r=ae(!Ai);return Qe(()=>!!(o.value&&i.value&&a.value.width>0&&a.value.height>0)).toBe(!0).then(()=>{setTimeout(()=>{r.value=!0},1)}),(l,u)=>(ve(),ye("div",{key:`transform-${ie(t)}`,class:"vue-flow__transformationpane vue-flow__container",style:Ze({transform:`translate(${ie(n).x}px,${ie(n).y}px) scale(${ie(n).zoom})`,opacity:r.value?void 0:0})},[We(Ad),Td,We(kd),ut(l.$slots,"default")],4))}}),Gd={name:"Viewport",compatConfig:{MODE:3}},Od=_e({...Gd,setup(e){const t=ko(),{id:n,minZoom:o,maxZoom:i,defaultViewport:a,translateExtent:r,dimensions:l,zoomActivationKeyCode:u,selectionKeyCode:s,panActivationKeyCode:c,panOnScroll:f,panOnScrollMode:h,panOnScrollSpeed:m,panOnDrag:P,zoomOnDoubleClick:E,zoomOnPinch:d,zoomOnScroll:w,preventScrolling:v,noWheelClassName:_,noPanClassName:b,emits:k,connectionStartHandle:H,userSelectionActive:p,paneDragging:q,d3Zoom:J,d3Selection:z,d3ZoomHandler:X,viewport:ue,viewportRef:ne}=xe(),g=ae(!1),I=ae(!1);let C=null,A=!1,G=0,Y={x:0,y:0,zoom:0};const L=Tt(c),M=Tt(s),O=Tt(u),$=Re(()=>!M.value&&(L.value||P.value)),B=Re(()=>M.value||s.value===!0&&$.value!==!0);pr(ne,Z),vo(t,"resize",Z),Mt(()=>{if(!ne.value){En("Viewport element is missing");return}const W=ne.value,j=W.getBoundingClientRect(),le=Uu().scaleExtent([o.value,i.value]).translateExtent(r.value),ce=Le(W).call(le),he=ce.on("wheel.zoom"),y=Pt.translate(a.value.x??0,a.value.y??0).scale(ht(a.value.zoom??1,o.value,i.value)),S=[[0,0],[j.width,j.height]],U=le.constrain()(y,S,r.value);le.transform(ce,U),le.wheelDelta(N),J.value=le,z.value=ce,X.value=he,ue.value={x:U.x,y:U.y,zoom:U.k},le.on("start",x=>{var R;if(!x.sourceEvent)return null;G=x.sourceEvent.button,g.value=!0;const ee=V(x.transform);((R=x.sourceEvent)==null?void 0:R.type)==="mousedown"&&(q.value=!0),Y=ee,k.viewportChangeStart(ee),k.moveStart({event:x,flowTransform:ee})}),le.on("end",x=>{if(!x.sourceEvent)return null;if(g.value=!1,q.value=!1,T($.value,G??0)&&!A&&k.paneContextMenu(x.sourceEvent),A=!1,D(Y,x.transform)){const R=V(x.transform);Y=R,k.viewportChangeEnd(R),k.moveEnd({event:x,flowTransform:R})}}),le.filter(x=>{var R,ee;const Q=O.value||w.value,se=d.value&&x.ctrlKey;if(($.value===!0||Array.isArray($.value)&&$.value.includes(1))&&x.button===1&&x.type==="mousedown"&&((R=x.target)!=null&&R.closest(".vue-flow__node")||(ee=x.target)!=null&&ee.closest(".vue-flow__edge")))return!0;if(!$.value&&!Q&&!f.value&&!E.value&&!d.value||p.value||!E.value&&x.type==="dblclick"||oe(x,_.value)&&x.type==="wheel"||oe(x,b.value)&&(x.type!=="wheel"||f.value&&x.type==="wheel"&&!O.value)||!d.value&&x.ctrlKey&&x.type==="wheel"||!Q&&!f.value&&!se&&x.type==="wheel"||!$.value&&(x.type==="mousedown"||x.type==="touchstart")||Array.isArray($.value)&&!$.value.includes(x.button)&&(x.type==="mousedown"||x.type==="touchstart"))return!1;const re=Array.isArray($.value)&&$.value.includes(x.button)||!x.button||x.button<=1;return(!x.ctrlKey||x.type==="wheel")&&re}),Do(()=>{M.value&&p.value&&!g.value?le.on("zoom",null):!M.value&&!p.value&&le.on("zoom",x=>{ue.value={x:x.transform.x,y:x.transform.y,zoom:x.transform.k};const R=V(x.transform);A=T($.value,G??0),k.viewportChange(R),k.move({event:x,flowTransform:R})})}),Do(()=>{L.value||f.value&&!O.value&&!p.value?ce.on("wheel.zoom",x=>{if(oe(x,_.value))return!1;x.preventDefault(),x.stopImmediatePropagation();const R=ce.property("__zoom").k||1,ee=gn();if(x.ctrlKey&&d&&ee){const Me=Te(x),et=N(x),Ta=R*2**et;le.scaleTo(ce,Ta,Me,x);return}const Q=x.deltaMode===1?20:1;let se=h.value===At.Vertical?0:x.deltaX*Q,re=h.value===At.Horizontal?0:x.deltaY*Q;!ee&&x.shiftKey&&h.value!==At.Vertical&&!se&&re&&(se=re,re=0),le.translateBy(ce,-(se/R)*m.value,-(re/R)*m.value);const ge=V(ce.property("__zoom"));C&&clearTimeout(C),I.value?(k.move({event:x,flowTransform:ge}),k.viewportChange(ge),C=setTimeout(()=>{k.moveEnd({event:x,flowTransform:ge}),k.viewportChangeEnd(ge),I.value=!1},150)):(I.value=!0,k.moveStart({event:x,flowTransform:ge}),k.viewportChangeStart(ge))},{passive:!1}):typeof he<"u"&&ce.on("wheel.zoom",function(x,R){if(!v.value||oe(x,_.value))return null;x.preventDefault(),he.call(this,x,R)},{passive:!1})})});function T(W,j){return j===2&&Array.isArray(W)&&W.includes(2)}function N(W){const j=W.ctrlKey&&gn()?10:1;return-W.deltaY*(W.deltaMode===1?.05:W.deltaMode?1:.002)*j}function D(W,j){return W.x!==j.x&&!isNaN(j.x)||W.y!==j.y&&!isNaN(j.y)||W.zoom!==j.k&&!isNaN(j.k)}function V(W){return{x:W.x,y:W.y,zoom:W.k}}function Z(){if(!ne.value)return;const{width:W,height:j}=_n(ne.value);(W===0||j===0)&&k.error(new Ce(Ne.MISSING_VIEWPORT_DIMENSIONS)),l.value.width=W||500,l.value.height=j||500}function oe(W,j){return W.target.closest(`.${j}`)}return(W,j)=>(ve(),ye("div",{ref_key:"viewportRef",ref:ne,key:`viewport-${ie(n)}`,class:"vue-flow__viewport vue-flow__container"},[We(Cd,{"is-selecting":ie(B),class:Et({connecting:!!ie(H),dragging:ie(q),draggable:ie($)})},{default:Fn(()=>[We(Hd,null,{default:Fn(()=>[ut(W.$slots,"default")]),_:3})]),_:3},8,["is-selecting","class"])]))}}),Fd=["id"],Xd=["id"],Wd=["id"],Yd={name:"A11yDescriptions",compatConfig:{MODE:3}},Zd=_e({...Yd,setup(e){const{id:t,disableKeyboardA11y:n,ariaLiveMessage:o}=xe();return(i,a)=>(ve(),ye(ct,null,[xt("div",{id:`${ie(ha)}-${ie(t)}`,style:{display:"none"}}," Press enter or space to select a node. "+Xn(ie(n)?"":"You can then use the arrow keys to move the node around.")+" You can then use the arrow keys to move the node around, press delete to remove it and press escape to cancel. ",9,Fd),xt("div",{id:`${ie(ga)}-${ie(t)}`,style:{display:"none"}}," Press enter or space to select an edge. You can then press delete to remove it or press escape to cancel. ",8,Xd),ie(n)?ze("",!0):(ve(),ye("div",{key:0,id:`${ie(Ku)}-${ie(t)}`,"aria-live":"assertive","aria-atomic":"true",style:{position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)","clip-path":"inset(100%)"}},Xn(ie(o)),9,Wd))],64))}}),Ud={name:"VueFlow",compatConfig:{MODE:3}},wf=_e({...Ud,props:{id:{},modelValue:{},nodes:{},edges:{},edgeTypes:{},nodeTypes:{},connectionMode:{},connectionLineType:{},connectionLineStyle:{default:void 0},connectionLineOptions:{default:void 0},connectionRadius:{},isValidConnection:{type:[Function,null],default:void 0},deleteKeyCode:{default:void 0},selectionKeyCode:{default:void 0},multiSelectionKeyCode:{default:void 0},zoomActivationKeyCode:{default:void 0},panActivationKeyCode:{default:void 0},snapToGrid:{type:Boolean,default:void 0},snapGrid:{},onlyRenderVisibleElements:{type:Boolean,default:void 0},edgesUpdatable:{type:[Boolean,String],default:void 0},nodesDraggable:{type:Boolean,default:void 0},nodesConnectable:{type:Boolean,default:void 0},nodeDragThreshold:{},elementsSelectable:{type:Boolean,default:void 0},selectNodesOnDrag:{type:Boolean,default:void 0},panOnDrag:{type:[Boolean,Array],default:void 0},minZoom:{},maxZoom:{},defaultViewport:{},translateExtent:{},nodeExtent:{},defaultMarkerColor:{},zoomOnScroll:{type:Boolean,default:void 0},zoomOnPinch:{type:Boolean,default:void 0},panOnScroll:{type:Boolean,default:void 0},panOnScrollSpeed:{},panOnScrollMode:{},zoomOnDoubleClick:{type:Boolean,default:void 0},preventScrolling:{type:Boolean,default:void 0},selectionMode:{},edgeUpdaterRadius:{},fitViewOnInit:{type:Boolean,default:void 0},connectOnClick:{type:Boolean,default:void 0},applyDefault:{type:Boolean,default:void 0},autoConnect:{type:[Boolean,Function],default:void 0},noDragClassName:{},noWheelClassName:{},noPanClassName:{},defaultEdgeOptions:{},elevateEdgesOnSelect:{type:Boolean,default:void 0},elevateNodesOnSelect:{type:Boolean,default:void 0},disableKeyboardA11y:{type:Boolean,default:void 0},edgesFocusable:{type:Boolean,default:void 0},nodesFocusable:{type:Boolean,default:void 0},autoPanOnConnect:{type:Boolean,default:void 0},autoPanOnNodeDrag:{type:Boolean,default:void 0},__experimentalFeatures:{}},emits:["nodesChange","edgesChange","nodeDoubleClick","nodeClick","nodeMouseEnter","nodeMouseMove","nodeMouseLeave","nodeContextMenu","nodeDragStart","nodeDrag","nodeDragStop","nodesInitialized","miniMapNodeClick","miniMapNodeDoubleClick","miniMapNodeMouseEnter","miniMapNodeMouseMove","miniMapNodeMouseLeave","connect","connectStart","connectEnd","clickConnectStart","clickConnectEnd","moveStart","move","moveEnd","selectionDragStart","selectionDrag","selectionDragStop","selectionContextMenu","selectionStart","selectionEnd","viewportChangeStart","viewportChange","viewportChangeEnd","paneReady","paneScroll","paneClick","paneContextMenu","paneMouseEnter","paneMouseMove","paneMouseLeave","edgeContextMenu","edgeMouseEnter","edgeMouseMove","edgeMouseLeave","edgeDoubleClick","edgeClick","edgeUpdateStart","edgeUpdate","edgeUpdateEnd","updateNodeInternals","error","update:modelValue","update:nodes","update:edges"],setup(e,{expose:t,emit:n}){const o=e,i=Va(),a=zt(o,"modelValue",n),r=zt(o,"nodes",n),l=zt(o,"edges",n),{vueFlowRef:u,hooks:s,getNodeTypes:c,getEdgeTypes:f,...h}=xe(o),m=Sd({modelValue:a,nodes:r,edges:l},o,{vueFlowRef:u,hooks:s,getNodeTypes:c,getEdgeTypes:f,...h});return ld(n,s),_t(xn,i),Di(()=>{m()}),t({vueFlowRef:u,hooks:s,getNodeTypes:c,getEdgeTypes:f,...h}),(P,E)=>(ve(),ye("div",{ref_key:"vueFlowRef",ref:u,class:"vue-flow"},[We(Od,null,{default:Fn(()=>[ut(P.$slots,"zoom-pane")]),_:3}),ut(P.$slots,"default"),We(Zd)],512))}});var Kd=(e=>(e.SUCCESS="Success",e.FAILED="Failed",e.INFO="Info",e.LOG="LOG",e))(Kd||{}),so=(e=>(e.PROFILE_ID="PROFILE_ID",e.PROFILE_NAME="PROFILE_NAME",e))(so||{}),F=(e=>(e.START="Start",e.VARIABLES="Variables",e.NEW_TAB="NewTab",e.ACTIVATE_TAB="ActivateTab",e.OPEN_URL="OpenUrl",e.CLOSE_TAB="CloseTab",e.RELOAD="Reload",e.GOBACK="GoBack",e.CLICK="Click",e.PRESS_HOLD="PressHold",e.MOVE="Move",e.SCROLL="Scroll",e.PRESS="Press",e.TYPE_TEXT="TypeText",e.ELEMENT_EXISTS="ElementExists",e.GET_URL="GetUrl",e.GET_TEXT="GetText",e.GET_VALUE="GetValue",e.GET_ATTRIBUTE_VALUE="GetAttributeValue",e.SELECT_DROPDOWN="SelectDropdown",e.RANDOM="Random",e.FILE_UPLOAD="FileUpload",e.READ_FILE="ReadFile",e.WRITE_FILE="WriteFile",e.HTTP="HTTP",e.SET_VARIABLE="SetVariable",e.COMMENT="Comment",e.PAUSE="Pause",e.IF="If",e.EVAL="Eval",e.EVAL_V2="EvalV2",e.LOOP="Loop",e.LOOPV2="LoopV2",e.BREAK="Break",e.WHILE="While",e.STOP="Stop",e.EMULATE="Emulate",e.SWITCH_FRAME="SwitchFrame",e.SWITCH_PAGE="SwitchPage",e.SWITCH_PAGE_V2="SwitchPageV2",e.SWITCH_EXTENSION_POPUP_PAGE="SwitchExtensionPage",e.SWITCH_EXTENSION_POPUP_PAGE_V2="SwitchExtensionPageV2",e.CLIPBOARD="Clipboard",e.DIALOG="Dialog",e.SCREENSHOT="Screenshot",e.COOKIES="Cookies",e.SAVE_ASSETS="SaveAssets",e.SCRIPT="OtherScript",e.SPREADSHEET="Spreadsheet",e.IMAGE="Image",e.INSERT_DATA="InsertData",e.OPEN_AI="OpenAi",e.GEMINI="Gemini",e.GROK="Grok",e.CASE_PATH="CasePath",e.EXTENSION="Extension",e.RegEx="RegEx",e.IMAP="Imap",e.CMD="Cmd",e.UPDATE_TAG="UpdateTag",e.GET_TAG="GetTag",e.PROFILE_NOTE="ProfileNote",e.DISCONNECT="Disconnect",e.BYPASS="Bypass",e.LOG="Log",e.CONTEXT_MENU="ContextMenu",e.UPDATE_FIELD="UpdateField",e.TWO_FA="TwoFA",e))(F||{}),qd=(e=>(e.CURRENT="current",e.CUSTOM="custom",e))(qd||{}),Jd=(e=>(e.LEFT="left",e.RIGHT="right",e.CENTER="middle",e))(Jd||{}),Qd=(e=>(e.SELECTOR="selector",e.COORDINATES="coordinates",e))(Qd||{}),jd=(e=>(e.XPATH="xpath",e.CSS="css",e.TEXT="text",e))(jd||{}),ef=(e=>(e.FIXED="fixed",e.RANDOM="random",e))(ef||{}),tf=(e=>(e.SELECTOR="selector",e.COORDINATES="coordinates",e))(tf||{}),nf=(e=>(e.UP="Up",e.DOWN="Down",e))(nf||{}),of=(e=>(e.EMAIL="txt",e.PASSWORD="password",e.FULLNAME="fullname",e.FIRSTNAME="firstName",e.LASTNAME="lastName",e.PRODUCT="product",e.NUMBER="number",e))(of||{}),af=(e=>(e.TXT="txt",e.CSV="csv",e.JSON="json",e))(af||{}),rf=(e=>(e.LINE_BY_LINE="lineByLine",e.LINE_BY_LINE_DELIMITER="lineByLineDelimiter",e))(rf||{}),lf=(e=>(e.OVERWRITE="overwrite",e.APPEND="append",e))(lf||{}),sf=(e=>(e.SAME_LINE="sameline",e.NEW_LINE="newline",e))(sf||{}),uf=(e=>(e.JSON="application/json",e.TEXT="text/plain",e.FORM_URL_ENCODED="application/x-www-form-urlencoded",e.FORM_DATA="multipart/form-data",e))(uf||{}),cf=(e=>(e.GET="GET",e.POST="POST",e.PUT="PUT",e))(cf||{}),df=(e=>(e.FOR="For",e.WHILE="While",e.DATA="Data",e))(df||{});const bf=[{label:"New tab",action:F.NEW_TAB,icon:"actionNewTab"},{label:"Activate tab",action:F.ACTIVATE_TAB,icon:"actionActivateTab"},{label:"Open url",action:F.OPEN_URL,icon:"actionOpenUrl"},{label:"Close tab",action:F.CLOSE_TAB,icon:"actionCloseTab"},{label:"Go back",action:F.GOBACK,icon:"actionGoBack"},{label:"Reload page",action:F.RELOAD,icon:"actionReloadPage"}],_f=[{label:"Click",action:F.CLICK,icon:"actionClick"},{label:"Press & Hold",action:F.PRESS_HOLD,icon:"actionPressHold"},{label:"Mouse movement",action:F.MOVE,icon:"actionMouseMove"},{label:"Scroll",action:F.SCROLL,icon:"actionScroll"}],Ef=[{label:"Press key",action:F.PRESS,icon:"actionPress"},{label:"Type text",action:F.TYPE_TEXT,icon:"actionTypeText"}],xf=[{label:"Element exists",action:F.ELEMENT_EXISTS,icon:"actionElementExists"},{label:"Get URL",action:F.GET_URL,icon:"actionGetUrl"},{label:"Get text",icon:"actionGetText",action:F.GET_TEXT},{label:"Get value",action:F.GET_VALUE,icon:"actionGetValue"},{label:"Get attribute",action:F.GET_ATTRIBUTE_VALUE,icon:"actionGetAttributeValue"},{label:"Select dropdown",action:F.SELECT_DROPDOWN,icon:"actionSelectDropdown"},{label:"Random",action:F.RANDOM,icon:"actionRandom"},{label:"File upload",action:F.FILE_UPLOAD,icon:"actionFileUpload"},{label:"HTTP",action:F.HTTP,icon:"actionHttp"},{label:"Read file / variable",action:F.READ_FILE,icon:"actionReadFile"},{label:"Write file",action:F.WRITE_FILE,icon:"actionWriteFile"},{label:"Set variable",action:F.SET_VARIABLE,icon:"actionVariables"},{label:"Cookies",action:F.COOKIES,icon:"actionCookies"},{label:"Save assets",action:F.SAVE_ASSETS,icon:"actionSaveAssets"},{label:"Spreadsheet",action:F.SPREADSHEET,icon:"actionSpreadsheet"},{label:"Insert data",action:F.INSERT_DATA,icon:"tableAdd"},{label:"Open AI",action:F.OPEN_AI,icon:"robot"},{label:"Gemini",action:F.GEMINI,icon:"google"},{label:"Grok",action:F.GROK,icon:"grok"},{label:"Case Path",action:F.CASE_PATH,icon:"actionCasePath"},{label:"RegExp (Data extraction)",action:F.RegEx,icon:"actionRegExp"},{label:"IMAP (Read mail)",action:F.IMAP,icon:"actionImap"},{label:"Update field",action:F.UPDATE_FIELD,icon:"edit"},{label:"Two FA",action:F.TWO_FA,icon:"actionTwoFA"}],Sf=[{label:"Bypass",action:F.BYPASS,icon:"actionBypass"},{label:"Cmd",action:F.CMD,icon:"actionCmd"},{label:"Log",action:F.LOG,icon:"file"},{label:"Disconnect",action:F.DISCONNECT,icon:"actionDisconnect"},{label:"Update tag",action:F.UPDATE_TAG,icon:"actionUpdateTag"},{label:"Get tag",action:F.GET_TAG,icon:"actionUpdateTag"},{label:"Profile note",action:F.PROFILE_NOTE,icon:"actionProfileNote"},{label:"Image search",action:F.IMAGE,icon:"actionImageSearch"},{label:"Screenshot",action:F.SCREENSHOT,icon:"actionScreenshot"},{label:"Clipboard",action:F.CLIPBOARD,icon:"actionClipboard"},{label:"Switch Frame",action:F.SWITCH_FRAME,icon:"actionSwitchFrame"},{label:"Switch Page",action:F.SWITCH_PAGE_V2,icon:"actionSwitchPage"},{label:"Switch Extension popup V2",action:F.SWITCH_EXTENSION_POPUP_PAGE_V2,icon:"actionExtension"},{label:"Trigger Extension",action:F.EXTENSION,icon:"actionExtension"},{label:"Dialog/Alert",action:F.DIALOG,icon:"actionDialog"},{label:"Sleep",action:F.PAUSE,icon:"actionPause"},{label:"If",action:F.IF,icon:"helpCircle"},{label:"Eval",action:F.EVAL,icon:"actionEval"},{label:"Javascript",action:F.EVAL_V2,icon:"actionEval"},{label:"Loop",action:F.LOOP,icon:"actionLoop"},{label:"Loop V2",action:F.LOOPV2,icon:"actionLoop"},{label:"Break loop",action:F.BREAK,icon:"actionBreak"},{label:"Emulate",action:F.EMULATE,icon:"actionEmulate"},{label:"Comment",action:F.COMMENT,icon:"actionComment"},{label:"Stop",action:F.STOP,icon:"actionStop"}],ff={width:"80px",height:"80px",backgroundColor:"#36ad6a",color:"#fff","box-shadow":"rgb(59 178 85 / 38%) 0px 0px 12px","--vf-node-color":"#36ad6a","--vf-handle":"#62fcaf","border-radius":"50%"},_i={width:"80px",height:"80px",backgroundColor:"#d03a52",color:"#fff","box-shadow":"rgb(208 58 82 / 38%) 0px 0px 12px","--vf-node-color":"#d03a52","--vf-handle":"#62fcaf","border-radius":"50%"},Vn={width:"120px",height:"120px",backgroundColor:"#55b3e6",color:"#fff","box-shadow":"#83c3e6 0px 0px 12px","--vf-node-color":"#d03a52","--vf-handle":"#62fcaf","border-radius":"50%"},tt={padding:"10px 20px",backgroundColor:"#55b3e6",color:"#fff","box-shadow":"#83c3e6 0px 0px 12px","--vf-node-color":"#55b3e6","--vf-handle":"#62fcaf","border-width":"1px","border-style":"solid","border-color":"#55b3e6","border-radius":"3px"},hf={padding:"10px 20px",backgroundColor:"#f0a020",color:"#fff","box-shadow":"#f0a720 0px 0px 12px","--vf-node-color":"#f0a020","--vf-handle":"#62fcaf","border-width":"1px","border-style":"solid","border-color":"#f0a020","border-radius":"3px"},Ei={padding:"10px 20px",backgroundColor:"#f2a2e2",color:"#fff","box-shadow":"#e5a2f2 0px 0px 12px","--vf-node-color":"#f2a2e2","--vf-handle":"#62fcaf","border-width":"1px","border-style":"solid","border-color":"#f2a2e2","border-radius":"3px"};var ke=(e=>(e.SUCCESS="successNode",e.FAIL="failNode",e.START_LOOP="startLoopNode",e.END_LOOP="endLoopNode",e.PATH="pathNode",e))(ke||{});const Nf=[{label:"<",value:"<"},{label:">",value:">"},{label:"=",value:"="},{label:"!=",value:"!="},{label:"<=",value:"<="},{label:">=",value:">="}],Bt=ae([]),Cf=ae("60%"),Pf=ae([{type:"layout",label:"Layout",data:[{id:1,name:"Divider",type:"divider",icon:"divider",options:{hideLabel:!0,dash:!1,width:null,height:null,labelWidth:100}},{id:2,name:"Alert",type:"alert",icon:"warning",options:{hideLabel:!0,title:"Title",type:"info",value:"",width:null,height:null,labelWidth:100,bordered:!1}},{id:3,name:"Inline",type:"inline",icon:"inline",options:{hideLabel:!0,width:null,height:20,labelWidth:100}},{id:4,name:"Group",type:"group",icon:"group",options:{hideLabel:!0,width:null,height:100,labelWidth:100,showBorder:!0,data:[]}},{id:5,name:"Grid",type:"grid",icon:"grid",options:{hideLabel:!0,width:null,height:100,labelWidth:100,showBorder:!0,xGap:0,cols:[[]]}}]},{type:"basicField",label:"Basic Field",data:[{id:"1",name:"Input",type:"input",icon:"input",options:{variable:{id:null},hideLabel:!0,value:"",placeholder:"",width:null,height:null,labelWidth:100,maxLength:null,minLength:null,disabled:!1,showCount:!1}},{id:2,name:"Select",type:"select",icon:"dropdown",options:{variable:{id:null},hideLabel:!0,value:null,options:[],isMultiple:!1,placeholder:"Please select",width:null,height:null,labelWidth:100}},{id:3,name:"Switch",type:"switch",icon:"switchIcon",options:{variable:{id:null},hideLabel:!0,value:!1,width:null,height:null,labelWidth:100,isLoading:!1}},{id:4,name:"CheckBox Group",type:"checkbox",icon:"checkbox",options:{variable:{id:null},hideLabel:!0,value:[],options:[],width:null,height:null,labelWidth:100}},{id:11,name:"CheckBox",type:"checkboxSingle",icon:"checkbox",options:{variable:{id:null},hideLabel:!0,value:!1,options:[],width:null,height:null,labelWidth:100}},{id:5,name:"Radio",type:"radio",icon:"radio",options:{variable:{id:null},hideLabel:!0,value:"",options:[],width:null,height:null,labelWidth:100}},{id:6,name:"TextArea",type:"textarea",icon:"area",options:{variable:{id:null},hideLabel:!0,value:"",placeholder:"",width:null,height:null,labelWidth:100,maxLength:null,minLength:null,disabled:!1,showCount:!1}},{id:7,name:"Input Number",type:"number",icon:"number",options:{variable:{id:null},hideLabel:!0,title:"Title",value:0,width:null,height:null,labelWidth:100,bordered:!0,clearable:!0,min:0,max:100,placeholder:"Enter Number",readonly:!1,showButton:!0,step:1}},{id:8,name:"Slider",type:"slider",icon:"slider",options:{variable:{id:null},hideLabel:!0,value:0,width:null,height:null,labelWidth:100,reverse:!1,vertical:!1,min:0,max:100,tooltip:!0,step:1,marks:[]}},{id:9,name:"Link",type:"link",icon:"link",options:{variable:{id:null},hideLabel:!0,target:!1,display:"",value:"",width:null,height:null,labelWidth:100}},{id:10,name:"Text",type:"text",icon:"text",options:{variable:{id:null},hideLabel:!0,color:"",value:"text",strong:!1,italic:!1,underline:!1,delete:!1,depth:"",type:"default",width:null,height:null,labelWidth:100}}]},{type:"advanceField",label:"Advance Field",data:[{id:1,name:"File",type:"file",icon:"file",options:{variable:{id:null},hideLabel:!0,max:"1",actions:"",width:null,height:null,labelWidth:100,value:""}},{id:2,name:"Image",type:"image",icon:"image",options:{variable:{id:null},hideLabel:!0,value:"",previewFileList:ae([]),width:null,height:null,labelWidth:100}},{id:3,name:"HTML",type:"html",icon:"html",options:{variable:{id:null},hideLabel:!0,value:`<b style="color: red;">
    This is a HTML5
  </b>`,width:null,height:null,labelWidth:100}}]}]),Mf=fe(()=>Bt.value.map(e=>{var t;return(t=e.options.variable)==null?void 0:t.id}).filter(Boolean));ae();const gf=[{name:so.PROFILE_ID,value:""},{name:so.PROFILE_NAME,value:""}],kf=()=>{const{route:e}=Qa();return{scriptId:fe(()=>e.params.id)}},$t=ae([]),xi=ae([]),Si=ae(null),Ni=ae(""),Ci=ae([]),Hn=ae(!1),Gn=ae(!1),Pi=ae(!1),en=Za("v3-automation-settings",{show:!1,debug:!1,animatedConnection:!0,autoSave:!0,autoSaveInterval:30}),$e=co({saveAsName:"",saveAsModal:!1,running:!1,warnSaving:!1,editContextMenu:!1}),Se=co({show:!1,node:null,options:{}}),tn=ae(Ua.CHROME),Mi=ae(null),vf=ae({}),Pe=ae(null),Oe=ae([]),Ee=ae(null),It=ae([]),uo=ae([]),On=fe(()=>uo.value.map(e=>({label:e.title,value:e.key,type:"fields"}))),pf=(e=null,t=[],n=null)=>{const{user:o}=Ka(qa()),i=Ja(),a=ae(""),r=fe(()=>[...On.value.length?[{type:"group",label:"Fields",key:"fields",children:On.value}]:[],{type:"group",label:"Variables",key:"variables",children:[...gf,...Oe.value].map(M=>M.name?{label:M.name,value:M.name}:null).filter(Boolean)}]),l=M=>{a.value=M},u=()=>{const M=a.value;return Oe.value.push({id:Ke(5),name:M,label:"",value:"",secret:!1}),a.value="",M},s=Ya(e);s.value||(s.value=xe({minZoom:.3,deleteKeyCode:null}));const{nodes:c,project:f,findNode:h,addNodes:m,addEdges:P,removeNodes:E,toObject:d,removeSelectedElements:w,addSelectedNodes:v,getSelectedNodes:_}=s.value,b=fe(()=>xo(_.value)),k=fe(()=>({width:`${b.value.width}px`,height:`${b.value.height}px`,top:`${b.value.y}px`,left:`${b.value.x}px`})),H=async M=>{try{if(!M.script)throw new Error("Script not found");Pe.value=M,Pe.value.enableContextMenu=!!Pe.value.enableContextMenu,Ee.value=Pe.value.script||null,It.value=Pe.value.contextMenu||[],$t.value=Pe.value.table||Ee.value.table||[],Oe.value=Pe.value.script.variables.map(N=>(N.id||(N.id=Ke(5)),N))}catch{Pe.value={userId:o.value.id,name:M.name,version:M.version,description:M.description||"",type:M.type},It.value=[],Ee.value={id:M.id,name:"New App",version:"1.0.0",description:"",flow:null,variables:[]},It.value=[],$t.value=[],Oe.value=[]}Bt.value=[];const O={id:"menu",type:"custom-context-menu",label:"Context Menu",position:{x:40,y:300},data:{action:F.CONTEXT_MENU,icon:"menu",options:{casePaths:{}}},style:tt,events:{click(N){$e.editContextMenu=!0}},deletable:!1};let $=[{id:`start_${Ke(5)}`,type:"input",label:"Start",position:{x:50,y:100},sourcePosition:te.Right,targetPosition:te.Left,style:ff,data:{action:F.START,options:{},successNode:null,failNode:null},events:{click(N){const{node:D}=N;Se.node=Object.assign({},D),Se.show=!0,Se.options=D.data.options}},deletable:!1},O,{id:"variables",type:"helper",label:"Variables",position:{x:50,y:200},style:hf,data:{action:F.VARIABLES,icon:"actionVariables",options:{}},events:{click(N){const{node:D}=N;Se.node=Object.assign({},D),Se.show=!0,Se.options=D.data.options}},deletable:!1}],B=[];const{flow:T}=Ee.value;T&&($=JSON.parse(JSON.stringify(T.nodes)).map(D=>(D.events={click(V){const{node:Z}=V;Se.node=Object.assign({},Z),Se.show=!0,Se.options=Z.data.options}},D.type==="custom"?D.style=tt:D.type==="loop"&&(D.style=Vn),D.extent===null&&delete D.extent,D)),B=T.edges.map(D=>(D.updatable=!0,D)),Bt.value=Array.isArray(Pe.value.input)?Mn(Pe.value.input).map(D=>(D.options.variable?D.options.variable&&!D.options.variable.id&&(D.options.variable=Oe.value.find(V=>D.options.variable.name===V.name)):D.options.variable={id:null},D)):[],$.find(D=>D.id==="menu")||$.push(O)),s.value.setNodes($),s.value.setEdges(B),s.value.fitView(),s.value.zoomTo(.7)},p=M=>{const{source:O,target:$,targetHandle:B,sourceHandle:T}=M,N=h(O),D=h($);let V="#62fcaf";if(N.data.action===F.CASE_PATH)if(T===ke.FAIL)N.data.failNode=$;else{const oe=N.data.options.casePaths.findIndex(W=>W.id===T);oe!==-1&&(N.data.options.casePaths[oe].nextNode=$)}else if(N.data.action===F.CONTEXT_MENU)N.data.options.casePaths[T]=$;else{switch(T){case ke.FAIL:V="#d03050";break;case ke.START_LOOP:V="#f0a020";break}if(D.data.action===F.LOOP)B===ke.SUCCESS?T===ke.FAIL?N.data.failNode=$:N.data.successNode=$:T===ke.SUCCESS?(N.data.successNode=$,V="#f0a020"):T===ke.FAIL?N.data.failNode=$:(N.data.startLoopNode=$,V="#f0a020");else if(B===ke.SUCCESS&&(T.includes("start_")||T===ke.SUCCESS?N.data.successNode=$:T===ke.FAIL?N.data.failNode=$:T===ke.START_LOOP&&(N.data.startLoopNode=$)),T===ke.SUCCESS)N.data.successNode=$;else if(T===ke.FAIL)N.data.failNode=$;else if(T===ke.PATH){const oe=N.data.options.casePaths.findIndex(W=>W.id===O);N.data.options.casePaths[oe].nextNode=$}}const Z={type:"custom",animated:en.value.animatedConnection,style:{stroke:V,strokeWidth:2},data:{sourceHandle:T,targetHandle:B},updatable:!0,class:`source-${O} target-${$}`};P([{...M,...Z}])},q=(M,O=f({x:500,y:500}))=>{const{label:$,action:B,icon:T,data:N}=M;let D,V="custom",Z;switch(B){case F.COMMENT:D=Ei,V="helper";break;case F.STOP:D=_i,V="output",Z={click(j){const{node:le}=j;Se.node=Object.assign({},le),Se.show=!0,Se.options=le.data.options}};break;case F.LOOP:D=Vn,V="loop";break;case F.CASE_PATH:D=tt,V="custom-case";break;case F.CONTEXT_MENU:D=tt,V="custom-context-menu";break;default:D=tt,V="custom";break}const oe=B===F.LOOP,W={id:Ke(5),position:O,label:$,type:V,sourcePosition:te.Right,targetPosition:te.Left,style:D,data:{icon:T,action:B,options:Object.assign({},(N==null?void 0:N.options)||{}),successNode:null,failNode:null,...oe?{startLoopNode:null}:{}},events:Z};m([W]),$e.warnSaving=!0},J=(M,O,$)=>{const B=new Map;let T=null;const N=M.map((D,V)=>{const{id:Z,label:oe,position:W,data:{action:j,icon:le,options:ce}}=D,he={y:W.y-150,x:W.x-50};if($)if(V===0)T={x:he.x,y:he.y},$=s.value.project({y:$.y,x:$.x-360}),Object.assign(he,$);else{const ee=he.x-T.x,Q=he.y-T.y;he.x=$.x+ee,he.y=$.y+Q}let y,S="custom";switch(j){case F.COMMENT:y=Ei,S="helper";break;case F.STOP:y=_i,S="output";break;case F.LOOP:y=Vn,S="loop";break;case F.CASE_PATH:y=tt,S="custom-case";break;default:y=tt,S="custom";break}const U=j===F.LOOP,x=Ke(5);return B.set(Z,x),{id:x,position:he,label:oe,type:S,sourcePosition:te.Right,targetPosition:te.Left,style:y,data:{icon:le,action:j,options:ce,successNode:null,failNode:null,...U?{startLoopNode:null}:{}}}});m([...Mn(N)]),O.map(({style:D,target:V,targetHandle:Z,source:oe,sourceHandle:W})=>{const j=B.get(V),le=B.get(oe);if(!j||!le)return null;const ce={type:"custom",target:j,source:le,style:D,updatable:!0,animated:en.value.animatedConnection,id:`edge-${Ke(5)}`,targetHandle:Z.replace(V,j),sourceHandle:W.replace(oe,le)};return p(ce),ce},[]),w(),v([...N]),$e.warnSaving=!0},z=M=>{const O=document.querySelectorAll(`.target-${M}`),$=document.querySelectorAll(`.source-${M}`);O.forEach(B=>{const N=Array.from(B.classList).filter(V=>V.includes("source"))[0].split("-").pop(),D=h(N);D&&(D.data.successNode===M&&(D.data.successNode=null),D.data.failNode===M&&(D.data.failNode=null),D.data.startLoopNode===M&&(D.data.startLoopNode=null),D.data.endLoopNode===M&&(D.data.endLoopNode=null))}),$.forEach(B=>{const N=Array.from(B.classList).filter(V=>V.includes("target"))[0].split("-").pop(),D=h(N);D&&(D.data.successNode===M&&(D.data.successNode=null),D.data.failNode===M&&(D.data.failNode=null),D.data.startLoopNode===M&&(D.data.startLoopNode=null),D.data.endLoopNode===M&&(D.data.endLoopNode=null))})},X=M=>{z(M),Ye(()=>{E([M]),Se.show=!1,Se.node=null,$e.warnSaving=!0})},ue=M=>{Se.node=Object.assign({},M),Se.show=!0,Se.options=M.data.options},ne=(M,O)=>{const $=h(M);$&&($.data.options={...$.data.options,...O}),$e.warnSaving=!0},g=async M=>{var N,D;const O=at(c.value).map(V=>{var j,le;const{id:Z,data:oe,label:W}=V;if((j=oe==null?void 0:oe.options)!=null&&j.scriptId){const ce=(le=oe==null?void 0:oe.options)==null?void 0:le.scriptId,he=i.getScriptPayload(ce);oe.options.scriptObject=he}return{id:Z,data:oe,label:W}});let $="";if(tn.value)try{const V=await ja(tn.value),{data:{wsEndpoint:Z}}=V.data;$=Z}catch{$=""}const B=Oe.value.reduce((V,Z)=>(Z.name&&(V[Z.name]=Z.value),V),{});M&&(O[0].data={...O[0].data,successNode:M});const T={wsEndpoint:$,script:{id:((N=Ee.value)==null?void 0:N.id)||Ke(5),name:(D=Ee.value)==null?void 0:D.name,nodes:Mn(O),variables:B,options:{sandbox:!1,debug:en.value.debug}},profile_id:tn.value,testId:null,accountId:Mi.value,appId:Pe.value.id,customFields:uo.value};return JSON.parse(JSON.stringify(T))},I=async(M=!0)=>{var N,D,V;if(!Ee.value)return;const O=d();O.nodes=O.nodes.map(Z=>(Z.class="",Z.type==="custom"&&delete Z.style,Z));const $=Ee.value.id,B={id:$,name:Ee.value.name,description:Ee.value.description,version:(N=Ee.value)==null?void 0:N.version,flow:O,variables:Oe.value},T={id:$,userId:o.value.id,name:Ee.value.name,description:Ee.value.description,version:(D=Ee.value)==null?void 0:D.version,script:B,input:Bt.value,table:$t.value,contextMenu:It.value,enableContextMenu:Pe.value.enableContextMenu,type:Pe.value.type};if((V=Pe.value)!=null&&V.id)await er(T),M&&window.$message.success("App saved!");else{const{data:Z}=await $o(T);Pe.value=Z.data,M&&window.$message.info("App created!")}$e.warnSaving=!1};return{viewLogId:Ni,scriptTable:$t,logs:Ci,currentLog:Si,automationSettings:en,scriptState:$e,scriptLogs:xi,showScriptLog:Pi,startingAutomation:Hn,stopingAutomation:Gn,selectedProfile:tn,selectedAccount:Mi,accountSelected:vf,modalNode:Se,editor:s,app:Pe,script:Ee,contextMenuList:It,customFields:uo,customFieldOptions:On,variables:Oe,newVariable:a,variableOptions:r,selectedRect:k,onSearchVariable:l,createNewVariable:u,initFlow:H,onConnect:p,findNode:h,addNode:q,cloneNodes:J,deleteNode:X,editNode:ue,updateNodeData:ne,prepareAutomation:g,startAutomation:async M=>{var O;try{Ni.value="",Ci.value=[],xi.value=[],Si.value=null;const $=await g(M);Hn.value=!0,await tr($),$e.running=!0,await I(!0),window.$message.success("Script started!"),Pi.value=!0}catch($){console.log("🚀 ~ startAutomation ~ error:",$),window.$message.error(((O=$==null?void 0:$.error)==null?void 0:O.message)||$.toString())}finally{Hn.value=!1}},stopAutomation:async()=>{try{Gn.value=!0,$e.running=!1,await nr(),window.$message.warning("Script stopped!")}catch{}finally{Gn.value=!1,$e.running=!1}},resumeAutomation:async()=>await or(),nextNodeAutomation:async()=>await ir(),saveScript:I,saveScriptAs:async()=>{var N,D;if(!Ee.value)return;const M=d();M.nodes=M.nodes.map(V=>(V.class="",V.type==="custom"&&delete V.style,V));const O=Ke(),$=$e.saveAsName,B={id:O,name:$,description:Ee.value.description,version:(N=Ee.value)==null?void 0:N.version,flow:M,variables:Oe.value},T={id:O,userId:o.value.id,name:$,description:Ee.value.description,version:(D=Ee.value)==null?void 0:D.version,script:B,input:Bt.value,table:$t.value};await $o(T),window.$message.info("App created!"),$e.saveAsName="",$e.saveAsModal=!1},removeSelectedElements:w}},Df=pf;export{F as A,df as B,Jd as C,af as F,ke as H,Kd as L,te as P,of as R,jd as S,ef as T,lf as W,wf as _,Df as a,kf as b,Bt as c,xf as d,Cf as e,gf as f,Ia as g,Ra as h,vn as i,uf as j,Ef as k,Vn as l,_f as m,bf as n,Sf as o,cf as p,rf as q,sf as r,Pf as s,Qd as t,xe as u,Mf as v,tf as w,nf as x,qd as y,Nf as z};
