import{b as h,a as z}from"./useScriptEditor-4173e447.js";import{ah as N,aL as $,am as E}from"./main-8b08e1d6.js";import{_ as v}from"./ModalNode-47dd364b.js";import{d as G,i as I,c as K,m as F,S as _,X as c,Y as l,D as e,u as t,a2 as b,E as A,$ as B}from"./_plugin-vue_export-helper-b059e461.js";import{_ as D}from"./FormItem-52ed65a1.js";import{_ as j}from"./Radio-c980589e.js";import{_ as L}from"./RadioGroup-69a7fbba.js";import{_ as X}from"./Select-f7c79767.js";import{_ as Y}from"./Input-96fa4693.js";import"./lodash-6114c6d4.js";import"./axios-1e30d922.js";import"./xlsx-f5126985.js";import"./ScriptEditor-c5673dff.js";import"./InputSearch.vue_vue_type_script_setup_true_lang-d786940a.js";import"./useMyApps-6a511b1e.js";import"./a-72358bba.js";import"./Divider-65f3d898.js";import"./Modal-0f4a5102.js";import"./DynamicInput-debc4a5e.js";import"./Remove-be3cc84a.js";import"./DataTable-e5054828.js";import"./Checkbox-ce86da58.js";import"./Suffix-fc59bb7a.js";import"./Pagination-ce77c3f3.js";import"./_baseUniq-35fed69a.js";import"./toInteger-0dcb6e10.js";import"./SelectProfiles.vue_vue_type_script_setup_true_lang-3d20c4d9.js";import"./FormMakingResult-fec35bca.js";import"./useSavedTasks-dbe97dc3.js";import"./useRunScript-b4e924db.js";import"./useConsole-dd6c2120.js";import"./Upload-46a3755a.js";import"./Progress-0b0a0198.js";import"./_createCompounder-4af3bdce.js";import"./Alert-2eccd136.js";import"./InputNumber-c85d5887.js";import"./Grid-308f499b.js";import"./DatePicker-91499e1f.js";import"./ModalConfirm-92ee844f.js";import"./useSelectProfiles-b9438807.js";import"./firefox-icon-2ab5a045.js";import"./CollapseItem-114ac5a0.js";import"./Scrollbar-e90e60b7.js";import"./Form-e484375f.js";import"./FormItemGridItem-951b0746.js";import"./vuedraggable.umd-e6c5d70a.js";import"./InputSearch-1469c448.js";import"./InputGroup-20db4544.js";const q={name:"OpenAi"},Lo=G({...q,setup(H){const{scriptId:g}=h(),{editor:y,variables:V,modalNode:o}=I(g),{newVariable:f,createNewVariable:x,onSearchVariable:T,variableOptions:k}=z(y.value,V.value),w=()=>{const i=x();o.options.outputVariable=i},S=[{label:"GPT-3.5 Turbo",value:"gpt-3.5-turbo"},{label:"GPT-4",value:"gpt-4"},{label:"GPT-4 Turbo",value:"gpt-4-turbo"},{label:"GPT-4o",value:"gpt-4o"},{label:"GPT-4o Mini",value:"gpt-4o-mini"},{label:"Custom",value:"custom"}],U=[{label:"Dall-e-3",value:"dall-e-3"},{label:"Custom",value:"custom"}],C=[{label:"1024x1024",value:"1024x1024"},{label:"1792x1024",value:"1792x1024"},{label:"1024x1792",value:"1024x1792"}],O=K(()=>{switch(o.options.outputType){case"text":return S;case"image":return U;default:return[]}}),M=i=>{i==="image"?o.options.model="dall-e-3":o.options.model="gpt-3.5-turbo"};return F(()=>{var i,a,n,u,s,r,m,d;o.options.apiKey=((i=o.options)==null?void 0:i.apiKey)||"",o.options.outputType=((a=o.options)==null?void 0:a.outputType)||"text",o.options.model=((n=o.options)==null?void 0:n.model)||"gpt-3.5-turbo",o.options.customModel=((u=o.options)==null?void 0:u.customModel)||"",o.options.content=((s=o.options)==null?void 0:s.content)||"",o.options.outputVariable=((r=o.options)==null?void 0:r.outputVariable)||null,o.options.imageSize=((m=o.options)==null?void 0:m.imageSize)||"1024x1024",o.options.imageFormat=((d=o.options)==null?void 0:d.imageFormat)||"url"}),(i,a)=>{const n=D,u=j,s=$,r=L,m=X,d=Y,P=E;return _(),c(s,{vertical:""},{default:l(()=>[e(n,{"show-feedback":!1,label:"API key"},{default:l(()=>[e(v,{modelValue:t(o).options.apiKey,"onUpdate:modelValue":a[0]||(a[0]=p=>t(o).options.apiKey=p),placeholder:"Enter API Key"},null,8,["modelValue"])]),_:1}),e(n,{"show-feedback":!1,label:"Output type"},{default:l(()=>[e(r,{value:t(o).options.outputType,"onUpdate:value":a[1]||(a[1]=p=>t(o).options.outputType=p),onUpdateValue:M},{default:l(()=>[e(s,null,{default:l(()=>[e(u,{label:"Text",value:"text"}),e(u,{label:"Image",value:"image"})]),_:1})]),_:1},8,["value"])]),_:1}),e(n,{"show-feedback":!1,label:"Model"},{default:l(()=>[e(m,{value:t(o).options.model,"onUpdate:value":a[2]||(a[2]=p=>t(o).options.model=p),options:t(O),placeholder:""},null,8,["value","options"])]),_:1}),t(o).options.model==="custom"?(_(),c(n,{key:0,"show-feedback":!1,label:"Custom model"},{default:l(()=>[e(d,{value:t(o).options.customModel,"onUpdate:value":a[3]||(a[3]=p=>t(o).options.customModel=p),placeholder:"gpt-4o-mini"},null,8,["value"])]),_:1})):b("",!0),e(n,{"show-feedback":!1,label:"Content"},{default:l(()=>[e(v,{modelValue:t(o).options.content,"onUpdate:modelValue":a[4]||(a[4]=p=>t(o).options.content=p),type:"textarea",placeholder:"Enter content"},null,8,["modelValue"])]),_:1}),t(o).options.outputType==="image"?(_(),c(s,{key:1,vertical:""},{default:l(()=>[e(n,{"show-feedback":!1,label:"Size"},{default:l(()=>[e(m,{value:t(o).options.imageSize,"onUpdate:value":a[5]||(a[5]=p=>t(o).options.imageSize=p),options:C,placeholder:""},null,8,["value"])]),_:1}),e(n,{"show-feedback":!1,label:"Output format"},{default:l(()=>[e(r,{value:t(o).options.imageFormat,"onUpdate:value":a[6]||(a[6]=p=>t(o).options.imageFormat=p)},{default:l(()=>[e(s,null,{default:l(()=>[e(u,{label:"Url",value:"url"}),e(u,{label:"Base64",value:"b64_json"})]),_:1})]),_:1},8,["value"])]),_:1})]),_:1})):b("",!0),e(n,{"show-feedback":!1,label:"Output variable"},{default:l(()=>[e(m,{value:t(o).options.outputVariable,"onUpdate:value":a[7]||(a[7]=p=>t(o).options.outputVariable=p),options:t(k),clearable:"",filterable:"","on-search":t(T)},{empty:l(()=>[t(f).length?(_(),c(P,{key:0,dashed:"",onClick:w},{icon:l(()=>[e(N,{type:"add"})]),default:l(()=>[A(" Create "+B(t(f)),1)]),_:1})):b("",!0)]),_:1},8,["value","options","on-search"])]),_:1})]),_:1})}}});export{Lo as default};
