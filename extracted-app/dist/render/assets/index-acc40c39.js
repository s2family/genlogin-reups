import{ar as l,I as m,H as f,c9 as h}from"./main-8b08e1d6.js";import{d as w,S as k,U as v,u as x,a1 as b}from"./_plugin-vue_export-helper-b059e461.js";import"./lodash-6114c6d4.js";import"./axios-1e30d922.js";import"./xlsx-f5126985.js";const S=["src"],g=w({__name:"Store",setup(E){const{goAppDetails:a}=l(),{userInfo:n}=m(f()),{url:c,handleDownloadApp:r,checkExist:d}=h(),i=async t=>{var o;const e=await d(t.data.product_id,n.value.id),s=document.getElementById("store");s&&((o=s.contentWindow)==null||o.postMessage({event_id:"check_exist",data:{isExist:!!e,app_id:(e==null?void 0:e.id)||null}},"*"))},p=t=>{t.data.app_id&&a(t.data.app_id)};return window.addEventListener("message",async t=>{const e=t.data,{product_id:s,version:o,hash:_,url:u}=e.data;switch(e.event_id){case"download":await r({data:{productId:s,version:o,hash:_,url:u}});break;case"info":await i(e);break;case"open":p(e);break}}),(t,e)=>(k(),v("iframe",{id:"store",src:x(c).toString()},null,8,S))}});const R=b(g,[["__scopeId","data-v-c8c9b5b6"]]);export{R as default};
