import{_ as v}from"./ModalNode-47dd364b.js";import{b as E,a as B}from"./useScriptEditor-4173e447.js";import{ah as h,gm as P,am as R,aL as $}from"./main-8b08e1d6.js";import{d as I,i as T,b as A,m as D,S as u,X as c,Y as e,D as a,u as o,E as m,U as j,F as q,$ as _,a2 as f,V as z}from"./_plugin-vue_export-helper-b059e461.js";import{_ as L}from"./FormItem-52ed65a1.js";import{_ as M}from"./Checkbox-ce86da58.js";import{_ as X}from"./Select-f7c79767.js";import"./ScriptEditor-c5673dff.js";import"./InputSearch.vue_vue_type_script_setup_true_lang-d786940a.js";import"./Input-96fa4693.js";import"./Suffix-fc59bb7a.js";import"./useMyApps-6a511b1e.js";import"./a-72358bba.js";import"./Divider-65f3d898.js";import"./Modal-0f4a5102.js";import"./DynamicInput-debc4a5e.js";import"./Remove-be3cc84a.js";import"./DataTable-e5054828.js";import"./RadioGroup-69a7fbba.js";import"./Radio-c980589e.js";import"./Pagination-ce77c3f3.js";import"./lodash-6114c6d4.js";import"./_baseUniq-35fed69a.js";import"./toInteger-0dcb6e10.js";import"./SelectProfiles.vue_vue_type_script_setup_true_lang-3d20c4d9.js";import"./FormMakingResult-fec35bca.js";import"./xlsx-f5126985.js";import"./useSavedTasks-dbe97dc3.js";import"./useRunScript-b4e924db.js";import"./useConsole-dd6c2120.js";import"./Upload-46a3755a.js";import"./Progress-0b0a0198.js";import"./_createCompounder-4af3bdce.js";import"./Alert-2eccd136.js";import"./InputNumber-c85d5887.js";import"./Grid-308f499b.js";import"./DatePicker-91499e1f.js";import"./ModalConfirm-92ee844f.js";import"./axios-1e30d922.js";import"./useSelectProfiles-b9438807.js";import"./firefox-icon-2ab5a045.js";import"./CollapseItem-114ac5a0.js";import"./Scrollbar-e90e60b7.js";import"./Form-e484375f.js";import"./FormItemGridItem-951b0746.js";import"./vuedraggable.umd-e6c5d70a.js";import"./InputSearch-1469c448.js";import"./InputGroup-20db4544.js";const Y={class:"random-output"},zt=I({__name:"Cmd",setup(G){const{scriptId:y}=E(),{editor:O,variables:S,modalNode:t}=T(y),{newVariable:i,createNewVariable:b,onSearchVariable:V,variableOptions:C,prepareAutomation:w}=B(O.value,S.value),g=()=>{const r=b();t.options.outputVariable=r},x=()=>{const r=b();t.options.outputStdout=r},F=()=>{const r=b();t.options.outputStderr=r},l=A(""),N=async()=>{try{l.value="";const r=await w();r.testId=t.node.id,l.value=await(await P(r)).data}catch(r){l.value=r.error}};return D(()=>{t.options.cmdCommand=t.options.cmdCommand||"",t.options.cmdOutputPattern=t.options.cmdOutputPattern||"",t.options.outputStdout=t.options.outputStdout||"",t.options.outputStderr=t.options.outputStderr||"",t.options.cmdWaitForOutput=t.options.cmdWaitForOutput===void 0?!1:t.options.cmdWaitForOutput,t.options.outputVariable=t.options.outputVariable||null}),(r,p)=>{const s=L,U=M,d=R,k=X,W=$;return u(),c(W,{vertical:""},{default:e(()=>[a(s,{"show-feedback":!1,label:"Command"},{default:e(()=>[a(v,{modelValue:o(t).options.cmdCommand,"onUpdate:modelValue":p[0]||(p[0]=n=>o(t).options.cmdCommand=n),type:"textarea",placeholder:"For example: curl https://ifconfig.me/ip",autosize:{minRows:5,maxRows:5}},null,8,["modelValue"])]),_:1}),a(U,{checked:o(t).options.cmdWaitForOutput,"onUpdate:checked":p[1]||(p[1]=n=>o(t).options.cmdWaitForOutput=n)},{default:e(()=>[m(" Wait for output ")]),_:1},8,["checked"]),o(t).options.cmdWaitForOutput?(u(),j(q,{key:0},[a(s,{"show-feedback":!1,label:"Output pattern (RegEx)"},{default:e(()=>[a(v,{modelValue:o(t).options.cmdOutputPattern,"onUpdate:modelValue":p[2]||(p[2]=n=>o(t).options.cmdOutputPattern=n),placeholder:""},null,8,["modelValue"])]),_:1}),a(s,{"show-feedback":!1,label:"Output variable (An array of all matched items)"},{default:e(()=>[a(k,{value:o(t).options.outputVariable,"onUpdate:value":p[3]||(p[3]=n=>o(t).options.outputVariable=n),options:o(C),clearable:"",filterable:"","on-search":o(V)},{empty:e(()=>[o(i).length?(u(),c(d,{key:0,dashed:"",onClick:g},{icon:e(()=>[a(h,{type:"add"})]),default:e(()=>[m(" Create "+_(o(i)),1)]),_:1})):f("",!0)]),_:1},8,["value","options","on-search"])]),_:1}),a(s,{"show-feedback":!1,label:"Output stdout"},{default:e(()=>[a(k,{value:o(t).options.outputStdout,"onUpdate:value":p[4]||(p[4]=n=>o(t).options.outputStdout=n),options:o(C),clearable:"",filterable:"","on-search":o(V)},{empty:e(()=>[o(i).length?(u(),c(d,{key:0,dashed:"",onClick:x},{icon:e(()=>[a(h,{type:"add"})]),default:e(()=>[m(" Create "+_(o(i)),1)]),_:1})):f("",!0)]),_:1},8,["value","options","on-search"])]),_:1}),a(s,{"show-feedback":!1,label:"Output stderr"},{default:e(()=>[a(k,{value:o(t).options.outputStderr,"onUpdate:value":p[5]||(p[5]=n=>o(t).options.outputStderr=n),options:o(C),clearable:"",filterable:"","on-search":o(V)},{empty:e(()=>[o(i).length?(u(),c(d,{key:0,dashed:"",onClick:F},{icon:e(()=>[a(h,{type:"add"})]),default:e(()=>[m(" Create "+_(o(i)),1)]),_:1})):f("",!0)]),_:1},8,["value","options","on-search"])]),_:1})],64)):f("",!0),a(d,{type:"primary",onClick:N},{default:e(()=>[m(" Test ")]),_:1}),z("pre",Y,_(o(l)),1)]),_:1})}}});export{zt as default};
