import{P as g,u as b,g as C,h as O,A as m,H as i}from"./useScriptEditor-4173e447.js";import{ah as X,am as Y,aL as k}from"./main-8b08e1d6.js";import{d as x,c as p,b as A,S as c,U as f,V as w,a8 as T,D as y,Y as _,X as B,a2 as E,F as L}from"./_plugin-vue_export-helper-b059e461.js";import"./lodash-6114c6d4.js";import"./axios-1e30d922.js";import"./xlsx-f5126985.js";const j=["id","d","marker-end"],z=["x","y"],F={inheritAttrs:!1},$=x({...F,__name:"CustomEdge",props:{id:{type:String,required:!0},target:{type:String,required:!0},source:{type:String,required:!0},sourceX:{type:Number,required:!0},sourceY:{type:Number,required:!0},targetX:{type:Number,required:!0},targetY:{type:Number,required:!0},sourcePosition:{type:String,default:g.Left,required:!0},targetPosition:{type:String,default:g.Right,required:!0},data:{type:Object,required:!1},markerEnd:{type:String,required:!1},style:{type:Object,required:!1}},setup(a){const e=a,{removeEdges:P,getNode:h}=b(),n=40,N=(l,r)=>{P([r]),l.stopPropagation();const{sourceHandle:o}=e.data,t=h.value(e.source);if(t.data.action===m.CASE_PATH){const s=t.data.options.casePaths.findIndex(q=>q.id===o);s!==-1&&(t.data.options.casePaths[s].nextNode=null),o===i.FAIL&&(t.data.failNode=null)}else o===i.START_LOOP&&t.data.action===m.LOOP?t.data.startLoopNode=null:o===i.SUCCESS||o.includes("start")?t.data.successNode=null:o===i.FAIL&&(t.data.failNode=null)},S=p(()=>C({sourceX:e.sourceX,sourceY:e.sourceY,sourcePosition:e.sourcePosition,targetX:e.targetX,targetY:e.targetY,targetPosition:e.targetPosition})),d=p(()=>O({sourceX:e.sourceX,sourceY:e.sourceY,sourcePosition:e.sourcePosition,targetX:e.targetX,targetY:e.targetY,targetPosition:e.targetPosition})),u=A(!1),v=()=>setTimeout(()=>{u.value=!1},200);return(l,r)=>{const o=Y,t=k;return c(),f(L,null,[w("path",{id:a.id,style:T(a.style),class:"vue-flow__edge-path",d:S.value[0],"marker-end":a.markerEnd},null,12,j),(c(),f("foreignObject",{width:n,height:n,x:d.value[1]-n/2,y:d.value[2]-n/2,requiredExtensions:"http://www.w3.org/1999/xhtml",onMouseover:r[1]||(r[1]=s=>u.value=!0),onMouseleave:v},[y(t,{justify:"center",align:"center",class:"h-full"},{default:_(()=>[u.value?(c(),B(o,{key:0,size:"tiny",circle:"",secondary:"",type:"error",onClick:r[0]||(r[0]=s=>N(s,a.id))},{icon:_(()=>[y(X,{type:"actionCloseTab"})]),_:1})):E("",!0)]),_:1})],40,z))],64)}}});export{$ as default};
