import{d as N,r as k,b as T,a4 as z,S as K,X as V,Y as l,V as c,D as i,E as m,$ as p,u as o,af as U,J as $,ag as P,a1 as q}from"./_plugin-vue_export-helper-b059e461.js";import{S as F}from"./SignLayout-6118d152.js";import{a2 as G,aE as j,H,I as J,aI as O,ae as W,a5 as X,aG as Y,a7 as Q,am as Z}from"./main-8b08e1d6.js";import{a as ee,d as oe,e as te,_ as se}from"./crypto-ecc6ac78.js";import{_ as ae}from"./Input-96fa4693.js";import{_ as ne}from"./FormItem-52ed65a1.js";import{_ as re}from"./Checkbox-ce86da58.js";import{_ as ie}from"./Form-e484375f.js";import"./Updater.vue_vue_type_script_setup_true_lang-91d65d78.js";import"./Progress-0b0a0198.js";import"./Layout-a5efc6cd.js";import"./lodash-6114c6d4.js";import"./axios-1e30d922.js";import"./xlsx-f5126985.js";import"./Suffix-fc59bb7a.js";const le={class:"register-form"},ue={class:"flex justify-center flex-col signin-container"},ce={class:"title"},pe={class:"desc"},me={class:"mb-16px flex items-center justify-between"},de={class:"mt-24px"},_e=N({__name:"Signin",setup(ge){const{t}=G(),b=j(),d=H(),{user:fe,keepLoginInfo:w,keepLogin:v}=J(d),u=k({submitting:!1,keepLogin:v.value||!1}),a=k({email:"",password:""}),S=async()=>{if(w.value&&v.value){const s=ee(w.value),e=await oe(s),n=JSON.parse(e),{username:r,password:_}=n;a.email=r,a.password=_}},x=async s=>{const e=await te(s);d.$patch({keepLogin:u.keepLogin,keepLoginInfo:se(e)})};S();const f=async()=>{if(u.submitting)return;const s={username:a.email.trim(),password:a.password};try{u.submitting=!0;const e=await O(s),{data:{success:n,data:r}}=e;n&&(await x({username:a.email.trim(),password:a.password}),await d.setAccessToken(r.access_token,r.refresh_token),(await d.getAuth()).plan.id===W.AIRDROP?b.push({name:"main.teamMembers"}):b.push({name:"main.profiles"}),window.$message.success(t("Page.Login.Msg.LoginSuccess")),await d.getAuth(),await X())}catch{}finally{u.submitting=!1}},L=T(null),h={invalid:t("Common.Msg.InvalidData"),incorrect:t("Common.Msg.IncorrectData"),notmatch:t("Common.Msg.PasswordNotMatch")},I={email:{required:!0,trigger:"blur",validator:(s,e)=>new Promise((n,r)=>{e?n():r(Error(h.invalid))})},password:{required:!0,trigger:"blur",validator:(s,e)=>new Promise((n,r)=>{e?n():r(Error(h.invalid))})}};function C(s){var e;s.preventDefault(),(e=L.value)==null||e.validate(n=>{}),f()}const D={mounted:s=>{s.querySelector(".n-input__input-el").focus()}},E=()=>{b.push({name:"forgotPassword"})};return(s,e)=>{const n=Y,r=Q,_=ae,y=ne,R=re,B=Z,M=ie,A=z("RouterLink");return K(),V(F,null,{default:l(()=>[c("div",le,[c("div",ue,[c("div",ce,[i(n,{class:"mb-8px"},{default:l(()=>[m(p(o(t)("Page.Login.Label.WelcomeBack")),1)]),_:1})]),c("div",pe,[i(r,{depth:"3"},{default:l(()=>[m(p(o(t)("Page.Login.Label.Continue")),1)]),_:1})]),i(M,{ref_key:"formRef",ref:L,model:o(a),rules:I,onSubmit:U(f,["prevent"])},{default:l(()=>[i(y,{size:"large",class:"mt-24px",label:o(t)("Page.Login.Label.Email"),path:"email"},{default:l(()=>[$(i(_,{value:o(a).email,"onUpdate:value":e[0]||(e[0]=g=>o(a).email=g),size:"large",placeholder:"Enter email",onKeyup:e[1]||(e[1]=P(()=>f,["enter"]))},null,8,["value"]),[[D]])]),_:1},8,["label"]),i(y,{size:"large",label:o(t)("Page.Login.Label.Password"),path:"password"},{default:l(()=>[i(_,{value:o(a).password,"onUpdate:value":e[2]||(e[2]=g=>o(a).password=g),size:"large",type:"password","show-password-on":"mousedown",placeholder:"Enter password",onKeyup:e[3]||(e[3]=P(()=>f,["enter"]))},null,8,["value"])]),_:1},8,["label"]),c("div",me,[c("div",null,[i(R,{checked:o(u).keepLogin,"onUpdate:checked":e[4]||(e[4]=g=>o(u).keepLogin=g)},{default:l(()=>[m(p(o(t)("Page.Login.Label.RememberMe")),1)]),_:1},8,["checked"])]),c("div",{class:"cursor-pointer forgot-password text-right",onClick:E},p(o(t)("Page.Login.Label.ForgotPassword")),1)]),i(B,{size:"large","attr-type":"submit",style:{color:"#fff !important"},loading:o(u).submitting,disabled:o(u).submitting,block:"",type:"primary",onClick:C},{default:l(()=>[m(p(o(t)("Common.Button.Submit")),1)]),_:1},8,["loading","disabled"])]),_:1},8,["model","onSubmit"]),c("div",de,[m(p(o(t)("Page.Login.Label.NewToGenlogin"))+" ",1),i(A,{class:"text-blue-500",to:"signup"},{default:l(()=>[m(p(o(t)("Page.Login.Label.GetStarted")),1)]),_:1})])])])]),_:1})}}});const Be=q(_e,[["__scopeId","data-v-13f7c6af"]]);export{Be as default};
