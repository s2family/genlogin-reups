import{b as Y,a as j,q as y}from"./useScriptEditor-4173e447.js";import{ah as f,am as q,a7 as A,aL as X}from"./main-8b08e1d6.js";import{_ as z}from"./ModalNode-47dd364b.js";import{d as G,i as H,b as J,m as K,S as l,X as p,Y as t,D as a,u as o,V as g,E as m,$ as V,a2 as h,U as Q}from"./_plugin-vue_export-helper-b059e461.js";import{_ as W}from"./Radio-c980589e.js";import{_ as Z}from"./RadioGroup-69a7fbba.js";import{_ as ee}from"./FormItem-52ed65a1.js";import{_ as oe}from"./Select-f7c79767.js";import{_ as te}from"./Checkbox-ce86da58.js";import{_ as ae}from"./Input-96fa4693.js";import{_ as ne}from"./DynamicInput-debc4a5e.js";import{_ as ie}from"./Form-e484375f.js";import{_ as le}from"./Scrollbar-e90e60b7.js";import"./lodash-6114c6d4.js";import"./axios-1e30d922.js";import"./xlsx-f5126985.js";import"./ScriptEditor-c5673dff.js";import"./InputSearch.vue_vue_type_script_setup_true_lang-d786940a.js";import"./useMyApps-6a511b1e.js";import"./a-72358bba.js";import"./Divider-65f3d898.js";import"./Modal-0f4a5102.js";import"./_baseUniq-35fed69a.js";import"./toInteger-0dcb6e10.js";import"./SelectProfiles.vue_vue_type_script_setup_true_lang-3d20c4d9.js";import"./FormMakingResult-fec35bca.js";import"./useSavedTasks-dbe97dc3.js";import"./useRunScript-b4e924db.js";import"./useConsole-dd6c2120.js";import"./Upload-46a3755a.js";import"./Progress-0b0a0198.js";import"./_createCompounder-4af3bdce.js";import"./Alert-2eccd136.js";import"./InputNumber-c85d5887.js";import"./Remove-be3cc84a.js";import"./Grid-308f499b.js";import"./DatePicker-91499e1f.js";import"./Pagination-ce77c3f3.js";import"./ModalConfirm-92ee844f.js";import"./useSelectProfiles-b9438807.js";import"./firefox-icon-2ab5a045.js";import"./CollapseItem-114ac5a0.js";import"./FormItemGridItem-951b0746.js";import"./vuedraggable.umd-e6c5d70a.js";import"./DataTable-e5054828.js";import"./Suffix-fc59bb7a.js";import"./InputSearch-1469c448.js";import"./InputGroup-20db4544.js";const pe={class:"flex flex-auto gap-x-2"},re={key:2},se={style:{display:"flex"}},ue={name:"ReadFile"},lo=G({...ue,setup(me){const{scriptId:x}=Y(),{editor:D,variables:M,modalNode:e}=H(x),{newVariable:s,createNewVariable:L,onSearchVariable:b,variableOptions:v}=j(D.value,M.value),E=J(null),U=[{label:"Line by line",value:y.LINE_BY_LINE},{label:"Line by line with delimiter",value:y.LINE_BY_LINE_DELIMITER}],T=u=>{const _=u.target.files[0];_&&(e.options.filePath=_.path)},k=()=>{const u=L();e.options.outputVariable=u},F=()=>"",$=u=>{const n=L();e.options.mapVariables[u]=n};return K(()=>{e.options.inputType=e.options.inputType||"file",e.options.inputVariable=e.options.inputVariable||null,e.options.fileFormat||(e.options={...e.options,fileFormat:null,outputVariable:e.options.outputVariable||null,filePath:e.options.filePath||"",readMode:e.options.readMode||y.LINE_BY_LINE,lineDelimiter:e.options.lineDelimiter||"",mapVariables:e.options.mapVariables||[],randomLine:e.options.randomLine||!1,deleteLine:e.options.deleteLine||!1,inputType:e.options.inputType||"file",inputVariable:e.options.inputVariable||null})}),(u,n)=>{const _=W,B=Z,r=ee,d=q,c=oe,C=A,I=te,S=ae,O=ne,N=X,P=ie,R=le;return l(),p(R,{trigger:"none",style:{"max-height":"500px","padding-right":"24px"}},{default:t(()=>[a(P,{class:"mx-2"},{default:t(()=>[a(N,{vertical:""},{default:t(()=>[a(r,{"show-feedback":!1,label:"Input type"},{default:t(()=>[a(B,{value:o(e).options.inputType,"onUpdate:value":n[0]||(n[0]=i=>o(e).options.inputType=i)},{default:t(()=>[a(_,{value:"file",label:"File"}),a(_,{value:"variable",label:"Variable"})]),_:1},8,["value"])]),_:1}),o(e).options.inputType==="file"?(l(),p(r,{key:0,"show-feedback":!1,label:"File path"},{default:t(()=>[g("div",pe,[a(z,{modelValue:o(e).options.filePath,"onUpdate:modelValue":n[1]||(n[1]=i=>o(e).options.filePath=i),placeholder:""},null,8,["modelValue"]),a(d,{type:"primary",dashed:"",onClick:n[2]||(n[2]=i=>o(E).click())},{icon:t(()=>[a(f,{type:"selectFile"})]),_:1})])]),_:1})):(l(),p(r,{key:1,"show-feedback":!1,label:"Variable"},{default:t(()=>[a(c,{value:o(e).options.inputVariable,"onUpdate:value":n[3]||(n[3]=i=>o(e).options.inputVariable=i),options:o(v),clearable:"",filterable:"","on-search":o(b)},{empty:t(()=>[o(s).length?(l(),p(d,{key:0,dashed:"",onClick:k},{icon:t(()=>[a(f,{type:"add"})]),default:t(()=>[m(" Create "+V(o(s)),1)]),_:1})):h("",!0)]),_:1},8,["value","options","on-search"])]),_:1})),a(r,{"show-feedback":!1,label:"Mode"},{default:t(()=>[a(c,{value:o(e).options.readMode,"onUpdate:value":n[4]||(n[4]=i=>o(e).options.readMode=i),options:U,placeholder:""},null,8,["value"])]),_:1}),o(e).options.readMode===o(y).LINE_BY_LINE_DELIMITER?(l(),Q("div",re,[a(N,{vertical:""},{default:t(()=>[a(I,{checked:o(e).options.randomLine,"onUpdate:checked":n[5]||(n[5]=i=>o(e).options.randomLine=i)},{default:t(()=>[a(C,{strong:"",type:"success"},{default:t(()=>[m(" Random ")]),_:1})]),_:1},8,["checked"]),a(I,{checked:o(e).options.deleteLine,"onUpdate:checked":n[6]||(n[6]=i=>o(e).options.deleteLine=i)},{default:t(()=>[a(C,{strong:"",type:"error"},{default:t(()=>[m(" Delete line after read ")]),_:1})]),_:1},8,["checked"]),a(r,{label:"Delimiter","show-feedback":!1},{default:t(()=>[a(S,{value:o(e).options.lineDelimiter,"onUpdate:value":n[7]||(n[7]=i=>o(e).options.lineDelimiter=i),placeholder:""},null,8,["value"])]),_:1}),o(e).options.lineDelimiter?(l(),p(r,{key:0,label:"Variables map value (Ordering by index)"},{default:t(()=>[a(O,{value:o(e).options.mapVariables,"onUpdate:value":n[8]||(n[8]=i=>o(e).options.mapVariables=i),"item-style":"margin-bottom: 0;","on-create":F},{default:t(({index:i})=>[g("div",se,[a(r,{"show-label":!1},{default:t(()=>[a(c,{value:o(e).options.mapVariables[i],"onUpdate:value":w=>o(e).options.mapVariables[i]=w,options:o(v),clearable:"",filterable:"","on-search":o(b),placeholder:""},{empty:t(()=>[o(s).length?(l(),p(d,{key:0,dashed:"",onClick:w=>$(i)},{icon:t(()=>[a(f,{type:"add"})]),default:t(()=>[m(" Create "+V(o(s)),1)]),_:2},1032,["onClick"])):h("",!0)]),_:2},1032,["value","onUpdate:value","options","on-search"])]),_:2},1024)])]),_:1},8,["value"])]),_:1})):(l(),p(r,{key:1,"show-feedback":!1,label:"Output variable"},{default:t(()=>[a(c,{value:o(e).options.outputVariable,"onUpdate:value":n[9]||(n[9]=i=>o(e).options.outputVariable=i),options:o(v),clearable:"",filterable:"","on-search":o(b),placeholder:""},{empty:t(()=>[o(s).length?(l(),p(d,{key:0,dashed:"",onClick:k},{icon:t(()=>[a(f,{type:"add"})]),default:t(()=>[m(" Create "+V(o(s)),1)]),_:1})):h("",!0)]),_:1},8,["value","options","on-search"])]),_:1}))]),_:1})])):(l(),p(r,{key:3,"show-feedback":!1,label:"Output variable"},{default:t(()=>[a(c,{value:o(e).options.outputVariable,"onUpdate:value":n[10]||(n[10]=i=>o(e).options.outputVariable=i),options:o(v),clearable:"",filterable:"","on-search":o(b),placeholder:""},{empty:t(()=>[o(s).length?(l(),p(d,{key:0,dashed:"",onClick:k},{icon:t(()=>[a(f,{type:"add"})]),default:t(()=>[m(" Create "+V(o(s)),1)]),_:1})):h("",!0)]),_:1},8,["value","options","on-search"])]),_:1}))]),_:1}),g("input",{ref_key:"file",ref:E,type:"file",style:{display:"none"},onChange:T},null,544)]),_:1})]),_:1})}}});export{lo as default};
